(self.webpackChunk=self.webpackChunk||[]).push([[9561],{8965:(e,t,n)=>{n.d(t,{$:()=>u});var i,a=n(59312),o=n(27378),s=n(5739),r=n(12187),l=n(98403),d=n(22232),c=n(44060),m=n(89894),h=n(40456);function u(e){var t=e.wrapperClassName,n=e.variation,i=e.isIdle,r=(e.ref,e.label),d=(0,a._T)(e,["wrapperClassName","variation","isIdle","ref","label"]);return o.createElement(s.F.span,{"data-role":"spinner",role:"status","aria-busy":!Boolean(i),"aria-live":Boolean(i)?"off":"polite","aria-label":null!=r?r:"Content is loading.",className:t},l.ab(n,(function(e){return o.createElement(u.Svg,(0,a.pi)({},d,{type:e,isIdle:i}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,d.vE)(t)}}},e.Svg=function(t){var n=t.className,i=t.size,s=void 0===i?64:i,l=t.strokeWidth,c=void 0===l?2:l,m=t.type,h=t.name,u=t.isIdle,p=(0,a._T)(t,["className","size","strokeWidth","type","name","isIdle"]),g=o.useRef(null),f=o.useRef(null);return o.useEffect((function(){return(0,d.kG)(null!==g.current,"groupEl should be already created"),f.current=g.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return f.current.cancel()}}),[]),o.useEffect((function(){(0,d.kG)(null!==f.current,"groupAnimation should be already created");var e=f.current;Boolean(e.play)&&(!0===u?e.pause():"running"!==e.playState&&e.play())})),o.createElement("svg",(0,a.pi)({"data-role":h},(0,r.Sh)(n),{viewBox:"25 25 50 50",width:s,height:s,"aria-hidden":!0},p),o.createElement("g",{transform:"translate(50 50)"},o.createElement("g",{ref:g},o.createElement("circle",(0,a.pi)({},(0,r.Sh)(U.path,!0===u&&b,e.getClassName(U)(m)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:c,strokeMiterlimit:"10"})))))}}(u||(u={}));var p=200,g=m.ux.keyframes({"0%":{strokeDasharray:"1px, ".concat(m.ux.px(p)),strokeDashoffset:m.ux.px(1)},"50%":{strokeDasharray:"89px, ".concat(m.ux.px(p)),strokeDashoffset:m.ux.px(-35)},"100%":{strokeDasharray:"89px, ".concat(m.ux.px(p)),strokeDashoffset:m.ux.px(-124)}}),b="spinnerIdle",f={animation:"".concat(g," 2s ease-in-out infinite"),strokeDasharray:"1px, ".concat(m.ux.px(p)),strokeDashoffset:m.ux.px(1),strokeLinecap:"round",$nest:(i={},i["&.".concat(b)]={animationIterationCount:0},i)},k={stroke:c.Il.CoreRed50},v={stroke:c.Il.CoreGreen50},I={stroke:c.Il.CoreBlue50},_={stroke:c.Il.CoreNeutral0},y={stroke:h.lh},x={stroke:h.AX},w={stroke:c.Il.CoreYellow60},E={stroke:h.FW},C={stroke:c.Il.CoreCyan50},U=m.ux.stylesheet({path:[f],red:[k],green:[v],blue:[I],white:[_],violet:[y],yellow:[x],orange:[w],gray:[E],cyan:[C]})},64078:(e,t,n)=>{n.d(t,{X:()=>N});var i,a=n(59312),o=n(27378),s=n(57050),r=n(19962),l=n(5114),d=n(44060),c=n(67424),m=n(89894),h=n(32096),u=n(40327),p=n(5739),g=n(98403),b=n(49708),f=n(85985),k=n(41398),v=n(24209),I=n(17343),_=n(38194),y=n(598),x=n(50628),w=n(25781),E=n(83078),C=n(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=C.P((function(){return b.R(self,t)}))}(i||(i={}));var U=n(42103),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!r.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,a.ZT)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return o.createElement(p.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=b.R(document,"keydown").pipe(f.h((function(e){return e.keyCode===w.R.ESC_CODE}))),n=b.R(document,"mousedown").pipe(k.M(this.context.state),f.h((function(t){var n=t[0],i=t[1];return(0,u.pipe)(i,l.map((function(e){return e.target})),l.filter((function(){return r.pK(n.target)})),E.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),a=v.T(t,n,b.R(document,"scroll"),i.observe.pipe(f.h((function(e){return"show"===e.detail})))).pipe(I.h(g.PU),_.B());this._subs=[this.context.hasContent.pipe(f.h(Boolean),y.c(a.pipe(x.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(f.h(Boolean),y.c(v.T(g.gw(!0,500),a.pipe(I.h(!1))).pipe(x.P())),f.h(Boolean)).subscribe(this.context.show)]},t.contextType=U.G.Context,t}(o.Component),N=function(){return o.createElement(S,null,(0,s.ls)(l.map((function(e){return o.createElement(c.t.ByAbsoluteRect,(0,a.pi)({rect:r.UL.fromEl(e.target),className:F.container},c.t.Alignment.toSelector(e.alignment),{withPin:!0}),o.createElement("div",{className:F.content},e.content))})),l.toNullable))},T={position:"fixed",zIndex:h.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},M={padding:"".concat(m.ux.rem(.25)," ").concat(m.ux.rem(1)),borderRadius:m.ux.rem(h.fx),background:d.Il.BackgroundTooltip,color:d.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:m.ux.px(.25),fontSize:m.ux.rem(.75),lineHeight:m.ux.rem(1)},F=m.ux.stylesheet({container:[T],content:[M]})},47849:(e,t,n)=>{n.d(t,{Cn:()=>i,LH:()=>I,ss:()=>_});var i,a=n(74850),o=n(11407),s=n(62337),r=n(28728),l=n(15555),d=n(13718),c=n(19751),m=n(77176),h=n(85985),u=n(17343),p=n(2834),g=n(24209),b=n(49708),f=n(23063),k=n(38194),v=n(73975);!function(e){e.getEqById=function(){return v.f7(((e,t)=>e&&t?e.annotation.id===t.annotation.id:e===t))}}(i||(i={}));class I{constructor(e,t=a.Y.create(I.name)){this._options=e,this._log=t,this._rawHoveredAnnotation=this._options.mouseData.pipe(d.U(o.S.hz30),c.skipBy(r.Z.eq),m.U((({client:e,offset:t})=>{if(e&&t&&function(e,t){var n;let i=t.ownerDocument.elementFromPoint(e.left,e.top);(null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.elementFromPoint)&&(i=i.shadowRoot.elementFromPoint(e.left,e.top));return t.contains(i)}(e,this._options.textNode)){const e=this._options.highlightGeometry.geometry.get();return Array.from(e.keys()).reduce(((n,i)=>{const a=e.get(i);if(a){const e=a.rects&&(null===a.meta.highlightDisplayFormat||l.jk.isInteractable(a.meta.highlightDisplayFormat))&&a.rects.find((e=>s.UL.contains(t,e)));if(e)return{annotation:a.meta.annotation,activeHighlightId:a.meta.highlightId,activeHighlightRect:e,highlightIds:[],highlightRects:[]}}return n}),null)}return null})),m.U((e=>{if(!e)return null;const t=this._options.highlightGeometry.geometry.get(),n=[],i=[];return t.forEach(((t,a)=>{t.meta.annotation.id===e.annotation.id&&(n.push(a),i.push(...t.rects))})),{...e,highlightIds:n,highlightRects:i}})),c.skipBy(i.getEqById()),c.shareReplay({bufferSize:1,refCount:!0})),this._offByUpdatedGeometry=e=>this._options.highlightGeometry.geometry.pipe(m.U((t=>e&&t.has(e.activeHighlightId)?e:null)),h.h((e=>null===e)),u.h(null),p.b((e=>this._log.trace("OffByUpdatedGeometry",e))))}}function _(e,t){return g.T(e.rect.changes.pipe(p.b((()=>t.trace("Text field position, size has been changed")))),e.scroll.changes.pipe(p.b((()=>t.trace("Text field scroll has been changed")))),b.R(self,"scroll").pipe(p.b((()=>t.trace("Window scroll detected"))))).pipe(f.q(1),u.h(null),k.B())}},94158:(e,t,n)=>{n.d(t,{_:()=>S});var i=n(27378),a=n(2844),o=n(77176),s=n(66310),r=n(28043),l=n(28094),d=n(95981),c=n(63919),m=n(25924),h=n(62337),u=n(34379),p=n(18505),g=n(2780),b=n(68383),f=n(92783),k=n(90361),v=n(14601),I=n(98403),_=n(38983),y=n(57356),x=n(51655),w=n(70718),E=n(13822);function C(e,t,n,i=!1,a=!1){const o=(0,x.Me)(e).body,s=(0,x.Jj)(e);let r={left:"0px",top:"0px"};if(t.fieldPaintingPositioning===y.Q.nonPositioned&&t.positionedAncestor===o){const e=s.getComputedStyle(o);r={left:e.marginLeft||"0px",top:e.marginRight||"0px"}}else if(t.positionedAncestor!==o){const e=s.getComputedStyle(t.positionedAncestor);r={left:e.borderLeftWidth&&`-${e.borderLeftWidth}`||"0px",top:e.borderTopWidth&&`-${e.borderTopWidth}`||"0px"}}return o=>{o.style.position="absolute",o.style.top=r.top,o.style.left=i?"auto":r.left,a||(o.style.right=i?r.left:"auto",o.style.pointerEvents="none"),function({subjectElement:e,isPositioned:t,subjectElementStyle:n,integrationRoot:i,positionedAncestor:a}){t?(i.style.zIndex=n.zIndex,e.insertAdjacentElement("afterend",i)):a.insertAdjacentElement("afterbegin",i)}({subjectElement:e,isPositioned:t.fieldPaintingPositioning===y.Q.positioned,subjectElementStyle:n,integrationRoot:o,positionedAncestor:t.positionedAncestor})}}function U(e){return h.Pf.create({...e.client,...e.size})}class S{constructor(e,t=!1){this._highlightsSubject=e,this._innerElementsInteractive=t,this._subscriptions=new v.w,this._mouse=_.h.create({offset:null,client:null}),this.getFieldPositionRelativeToViewport=()=>{const e=this._highlightsSubject.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}},this._prepareHighlights=(e,t=(0,x.is)(e))=>{const n=(0,x.o)(e),i=(0,w.fL)(e,!1,n,t);return{layout:i,rootInjector:C(e,i,n),enableHighlightsBlendingOnRoot:(0,l.$)(e,n)}},this._prepareInnerElements=(e,t=(0,x.is)(e),n)=>{const i=(0,x.o)(e),a=n||(0,w.fL)(e,!1,i,t);return{layout:a,rootInjector:C(e,a,i,!0,this._innerElementsInteractive)}},this._highlights=this._prepareHighlights(this._highlightsSubject),this._innerElements=this._prepareInnerElements(this._highlightsSubject,void 0,this._highlights.layout),this._win=(0,x.Jj)(this._highlightsSubject),this._createTextNodeRect=e=>({page:c.Cv.fromClient(e.client,{top:this._win.scrollY,left:this._win.scrollX}),offset:e.offset,client:e.client,size:e.size,padding:e.padding}),this.textNode={rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),visibleRect:this._highlights.layout.textField.visibleRect.map(this._createTextNodeRect),scroll:this._highlights.layout.textField.scroll,scrollSize:this._highlights.layout.textField.scrollSize,scroller:(0,u.iX)(this._highlightsSubject,{rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),scrollSize:this._highlights.layout.textField.scrollSize})},this.highlightHeightOffset=0,this.mouse=this._mouse.view(),this._subscriptions.add((0,a.aj)([this._highlights.layout.textField.paddingRect.behavior,this._highlights.layout.textField.scroll.behavior]).pipe((0,o.U)((([e,t])=>({rect:U(e),scroll:t}))),(0,s.w)((({rect:e,scroll:t})=>(0,f.Am)()?(0,m.q7)(this._win,e,t):(0,m.B0)(this._win,e,t))),(0,r.x)(k.fS)).subscribe(I.wW(this._mouse)))}createGeometryLayout(){return new d.D((()=>U(this._highlights.layout.textField.paddingRect.getCurrent())),(()=>this._highlights.layout.textField.scroll.getCurrent()),(()=>U(this._highlights.layout.textField.paddingRect.getApproximate())),(()=>this._highlights.layout.textField.scroll.getApproximate()))}render(e,t){const n={position:"absolute",top:0,left:0},a=(0,x.Me)(this._highlightsSubject),o=e.highlights&&p.VB.get({monitorAs:"highlights"}).inject(g.EM.fromDocument(a,"grammarly-extension"),(e=>{t.highlightsBlendingEnabled&&this._highlights.enableHighlightsBlendingOnRoot(e),this._highlights.rootInjector(e)}),b.G7.showWhenLoaded(i.createElement("div",{"data-grammarly-part":"highlights",style:n},i.createElement(E.V,{layout:this._highlights.layout},i.createElement("div",{style:n},i.createElement(e.highlights,null)))))),s=e.innerElements&&p.VB.get({monitorAs:"inner-elements"}).inject(g.EM.fromDocument(a,"grammarly-extension"),this._innerElements.rootInjector,b.G7.showWhenLoaded(i.createElement("div",{"data-grammarly-part":"inner-elements",style:{position:"absolute",top:0,right:0}},i.createElement(e.innerElements,null)))),r=e.outerElements&&p.VB.get({monitorAs:"outer-elements"}).inject(g.EM.fromDocument(a,"grammarly-extension"),g.zs.appendChild(a.documentElement),b.G7.showWhenLoaded(i.createElement(e.outerElements,null)),{eventPropagationHandler:t.eventPropagationHandler});return{dispose:()=>{null==o||o.dispose(),null==r||r.dispose(),null==s||s.dispose()}}}dispose(){this._subscriptions.unsubscribe()}}},55421:(e,t,n)=>{n.d(t,{_:()=>_});var i,a=n(17771),o=n(57050),s=n(48044),r=n(23923),l=n(19019),d=n(52965),c=n(66319),m=n(75420),h=n(85985),u=n(77176),p=n(93508),g=n(16118),b=n(73975),f=n(71249),k=n(5114),v=n(43675),I=n(92843);function _(e){const t=Date.now();return c.x.create(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["contenteditable"]}).pipe(h.h((e=>e.some((e=>"attributes"==e.type&&(0,m.Re)(e.target)?e.target.matches(d.kO):Array.from(e.addedNodes).filter(m.Re).some((e=>e.matches(d.kO)||!!e.querySelector(d.kO)))||Array.from(e.removedNodes).filter(m.Re).some((e=>e.querySelector(d.kO))))))),u.U((t=>Array.from(e.querySelectorAll(d.kO))))).pipe(p.O(Array.from(e.querySelectorAll(d.kO))),u.U((e=>(0,o.zG)(e,f.UI((e=>(0,o.zG)(k.fromNullable(e.closest(d.e8)),k.chain((n=>{var i;return a.Y(k.option)({textField:k.some(e),formEl:k.fromNullable(null===(i=n.closest(d.KC))||void 0===i?void 0:i.querySelector(d.ZA)),buttonEl:k.fromNullable(n.querySelector(d.DM)),messageId:(0,o.zG)(k.fromNullable(e.closest(d.n4)),k.chain(l.Su)),initTime:k.some(t),startTime:k.some(Date.now()-t)})}))))),f.oA,f.u4(new Map,((e,t)=>(0,o.zG)(e,s.ZQ(b.w4)(t.formEl,t))))))),p.O(new Map),g.G(),u.U((([e,t])=>(0,o.zG)(v.yi(i.eq)(e,t),I.v.reduce({forms:new Map(Array.from(t.values()).map((e=>[e.messageId,e]))),added:new Set,updated:new Set,removed:new Set},((e,t)=>({...e,removed:e.removed.add(t.messageId)})),((e,t,n)=>({...e,updated:e.updated.add(n.messageId)})),((e,t)=>({...e,added:e.added.add(t.messageId)})))))))}!function(e){e.eq=b.MW({textField:b.w4,formEl:b.w4,buttonEl:b.w4,messageId:r.eo.eq,initTime:b.lr,startTime:b.lr})}(i||(i={}))},44126:(e,t,n)=>{n.d(t,{c:()=>k});var i=n(57050),a=n(90361),o=n(32952),s=n(71032),r=n(12126),l=n(85321),d=n(77176),c=n(85985),m=n(23063),h=n(17343),u=n(2834),p=n(77150),g=n(78674),b=n(5114),f=n(70631);function k(e,t=0){return n=>{const k=new o.xQ;return(0,i.zG)(n,s.b((e=>r.D(Array.from(e)))),l.zg((t=>e.pipe(d.U((e=>(0,i.zG)(b.fromNullable(e.expandedMessages.get(t)),b.fold(i.jv,f.d6)))),c.h(a.fQ),m.q(1),h.h(t)))),u.b((()=>k.next())),p.R((()=>k.pipe(g.b(t)))),d.U((e=>new Set(e))),c.h((e=>e.size>0)))}}},68729:(e,t,n)=>{n.r(t),n.d(t,{createReaderGmailThreadIntegration:()=>Qo});var i,a=n(17771),o=n(57050),s=n(29511),r=n(34379),l=n(48044),d=n(30625),c=n(55415),m=n(70631),h=n(5114),u=n(38983);function p(e){return(0,o.zG)((0,d.zk)(e.annotations),h.flatten,h.map(c.ei("filteringInfo")),h.alt((()=>(0,o.zG)((0,d.zk)(e.summary),h.flatten,h.map(c.ei("filteringInfo"))))))}!function(e){e.create=function(e,t,n){return u.h.combine(e,n,t,((e,t,n)=>({threadId:e.threadId,subject:e.subject,loggedUser:e.loggedUser,messageCount:e.messageCount,messageIndexToIdMap:e.messageIndexToIdMap,expandedMessages:(0,o.zG)(e.expandedMessages,l.Su(((i,a)=>({message:(0,o.zG)(a,m.UI((t=>({id:t.id,index:t.index,author:t.context.author,audience:t.context.audience,links:t.context.links,wordCount:(0,d.Y2)(t.textMap.getPlainText()),date:t.context.date,isLastMessage:t.index===e.messageCount-1})))),summary:n.get(i)||(m.VZ(a)||m.IR(a)?a:m.x5),annotations:t.get(i)||(m.VZ(a)||m.IR(a)?a:m.x5)}))))})))}}(i||(i={}));var g,b,f=n(27378),k=n(8125);!function(e){e.showContent="showContent",e.hideFilteredMessageContent="hideFilteredMessageContent",e.showFilteredMessageContent="showFilteredMessageContent"}(g||(g={})),function(e){e.overview="overview",e.coreUserJourney="coreUserJourney",e.pinning="pinning"}(b||(b={}));const v=[b.overview,b.coreUserJourney,b.pinning];function I(e){return"collapsed"===e.kind}function _(e){return"collapsed"!==e.kind}function y(e){return"messageView"===e.kind}function x(e){return"pinnedView"===e.kind}function w(e){return"onboardingView"===e.kind}function E(e){return"messageView"===e.kind&&m.d6(e.message)&&(0,o.zG)(e.summary,h.map(c.ei("data")),h.map((0,k.Kg)(m.d6,m.VZ,m.IR)),h.getOrElse(o.W8))&&(0,o.zG)(e.questions,h.map(c.ei("data")),h.map((0,k.Kg)(m.d6,m.VZ,m.IR)),h.getOrElse(o.W8))&&(0,o.zG)(e.links,h.map(c.ei("data")),h.map((0,k.Kg)(m.d6,m.VZ,m.IR)),h.getOrElse(o.W8))}var C=n(77176),U=n(5739),S=n(16027),N=n(60797),T=n(76974),M=n(61922);const F={textBoxPlaceholder:"Share your thoughts here.",textBoxAriaLabel:"Feedback text",submitButton:"Submit",cancelButton:"Close",requiredLabel:"Required"},A={onboarding:{optInButton:"Try it out",optOutButton:"No, thanks",prevIconTooltip:"Previous",nextIconTooltip:"Next",badge:"NEW",betaTermsUrl:"https://www.grammarly.com/beta-feature-terms",stepOfN:e=>`${e} OF 3`,overview:{phase0:{title:"Introducing email recaps",body:"Now Grammarly can automatically summarize key points to help you reply faster."},phase1:{title:"Introducing email recaps",body:"Now Grammarly can automatically summarize key points and follow-up actions."},phase2:{title:"Introducing email recaps",body:"Now Grammarly can automatically recap key points and help you decide whether you need to reply."},videoSrc:"https://d201kpdrh73vuz.cloudfront.net/reader/onboarding-overview.gif"},coreUserJourney:{title:"Reply faster",body:"Everything you need at your fingertips. Focus on writing, not hunting for details.",videoSrc:"https://d201kpdrh73vuz.cloudfront.net/reader/onboarding-core-user-journey.gif"},pinning:{title:"Choose what's important",body:"Pin key points and things to follow up on while you're reading.",videoSrc:"https://d201kpdrh73vuz.cloudfront.net/reader/onboarding-pinning.gif"},disclaimer:{text:"Grammarly collects data from your emails to power recaps. Learn how your information is used and protected in our %link%.",linkPlaceholder:"%link%",link:{text:"data collection policy",URL:"https://www.grammarly.com/recap"}}},expandedPanel:{viewButton:{thread:"Messages",pins:"Pinned"},goLeftIconTooltip:"Previous message",goRightIconTooltip:"Next message",jumpFirstIconTooltip:"Jump to first message",jumpLastIconTooltip:"Jump to last message",actionsButtonTooltip:"Actions",itemMenu:{copyTooltip:"Copy",pinTooltip:"Add pin",unpinTooltip:"Remove pin",dismissTooltip:"Dismiss",likeTooltip:"Helpful",dislikeTooltip:"Unhelpful",itemLikedTooltip:"This item is helpful",itemDislikedTooltip:"This item isn't helpful"},threadView:{summaries:{title:"Summary",empty:{title:"No items found",body:"Did we miss something?",CTA:"Help us improve"},filteredHidden:{title:"Content hidden",body:"Includes content from this message that you may not need.",CTA:"Show anyway"},filteredShown:{title:"Showing content from this message that you may not need."}},followUps:{title:"Follow-ups",empty:{title:"No follow-ups found",body:"Did we miss something?",CTA:"Help us improve"},filteredHidden:{title:"Content hidden",body:"Includes follow-ups from this message that you may not need.",CTA:"Show anyway"},filteredShown:{title:"Showing follow-ups from this message that you may not need."}},links:{title:"Links and attachments",empty:{title:"No links or attachments found",body:"Did we miss something?",CTA:"Help us improve"},filteredHidden:{title:"Content hidden",body:"Includes links and attachments from this message that you may not need.",CTA:"Show anyway"},filteredShown:{title:"Showing links and attachments from this message that you may not need."}}},pinnedView:{summaries:{title:"Summary",empty:{title:"Nothing pinned yet",body:"Pin important summary items to find them more easily.",CTA:"Return to Messages tab"}},followUps:{title:"Follow-ups",empty:{title:"Nothing pinned yet",body:"Pin follow-ups to find them more easily.",CTA:"Return to Messages tab"}},links:{title:"Links and attachments",empty:{title:"Nothing pinned yet",body:"Pin links and attachments to find them more easily.",CTA:"Return to Messages tab"}}}},collapseIconTooltip:"Hide email recap",collapsedNothingToRecap:"Nothing to recap",expandIconTooltip:"Open email recap",recapExpandTooltip:"Open email recap",recapCollapseTooltip:"Hide email recap",sendFeedbackButton:"Send feedback",genericFeedbackDialog:{...F,ratings:["It's not helpful","It could be better","It's okay","It's pretty helpful","It's great"],title:"Is Grammarly Recap helpful?"},tellsUsMoreFeedbackDialog:{...F,cancelButton:"Skip",title:"Tell us more",description:"We'd love to hear what's going well and how we can improve."},notifications:{thankYou:"Thank you for your feedback"},enableInlineHighlights:"Show highlight",disableInlineHighlights:"Hide highlight",inlineOnboarding:{highlight:{title:"Find the key points faster",content:"Important sentences have been highlighted so you can read and act on email more quickly.",next:"Next",close:"Close"},highlightsSwitch:{title:"Hide email highlights",content:"You can turn highlights off when you don't need them.",next:"Next",close:"Close"},panelSwitch:{title:"View full recap",content:"Expand the panel to view email summaries, handy follow-up checklists, and more.",next:"Got it"}}};var L,G,O,P,K,z,R,B,H=n(85985),D=n(22232);!function(e){e.first="first",e.last="last",e.left="left",e.right="right"}(L||(L={})),function(e){e.left="left",e.right="right"}(G||(G={})),function(e){e.onboardingPanel="onboardingPanel",e.readerPanel="readerPanel"}(O||(O={})),function(e){e.collapseButton="collapseButton",e.recapButton="recapButton"}(P||(P={})),function(e){e.expandButton="expandButton",e.recapButton="recapButton",e.replyButton="replyButton"}(K||(K={})),function(e){e.messagesButton="messagesButton",e.emptyPinnedSummaries="emptyPinnedSummaries",e.emptyPinnedFollowUps="emptyPinnedFollowUps",e.emptyPinnedLinks="emptyPinnedLinks"}(z||(z={})),function(e){let t;!function(e){e.panelMounted="panelMounted",e.collapse="collapse",e.expand="expand",e.threadViewNavigate="threadViewNavigate",e.onboardingViewNavigate="onboardingViewNavigate",e.openPinnedView="openPinnedView",e.openMessageView="openMessageView",e.optIn="optIn",e.optOut="optOut",e.closeNotification="closeNotification",e.submitFeedback="submitFeedback",e.skipFeedback="skipFeedback",e.closeFeedback="closeFeedback",e.openFeedback="openFeedback",e.columnScroll="columnScroll",e.itemBlur="itemBlur",e.itemMounted="itemMounted",e.openItemMenu="openItemMenu",e.linkClick="linkClick",e.check="check",e.pin="pin",e.copy="copy",e.dismiss="dismiss",e.like="like",e.dislike="dislike",e.toggleInlineHighlights="toggleInlineHighlights",e.seenInlineHighlightsOnboarding="seenInlineHighlightsOnboarding",e.setInlineHighlightsOnboardingStep="setInlineHighlightsOnboardingStep",e.inlineHighlightOnboardingElementMounted="inlineHighlightOnboardingElementMounted",e.showFilteredContent="showFilteredContent"}(t=e.Kind||(e.Kind={})),e.matchSubmitFeedback=function(e){return t=>{switch(t.source.kind){case"collapsedPanelButton":return e.collapsedPanelButton(t);case"expandedPanelHeaderButton":return e.expandedPanelHeaderButton(t);case"emptySummaryViewButton":case"emptyFollowUpsViewButton":case"emptyLinksViewButton":return e.emptyViewButton(t);case"itemPanelMenu":return e.itemMenu(t);default:(0,D.vE)(t.source)}}},e.itemTypeIs=function(e){return t=>t.itemType===e},e.is=function(e){return t=>t.kind===e}}(R||(R={})),function(e){e.ofType=function(e){return H.h(R.is(e))}}(B||(B={}));var V=n(64757),Z=n(76168);const j=S.UI.Grid.make((({slots:e,notify:t})=>f.createElement(U.F.div,{className:Z.notification},e.icon,e.content,f.createElement(V.zx.Ghost,{name:"close-notification",onClick:t({kind:R.Kind.closeNotification})},f.createElement(M.JO.Close,null))))),q=S.UI.Knot.make(j,{icon:S.UI.Node.make((()=>f.createElement(M.JO.NotificationInfo,null))),content:S.UI.Node.make((()=>f.createElement("span",null,A.notifications.thankYou)))});function W(e){return t=>e.actions.next(t)}function J(e){return S.Z.composeKnot({root:S.Z.fromSideEffect(W(e),null),icon:()=>T.of(null),content:()=>T.of(null)})}const Q=S.UI.Union.make("kind",{thankYou:q}),$=S.UI.Union.asOption(Q);function Y(e){return S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeUnion({thankYou:J(e)},(()=>e.state.pipe(C.U((e=>e.notification)),N.oA)))}),None:()=>T.of(null)},(()=>e.state.pipe(C.U((e=>e.notification)))))}var X=n(8965),ee=n(23556),te=n(57053),ne=n(22667),ie=n(2844),ae=n(12187),oe=n(78870);const se=e=>S.UI.Grid.make((({slots:t,view:n,notify:i})=>f.createElement("div",{className:oe.dialog},f.createElement("header",{className:oe.header},f.createElement("div",{className:oe.headerGroup},f.createElement(ne.K,{size:16}),"Help us improve"),f.createElement(U.F.Fragment,null,n("source").pipe(C.U((e=>f.createElement(V.zx.Ghost,{onClick:i({kind:"close",source:e}),name:"feedback-dialog-close"},f.createElement(M.JO.Close,null))))))),f.createElement(U.F.Fragment,null,t.title,t.rating,t.description),f.createElement(U.F.div,{role:"textbox",...(0,ae.Sh)(oe.textbox,n("formErrors").pipe(C.U((e=>e.has("textRequired")?oe.requiredTextBox:void 0)))),contentEditable:!0,"aria-placeholder":e.textBoxPlaceholder,"data-placeholder":e.textBoxPlaceholder,"aria-label":e.textBoxAriaLabel,onInput:e=>i({kind:"text",text:e.target.innerText})()}),f.createElement(U.F.Fragment,null,n("formErrors").pipe(C.U((t=>t.has("textRequired")?f.createElement("span",{className:oe.requiredLabel},e.requiredLabel):null)))),f.createElement("div",{className:oe.buttons},f.createElement(U.F.Fragment,null,n("source").pipe(C.U((t=>f.createElement(f.Fragment,null,f.createElement(V.zx.Primary,{onClick:i({kind:"submit",source:t}),name:"feedback-dialog-submit"},e.submitButton),f.createElement(V.zx.Ghost,{onClick:i({kind:"skip",source:t}),name:"feedback-dialog-skip"},e.cancelButton))))))))));function re(e,t){const n=u.h.create({text:"",formErrors:new Set});return S.Z.fromSideEffect((i=>{switch(i.kind){case"text":n.modify((e=>({text:i.text,formErrors:(0,o.zG)(new Set(e.formErrors),(e=>(e.delete("textRequired"),e)))})));break;case"close":n.set({text:"",formErrors:new Set}),e.actions.next({kind:R.Kind.closeFeedback,source:i.source});break;case"skip":n.set({text:"",formErrors:new Set}),e.actions.next({kind:R.Kind.skipFeedback,source:i.source});break;case"submit":{""===n.get().text.trim()&&n.lens("formErrors").set(new Set(["textRequired"]));const a=(0,o.zG)(t,h.chain((e=>e())));0===n.get().formErrors.size&&(h.isNone(t)||h.isSome(a))&&(e.actions.next({kind:R.Kind.submitFeedback,source:i.source,text:n.get().text,scoreResult:a}),n.set({text:"",formErrors:new Set}));break}default:(0,D.vE)(i)}}),ie.aj([e.state.pipe(C.U((e=>e.feedbackDialog)),N.oA),n]).pipe(C.U((([{source:e},{formErrors:t}])=>({source:e,formErrors:t})))))}var le=n(90845),de=n(93508),ce=n(19962),me=n(61033);const he=({onMount:e})=>f.createElement("div",{ref:e,className:me.panelOverlay}),ue=S.UI.Grid.make((({state:e,slots:t})=>{const{ref:n,onMount:i}=le.P.useElWatcher(),a=ie.aj([e,n.pipe(C.U(h.map(ce.UL.fromEl)),N.oA)]).pipe(C.U((([e,t])=>({..."bottom"===e.dialogSide?{top:e.sourceRect.bottom-t.top}:"top"===e.dialogSide?{bottom:t.bottom-e.sourceRect.bottom+e.sourceRect.height}:{},..."right"===e.alignment?{right:t.right-e.sourceRect.right}:"left"===e.alignment?{left:e.sourceRect.left-t.left}:{}}))),de.O({}));return f.createElement(f.Fragment,null,f.createElement(he,{onMount:i}),f.createElement(U.F.div,{className:me.dialog,style:a},t.content))}));function pe(e){return()=>e.state.pipe(C.U((e=>e.feedbackDialog)),N.oA,C.U((e=>e.position)))}var ge=n(56229);const be=S.UI.Node.make((({state:e,notify:t})=>f.createElement("div",{className:ge.rating},f.createElement(te.i,{maxRating:A.genericFeedbackDialog.ratings.length,ratingLabels:A.genericFeedbackDialog.ratings,className:ge.ratingContainer,ratingStarsClassName:ge.ratingStars,ratingLegendClassName:ge.ratingLegend,ratingLabelsClassName:ge.ratingLabels,onChange:e=>t({score:e})(),ariaLabel:A.genericFeedbackDialog.title}),f.createElement(U.F.Fragment,null,e.pipe(C.U((e=>e?f.createElement("span",{className:ge.requiredLabel},A.genericFeedbackDialog.requiredLabel):null))))))),fe=S.UI.Knot.make(se(A.genericFeedbackDialog),{title:S.UI.Node.make((()=>f.createElement("h1",{className:ge.title},A.genericFeedbackDialog.title))),rating:be,description:S.UI.Node.empty}),ke=S.UI.Knot.make(ue,{content:fe}),ve=S.UI.Union.asOption(ke);function Ie(e){const t=u.h.create({score:h.none,showRequired:!1});return S.Z.composeKnot({root:re(e,h.some((()=>(0,o.zG)(t.get().score,(e=>(h.isNone(e)&&t.lens("showRequired").set(!0),e)),h.map((e=>({score:e,label:A.genericFeedbackDialog.ratings[e]||""}))))))),title:()=>T.of(null),rating:S.Z.fromSideEffect((e=>t.set({score:h.some(e.score),showRequired:!1})),t.view("showRequired")),description:()=>T.of(null)})}function _e(e,t){return S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:pe(e),content:Ie(e)})}),None:()=>T.of(null)},(()=>e.state.pipe(C.U((0,o.ls)(c.ei("feedbackDialog"),h.filter(t))))))}var ye=n(32952),xe=n(41398),we=n(2834);const Ee=S.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=le.P.useElWatcher(),a=f.useRef(new ye.xQ);return le.P.useSubscriptionTo(a.current.pipe(xe.M(n),C.U((([e,t])=>h.map(ce.UL.fromEl)(t))),N.oA,we.b((e=>t({kind:"openFeedback",buttonRect:e})())))),f.createElement(U.F.Fragment,null,e.pipe(C.U((({active:e,isSupported:t})=>t?f.createElement(V.zx.Ghost,{mount:i,onClick:()=>a.current.next(),name:"panel-open-feedback-button",title:A.sendFeedbackButton,ariaLabel:A.sendFeedbackButton,active:e},f.createElement(M.JO.AssistantFeedback,null)):null))))}));function Ce(e,t){return S.Z.fromSideEffect((n=>{if("openFeedback"===n.kind)t?e.actions.next({kind:R.Kind.openFeedback,source:{kind:"collapsedPanelButton"},position:{sourceRect:n.buttonRect,dialogSide:"top",alignment:"right"}}):e.actions.next({kind:R.Kind.openFeedback,source:{kind:"expandedPanelHeaderButton"},position:{sourceRect:n.buttonRect,dialogSide:"bottom",alignment:"right"}});else(0,D.vE)(n.kind)}),e.state.pipe(C.U((e=>e.feedbackDialog)),C.U((n=>({active:(0,o.zG)(n,h.fold(o.jv,(({source:e})=>t?"collapsedPanelButton"===e.kind:"expandedPanelHeaderButton"===e.kind))),isSupported:e.isSubmitFeedbackDialogSupported})))))}const Ue=S.UI.Grid.make((({slots:e})=>f.createElement(U.F.Fragment,null,e.button,e.dialog))),Se=S.UI.Knot.make(Ue,{button:Ee,dialog:ve});function Ne(e,t,n){return S.Z.composeKnot({button:Ce(e,t),dialog:_e(e,n)})}var Te;!function(e){e.InlineHighlightsDisabled=({className:e,width:t=24})=>f.createElement(M.a1,{className:e,width:t,viewBox:"0 0 24 24"},f.createElement("path",{d:"M6.142,16.333L3.449,19.026C3.306,19.169 3.263,19.384 3.34,19.571C3.418,19.758 3.6,19.88 3.802,19.88L7.338,19.88C7.471,19.88 7.598,19.827 7.692,19.733L8.617,18.808L11.784,18.641C11.907,18.635 12.024,18.583 12.111,18.496L20.596,10.01C21.182,9.425 21.182,8.475 20.596,7.889C20.596,7.889 17.061,4.354 17.061,4.354C16.475,3.768 15.525,3.768 14.939,4.354L7.515,11.778L6.454,12.839C6.367,12.926 6.315,13.043 6.309,13.166L6.142,16.333ZM8.222,12.485L12.465,16.728L11.54,17.653C11.54,17.653 8.595,17.808 8.595,17.808C8.595,17.808 7.142,16.355 7.142,16.355L7.297,13.41L8.222,12.485ZM13.172,16.021L8.929,11.778L15.646,5.061C15.842,4.865 16.158,4.865 16.354,5.061L19.889,8.596C20.084,8.791 20.084,9.108 19.889,9.303L13.172,16.021Z",fill:"inherit",stroke:"none"})),e.InlineHighlightsEnabled=({className:e,width:t=24})=>f.createElement(M.a1,{className:e,width:t,viewBox:"0 0 24 24"},f.createElement("path",{d:"M14.939,4.354C15.525,3.768 16.475,3.768 17.061,4.354L20.596,7.889C21.182,8.475 21.182,9.425 20.596,10.01L18.934,11.673C18.533,11.574 18.117,11.516 17.689,11.503L19.889,9.303C20.084,9.108 20.084,8.791 19.889,8.596L16.353,5.061C16.158,4.865 15.842,4.865 15.646,5.061L8.929,11.778L12.078,14.927C11.921,15.257 11.794,15.603 11.699,15.962L8.222,12.485L7.297,13.41L7.142,16.355L8.595,17.808L11.502,17.655C11.51,17.995 11.547,18.327 11.61,18.651L8.616,18.808L7.691,19.733C7.598,19.827 7.47,19.88 7.338,19.88L3.802,19.88C3.6,19.88 3.418,19.758 3.34,19.571C3.263,19.384 3.306,19.169 3.449,19.026L6.141,16.333L6.308,13.166C6.315,13.043 6.367,12.926 6.454,12.839L14.939,4.354Z",fill:"inherit",stroke:"none"}),f.createElement("path",{d:"M22,17.5C22,15.015 19.985,13 17.5,13C15.015,13 13,15.015 13,17.5C13,19.985 15.015,22 17.5,22C19.985,22 22,19.985 22,17.5ZM21,17.5C21,19.433 19.433,21 17.5,21C15.567,21 14,19.433 14,17.5C14,15.567 15.567,14 17.5,14C19.433,14 21,15.567 21,17.5Z",fill:"inherit",stroke:"none"}),f.createElement("path",{d:"M20.015,16.765C20.162,16.619 20.162,16.381 20.015,16.235C19.869,16.088 19.631,16.088 19.485,16.235L17,18.72L16.015,17.735C15.869,17.588 15.631,17.588 15.485,17.735C15.338,17.881 15.338,18.119 15.485,18.265L17,19.78L20.015,16.765Z",fill:"inherit",stroke:"none"}))}(Te||(Te={}));const Me=S.UI.Node.make((({state:e,notify:t})=>{const{onMount:n,ref:i}=le.P.useElWatcher();return le.P.useSubscriptionTo(i.pipe(N.oA,we.b((e=>t({kind:"buttonMounted",node:e})())))),f.createElement(U.F.Fragment,null,e.pipe(C.U((({inlineHighlightsEnabled:e,isSupported:i})=>i?f.createElement("div",{ref:n},f.createElement(V.zx.Ghost,{onClick:t({kind:"toggleInlineHighlights",enabled:!e}),name:"panel-toggle-highlight-button",title:e?A.disableInlineHighlights:A.enableInlineHighlights,ariaLabel:e?A.disableInlineHighlights:A.enableInlineHighlights,key:"inlineHighlightsButton"},e?f.createElement(Te.InlineHighlightsEnabled,null):f.createElement(Te.InlineHighlightsDisabled,null))):null))))}));function Fe(e){return S.Z.fromSideEffect((t=>{"toggleInlineHighlights"===t.kind?e.actions.next({kind:R.Kind.toggleInlineHighlights,enabled:t.enabled}):"buttonMounted"===t.kind?e.actions.next({kind:R.Kind.inlineHighlightOnboardingElementMounted,step:"highlightsSwitch",node:t.node}):(0,D.vE)(t)}),e.inlineHighlightsEnabled.pipe(C.U((t=>({inlineHighlightsEnabled:(0,o.zG)(t,h.getOrElse(o.jv)),isSupported:e.areInlineHighlightsSupported&&h.isSome(t)})))))}var Ae=n(64908),Le=n(86705),Ge=n(25262),Oe=n(58120);const Pe=({onClick:e,title:t,focusable:n,browser:i,ariaLabel:a})=>f.createElement(V.zx.Flat,{className:Oe.recapButton,onClick:e,name:"recap-button",title:t,ariaLabel:a,tabIndex:n?0:-1},f.createElement(ne.K,{size:22.4,className:Oe.logo}),f.createElement(Ke,null),f.createElement(Le.v,{browser:i})),Ke=({color:e=Ge.Z.neutral70})=>f.createElement("svg",{width:"44",height:"10",viewBox:"0 0 44 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"Recap",className:Oe.recap},f.createElement("path",{d:"M0 9.54578V0.454902H3.92401C4.53474 0.441273 5.14052 0.567287 5.69515 0.823335C6.18417 1.05365 6.59476 1.42255 6.8759 1.88423C7.168 2.38768 7.31401 2.96257 7.29756 3.54439C7.31546 4.10697 7.17223 4.66295 6.88473 5.14684C6.61248 5.58484 6.21939 5.93477 5.75281 6.15448L7.5994 9.54578H4.9183L3.32033 6.5451H2.46806V9.54578H0ZM2.46804 4.62749H3.33804C3.69403 4.64717 4.04783 4.56065 4.35456 4.37891C4.48182 4.28258 4.58244 4.1554 4.6469 4.00939C4.71137 3.86337 4.73756 3.70334 4.723 3.54439C4.73683 3.38295 4.71041 3.22059 4.64612 3.07185C4.58182 2.92312 4.48164 2.79264 4.35456 2.69212C4.05216 2.49864 3.69646 2.40545 3.33804 2.42578H2.46804V4.62749Z",fill:e}),f.createElement("path",{d:"M8.85059 9.5458V0.454918H15.4024V2.44356H11.3187V4.00606H15.0651V5.99469H11.3187V7.55719H15.3847V9.5458H8.85059Z",fill:e}),f.createElement("path",{d:"M25.1719 3.86399H22.6684C22.6488 3.48459 22.4872 3.12646 22.2156 2.8608C22.0648 2.72733 21.8892 2.6249 21.6988 2.5594C21.5084 2.49389 21.3069 2.46658 21.1059 2.47905C20.8315 2.46406 20.5576 2.51745 20.3089 2.63444C20.0602 2.75143 19.8445 2.92836 19.681 3.14933C19.3227 3.69763 19.15 4.34649 19.1883 5.00036C19.1409 5.66688 19.3157 6.33031 19.6854 6.8869C19.8521 7.09645 20.0662 7.26331 20.3101 7.37369C20.5541 7.48407 20.8208 7.53479 21.0882 7.52167C21.4779 7.542 21.862 7.42235 22.1713 7.18431C22.4451 6.94828 22.6221 6.61948 22.6684 6.26097L25.1719 6.27873C25.1359 6.68719 25.0261 7.08574 24.8479 7.45505C24.4293 8.33025 23.6927 9.01287 22.7883 9.36375C22.1411 9.60001 21.4525 9.70142 20.7647 9.66174C20.0769 9.62206 19.4045 9.44212 18.7888 9.133C18.1238 8.76993 17.5792 8.22072 17.2218 7.5527C16.8183 6.76399 16.6213 5.88584 16.6493 5.00033C16.62 4.11171 16.8219 3.23071 17.2352 2.44351C17.5977 1.77593 18.1468 1.22837 18.8154 0.867676C19.4982 0.504684 20.2616 0.319939 21.0348 0.330567C21.7374 0.318011 22.4343 0.458893 23.0768 0.743384C23.6602 1.00422 24.1608 1.42034 24.5238 1.94633C24.906 2.51684 25.1296 3.17864 25.1719 3.86399Z",fill:e}),f.createElement("path",{d:"M28.3137 9.5458H25.6504L28.6511 0.454918H32.0246L35.0254 9.5458H32.3621L31.8382 7.8058H28.8375L28.3137 9.5458ZM29.3968 5.95918H31.2789L30.3734 2.95847H30.3024L29.3968 5.95918Z",fill:e}),f.createElement("path",{d:"M36.2773 9.54575V0.454869H40.2013C40.8155 0.440928 41.4237 0.578119 41.9724 0.854376C42.4653 1.10813 42.8751 1.49788 43.1532 1.97742C43.4429 2.49314 43.5886 3.07729 43.5749 3.66865C43.5901 4.26188 43.4394 4.84758 43.1399 5.35988C42.852 5.83714 42.4307 6.21979 41.9281 6.46071C41.3612 6.72892 40.7395 6.86116 40.1125 6.8469H38.7453V9.54573L36.2773 9.54575ZM38.7453 4.9293H39.6153C39.9848 4.95083 40.3486 4.83012 40.6319 4.59194C40.7558 4.47337 40.8528 4.32958 40.9164 4.1703C40.9799 4.01102 41.0086 3.83995 41.0003 3.66865C41.0097 3.49854 40.9816 3.32845 40.9179 3.17043C40.8542 3.0124 40.7566 2.87032 40.6319 2.75423C40.3461 2.52145 39.9833 2.40425 39.6153 2.42575H38.7453V4.9293Z",fill:e})),ze=S.UI.Grid.make((({state:e,slots:t,notify:n})=>(le.P.useEffectOnDidMount(n("panelMounted")),f.createElement(U.F.div,{className:Ae.panelGrid},f.createElement(U.F.div,{className:Ae.header},e.pipe(C.U((({expanded:e,browser:t,focusable:i})=>f.createElement(Pe,{onClick:n(e?"collapse":"expand"),title:e?A.recapCollapseTooltip:A.recapExpandTooltip,ariaLabel:e?A.recapCollapseTooltip:A.recapExpandTooltip,browser:t,focusable:i})))),t.header,f.createElement(U.F.div,{className:Ae.toolbar},t.toolbar)),t.content))));function Re(e){return S.Z.fromSideEffect((t=>{switch(t){case"collapse":e.actions.next({kind:R.Kind.collapse,source:P.recapButton});break;case"expand":e.actions.next({kind:R.Kind.expand,source:K.recapButton});break;case"panelMounted":e.actions.next({kind:R.Kind.panelMounted,subject:O.readerPanel});break;default:(0,D.vE)(t)}}),e.state.pipe(C.U((t=>({expanded:_(t),browser:e.browser,focusable:h.isNone(t.feedbackDialog)})))))}const Be=S.UI.Node.make((({state:e,notify:t})=>{const{onMount:n,ref:i}=le.P.useElWatcher();return le.P.useSubscriptionTo(i.pipe(N.oA,we.b((e=>t({kind:"buttonMounted",node:e})())))),f.createElement(U.F.Fragment,null,e.pipe(C.U((({expanded:e,focusable:i})=>f.createElement("div",{ref:n},f.createElement(V.zx.Ghost,{onClick:t(e?{kind:"buttonClicked",state:"collapse"}:{kind:"buttonClicked",state:"expand"}),name:"toggle-panel-button",title:e?A.collapseIconTooltip:A.expandIconTooltip,ariaLabel:e?A.collapseIconTooltip:A.expandIconTooltip,tabIndex:i?0:-1},f.createElement(M.JO.Arrow,{direction:e?M.n4.up:M.n4.down})))))))}));function He(e){return S.Z.fromSideEffect((t=>{if("buttonClicked"===t.kind)switch(t.state){case"expand":e.actions.next({kind:R.Kind.expand,source:K.expandButton});break;case"collapse":e.actions.next({kind:R.Kind.collapse,source:P.collapseButton});break;default:(0,D.vE)(t.state)}else"buttonMounted"===t.kind?e.actions.next({kind:R.Kind.inlineHighlightOnboardingElementMounted,step:"panelSwitch",node:t.node}):(0,D.vE)(t)}),e.state.pipe(C.U((e=>({expanded:_(e),focusable:h.isNone(e.feedbackDialog)})))))}const De=S.UI.Grid.make((({slots:e})=>f.createElement(U.F.Fragment,null,e.toggleInlineHighlights,e.feedback,e.togglePanel))),Ve=S.UI.Knot.make(De,{feedback:Se,togglePanel:Be,toggleInlineHighlights:Me}),Ze=S.UI.Union.make("kind",{loaded:Ve,loading:S.UI.Node.make((()=>f.createElement(X.$,{variation:"blue",size:18,strokeWidth:3,wrapperClassName:ee.spinner})))}),je=S.UI.Node.make((({view:e})=>f.createElement(U.F.div,{className:ee.header},e("nothingToRecap").pipe(C.U((0,k.RN)(f.createElement("div",{className:ee.nothingToRecap},A.collapsedNothingToRecap),f.createElement(f.Fragment,null))))))),qe=S.UI.Knot.make(ze,{header:je,toolbar:Ze,content:S.UI.Node.empty});function We(e){return S.Z.composeKnot({root:Re(e),header:()=>e.state.pipe(H.h(I)),toolbar:S.Z.composeUnion({loaded:S.Z.composeKnot({feedback:Ne(e,!0,(e=>"collapsedPanelButton"===e.source.kind)),togglePanel:He(e),toggleInlineHighlights:Fe(e)}),loading:()=>T.of(null)},(()=>e.state.pipe(H.h(I),C.U((e=>({kind:e.loading?"loading":"loaded"})))))),content:()=>T.of(null)})}var Je=n(49708),Qe=n(83771);const $e=(0,ae.xb)((({children:e})=>f.createElement("h6",{className:Qe.sectionTitle},e))),Ye=e=>S.UI.Grid.make((({slots:t,notify:n})=>{const{onMount:i,ref:a}=le.P.useElWatcher();return le.P.useSubscriptionTo(a.pipe(N.cp((e=>Je.R(e,"scroll"))),we.b(n("scroll")))),f.createElement("div",{className:Qe.column,style:{flex:e}},f.createElement("div",{className:Qe.scrollView,ref:i},f.createElement($e,null,t.title),t.content))})),Xe=S.UI.Grid.make((({slots:e})=>f.createElement(U.F.div,{className:Qe.layout},e.summary,e.questions,e.links))),et=350,tt=307,nt=266;var it=n(26328),at=n(64015),ot=n(62337),st=n(14700),rt=n(28043),lt=n(99094),dt=n(23063),ct=n(93253);function mt(){return S.UI.Grid.make((({state:e,view:t,slots:n,notify:i})=>{const{ref:a,onMount:s}=le.P.useElWatcher(),r=f.useRef(new ye.xQ),l=f.useRef(u.h.create(!1));return f.useEffect((()=>{const e=t("item").pipe(dt.q(1)).subscribe((e=>i({kind:"show",item:e})()));return()=>e.unsubscribe()}),[]),le.P.useSubscriptionTo(r.current.pipe(xe.M(a),C.U((([e,t])=>(0,o.zG)(t,h.map((t=>{let n=0,i=0;const a=t.offsetParent;let o=t;for(;o&&o!==a;)n+=o.scrollTop,i+=o.scrollLeft,o=o.parentElement;return{item:e,top:t.offsetTop-n,left:t.offsetLeft+t.offsetWidth-i,width:t.offsetWidth,height:t.offsetHeight}}))))),N.oA,C.U((({item:e,top:t,left:n,width:a,height:o})=>i({kind:"openMenu",item:e,itemRect:ot.Wm.create({top:t,left:n,width:a,height:o})})())))),f.createElement(U.F.li,{...(0,ae.Sh)(ct.item,e.pipe(C.U((e=>e.item.pinned)),C.U((0,k.RN)(ct.pinned,void 0)))),mount:s,tabIndex:t("focusable").pipe(C.U((e=>e?0:-1))),onFocus:t("item").pipe(C.U((e=>()=>{requestAnimationFrame((()=>{i({kind:"focus",item:e})()}))}))),onBlur:t("item").pipe(C.U((e=>t=>{const n=t.currentTarget;requestAnimationFrame((()=>{var t,a;n.contains(document.activeElement)||n.contains((null===(a=null===(t=document.activeElement)||void 0===t?void 0:t.shadowRoot)||void 0===a?void 0:a.activeElement)||null)||i({kind:"blur",item:e})()}))}))),onKeyDown:e=>{var t,n;"ArrowDown"===e.key&&(null===(t=e.currentTarget)||void 0===t?void 0:t.nextElementSibling)instanceof HTMLElement?e.currentTarget.nextElementSibling.focus():"ArrowUp"===e.key&&(null===(n=e.currentTarget)||void 0===n?void 0:n.previousElementSibling)instanceof HTMLElement&&e.currentTarget.previousElementSibling.focus()},onMouseLeave:()=>{l.current.set(!1)},onMouseOver:()=>{l.current.set(!0)}},f.createElement("label",{className:ct.content},n.title,f.createElement(lt.f.Context.Provider,{value:{hovered:l.current}},n.item)),f.createElement(U.F.div,{className:ct.moreButton},e.pipe(C.U((e=>f.createElement(V.zx.Ghost,{title:A.expandedPanel.actionsButtonTooltip,tabIndex:e.focusable?0:-1,onClick:()=>r.current.next(e.item),ariaLabel:"Actions",name:"actions-button"},f.createElement(M.JO.EllipsisSmall,{className:ct.ellipsis})))))),n.menu,n.feedback)}))}function ht(e,t,n,i,a){return o=>{switch(o.kind){case"show":a(o.item);break;case"focus":t.set(i(o.item));break;case"blur":e.actions.next({kind:R.Kind.itemBlur});break;case"openMenu":e.actions.next({kind:R.Kind.openItemMenu,itemId:i(o.item)}),n.set(h.some(o.itemRect)),t.set(i(o.item));break;default:(0,D.vE)(o)}}}function ut(e,t,n,i){return(n===e||null===n&&0===t)&&h.isNone(i)}var pt,gt=n(81336),bt=n(83078),ft=n(67465);function kt(){return S.UI.Node.make((({view:e,state:t,notify:n})=>{const{ref:i,onMount:a}=le.P.useElWatcher(),s=f.useRef(new ye.xQ);return le.P.useSubscriptionTo(s.current.pipe(xe.M(i),C.U((([e,t])=>(0,o.zG)(t,h.map(ce.UL.fromEl),h.map((t=>({...e,buttonRect:t})))))),N.oA,we.b((e=>n(e)())))),f.createElement(U.F.div,{mount:a,...(0,ae.Sh)(ft.menu,e("item").pipe(C.U((e=>e.pinned?ft.pinned:void 0)))),style:e("bottomRightCorner").pipe(C.U(h.fold((()=>({display:"none"})),(e=>({...e,display:"flex"})))))},t.pipe(C.U((({item:e,clipboardSupported:t,feedbackDialogActive:i,feedbackSupported:a})=>{const r=e.rating===gt.DE.liked||(0,o.zG)(i,bt.FX("like")),l=e.rating===gt.DE.disliked||(0,o.zG)(i,bt.FX("dislike"));return f.createElement(f.Fragment,null,t?f.createElement(V.zx.Flat,{name:"copy-button",title:A.expandedPanel.itemMenu.copyTooltip,ariaLabel:A.expandedPanel.itemMenu.copyTooltip,className:ft.button,onClick:n({kind:"copy",item:e})},f.createElement(M.JO.Copy,null)):null,f.createElement(V.zx.Flat,{name:"pin-button",title:e.pinned?A.expandedPanel.itemMenu.unpinTooltip:A.expandedPanel.itemMenu.pinTooltip,ariaLabel:e.pinned?A.expandedPanel.itemMenu.unpinTooltip:A.expandedPanel.itemMenu.pinTooltip,className:ft.button,onClick:n({kind:"pin",item:e,pinned:!e.pinned}),active:e.pinned},f.createElement(M.JO.Pin,null)),f.createElement(V.zx.Flat,{name:"remove-button",title:A.expandedPanel.itemMenu.dismissTooltip,ariaLabel:A.expandedPanel.itemMenu.dismissTooltip,className:ft.button,onClick:n({kind:"dismiss",item:e})},f.createElement(M.JO.Ignore,null)),a?f.createElement(f.Fragment,null,f.createElement("div",{className:ft.separator}),h.isSome(i)||void 0===e.rating?f.createElement(f.Fragment,null,f.createElement(V.zx.Flat,{name:"dislike-button",title:A.expandedPanel.itemMenu.dislikeTooltip,ariaLabel:A.expandedPanel.itemMenu.dislikeTooltip,className:ft.button,onClick:()=>s.current.next({kind:"dislike",item:e}),active:l},l?f.createElement(pt.ThumbsDownFilled,null):f.createElement(pt.ThumbsDown,null)),f.createElement(V.zx.Flat,{name:"like-button",title:A.expandedPanel.itemMenu.likeTooltip,ariaLabel:A.expandedPanel.itemMenu.likeTooltip,className:ft.button,onClick:()=>s.current.next({kind:"like",item:e}),active:r},r?f.createElement(pt.ThumbsUpFilled,null):f.createElement(pt.ThumbsUp,null))):r?f.createElement(pt.ThumbsUpFilled,{className:ft.inactiveIcon}):l?f.createElement(pt.ThumbsDownFilled,{className:ft.inactiveIcon}):null):null)}))))}))}function vt(e,t={dialogSide:"top",alignment:"right"}){return n=>{switch(n.kind){case"copy":e.copy(n.item);break;case"dismiss":e.dismiss(n.item);break;case"pin":e.pin(n.item,n.pinned);break;case"like":e.like(n.item,{sourceRect:n.buttonRect,...t});break;case"dislike":e.dislike(n.item,{sourceRect:n.buttonRect,...t});break;default:(0,D.vE)(n)}}}function It(e,t,n,i){return h.toNullable(t)===e||(0,o.zG)(n,h.exists(i(e)))}!function(e){e.ThumbsDown=({className:e,width:t=18})=>f.createElement(M.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.94506 1.49087L3.94129 1.49999L1.22638 7.89292C1.06797 8.31105 1.03966 8.85929 1.01631 9.57841L1.01618 9.58249C1.01167 9.72126 1.00697 9.8662 1.00031 10.0091C1.00591 10.1675 1.08822 10.3603 1.28344 10.5353C1.48809 10.7188 1.74942 10.8182 1.97538 10.8182H8.88923L7.78363 16.1831C7.74404 16.3671 7.78727 16.6111 7.90957 16.807C7.92806 16.8367 7.94592 16.8618 7.96283 16.883C7.97026 16.8765 7.97776 16.87 7.98532 16.8633C8.08412 16.7763 8.18009 16.6875 8.25236 16.6196C8.28819 16.5859 8.31747 16.558 8.33751 16.5387L8.36015 16.5169L8.36114 16.516L13.3603 11.4772C13.5028 11.3373 13.5926 11.1398 13.5926 10.9091V1.81818C13.5926 1.57101 13.483 1.34726 13.3061 1.1944C13.1632 1.07085 12.9836 1 12.7901 1H4.67906C4.66798 1 4.6565 1.00023 4.64528 1.00068M9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273ZM4.64528 1.00068C4.56232 1.00405 4.48416 1.01971 4.41203 1.04526C4.22152 1.11276 4.06246 1.25304 3.97014 1.43608C3.96113 1.45395 3.95276 1.47222 3.94506 1.49087M17.3951 1V9.90909H19V1H17.3951ZM16.3951 0.75C16.3951 0.335787 16.7308 0 17.1451 0H19.25C19.6642 0 20 0.335786 20 0.75V10.1591C20 10.5733 19.6642 10.9091 19.25 10.9091H17.1451C16.7308 10.9091 16.3951 10.5733 16.3951 10.1591V0.75Z",stroke:"none"})),e.ThumbsUp=({className:e,width:t=18})=>f.createElement(M.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0549 16.5091L16.0587 16.5L18.7736 10.1071C18.932 9.68895 18.9603 9.14071 18.9837 8.42159L18.9838 8.41751C18.9883 8.27874 18.993 8.1338 18.9997 7.99095C18.9941 7.83251 18.9118 7.63967 18.7166 7.46467C18.5119 7.28121 18.2506 7.18182 18.0246 7.18182L11.1108 7.18182L12.2164 1.8169C12.256 1.63292 12.2127 1.38894 12.0904 1.19295C12.0719 1.16332 12.0541 1.13822 12.0372 1.11697C12.0297 1.12346 12.0222 1.13004 12.0147 1.13671C11.9159 1.22375 11.8199 1.31246 11.7476 1.38043C11.7118 1.41412 11.6825 1.44205 11.6625 1.46127L11.6399 1.48305L11.6389 1.48402L6.63965 6.52285C6.49717 6.66269 6.40741 6.86024 6.40741 7.09091L6.40741 16.1818C6.40741 16.429 6.51702 16.6527 6.69386 16.8056C6.83679 16.9291 7.01641 17 7.20987 17L15.3209 17C15.332 17 15.3435 16.9998 15.3547 16.9993M10.9359 0.772727C10.9359 0.772727 11.7297 -7.23009e-07 11.8963 -7.08451e-07C12.7452 -6.34238e-07 13.3949 1.09375 13.194 2.02727L12.3379 6.18182L18.0246 6.18182C19.016 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9832 8.45404C19.961 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909C16.9619 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3577 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20987 18C6.76441 18 6.35535 17.8348 6.03991 17.5621C5.65335 17.228 5.40741 16.7325 5.40741 16.1818L5.40741 7.09091C5.40741 6.59091 5.60568 6.13636 5.93913 5.80909L10.9359 0.772727ZM15.3547 16.9993C15.4377 16.996 15.5158 16.9803 15.588 16.9547C15.7785 16.8872 15.9375 16.747 16.0299 16.5639C16.0389 16.5461 16.0472 16.5278 16.0549 16.5091M2.60495 17L2.60495 8.09091L1.00003 8.09091L1.00003 17L2.60495 17ZM3.60495 17.25C3.60495 17.6642 3.26916 18 2.85495 18L0.750031 18C0.335817 18 3.05469e-05 17.6642 3.05831e-05 17.25L3.14057e-05 7.84091C3.14419e-05 7.4267 0.335818 7.09091 0.750031 7.09091L2.85495 7.09091C3.26916 7.09091 3.60495 7.4267 3.60495 7.84091L3.60495 17.25Z",stroke:"none"})),e.ThumbsDownFilled=({className:e,width:t=18})=>f.createElement(M.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909Z",stroke:"none"}),f.createElement("path",{d:"M17.1451 0C16.7308 0 16.3951 0.335787 16.3951 0.75V10.1591C16.3951 10.5733 16.7308 10.9091 17.1451 10.9091H19.25C19.6642 10.9091 20 10.5733 20 10.1591V0.75C20 0.335786 19.6642 0 19.25 0H17.1451Z",stroke:"none"})),e.ThumbsUpFilled=({className:e,width:t=18})=>f.createElement(M.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},f.createElement("path",{d:"M16.9792 16.8909C16.9618 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3576 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20984 18C6.76438 18 6.35532 17.8348 6.03988 17.5621C5.65332 17.228 5.40738 16.7325 5.40738 16.1818L5.40738 7.09091C5.40738 6.59091 5.60565 6.13636 5.9391 5.80909L10.9359 0.772727C10.9359 0.772727 11.7297 0 11.8962 0C12.7451 0 13.3949 1.09375 13.194 2.02727L12.3378 6.18182L18.0246 6.18182C19.0159 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9831 8.45404C19.9609 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909Z",stroke:"none"}),f.createElement("path",{d:"M2.85492 18C3.26913 18 3.60492 17.6642 3.60492 17.25L3.60492 7.84091C3.60492 7.4267 3.26913 7.09091 2.85492 7.09091L0.750001 7.09091C0.335788 7.09091 0 7.42669 0 7.84091V17.25C0 17.6642 0.335787 18 0.75 18H2.85492Z",stroke:"none"}))}(pt||(pt={}));var _t=n(50243);const yt=({children:e})=>f.createElement(U.F.ul,{className:_t.list},e);var xt=n(39335),wt=n(38459);const Et=S.UI.Node.make((({state:e,notify:t})=>f.createElement(U.F.Fragment,null,e.pipe(C.U((({item:e,focusable:n})=>f.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer",key:xt.createHash("superfasthash").hash(`${e.url}${e.mimeType?e.mimeType:""}`),className:wt.linkWrapper,tabIndex:n?0:-1,onClick:t({item:e})},f.createElement("div",{className:wt.linkAndIcon},function(e,t){switch(e){case"hyperlink":return f.createElement(M.JO.Formatting.Link,{className:wt.icon});case"email":return f.createElement(M.JO.Attachments.Email,{className:wt.icon});case"attachment":switch(t){case"text/plain":case"text/html":case"application/msword":case"application/vnd.apple.pages":return f.createElement(M.JO.Attachments.Document,{className:wt.icon});case"application/vnd.ms-excel":case"application/vnd.apple.numbers":return f.createElement(M.JO.Attachments.Spreadsheet,{className:wt.icon});case"application/vnd.ms-powerpoint":case"application/vnd.apple.keynote":return f.createElement(M.JO.Attachments.Presentation,{className:wt.icon});case"application/pdf":return f.createElement(M.JO.Attachments.Pdf,{className:wt.icon});case"application/zip":case"application/vnd.rar":return f.createElement(M.JO.Attachments.Archive,{className:wt.icon});default:return t?/^image\/.+/.test(t)?f.createElement(M.JO.Attachments.Image,{className:wt.icon}):/^video\/.+/.test(t)?f.createElement(M.JO.Attachments.Video,{className:wt.icon}):f.createElement(M.JO.Attachments.Attachment,{className:wt.icon}):f.createElement(M.JO.Formatting.Link,{className:wt.icon})}default:return f.createElement(M.JO.Formatting.Link,{className:wt.icon})}}(e.type,e.mimeType),f.createElement("span",{className:wt.link},"hyperlink"===e.type?""!==e.name?e.name:e.url:e.name)))))))));var Ct=n(69566);const Ut=({title:e})=>f.createElement(U.F.div,{className:Ct.title},e),St=mt(),Nt=kt(),Tt=S.UI.Knot.make(St,{item:Et,title:S.UI.Union.asOption(S.UI.Node.make((({state:e})=>f.createElement(Ut,{title:e})))),menu:Nt,feedback:S.UI.Node.empty}),Mt=S.UI.List.make(at.Bk,Tt),Ft=S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(yt,null,e.links))),Mt),At=e=>t=>e.actions.next({kind:R.Kind.linkClick,item:t.item});function Lt(e,t,n){const i=u.h.create(null),a=u.h.create(h.none),s=e.state.pipe(H.h((0,k.Kg)(x,y)),C.U((e=>e.activeMenuItemId)));return(0,st.d)(((r,l)=>{const d=t.pipe(C.U((0,o.ls)(at.hX((e=>e.url===r)),at.YM)),N.oA),c=ie.aj([e.state.view("feedbackDialog"),d,i,s,a]).pipe(C.U((([e,t,n,i,a])=>({item:t,itemRect:a,menuActive:It(r,i,h.none,(()=>()=>!1)),focusable:ut(r,l,n,e)}))),rt.x());return S.Z.composeKnot({root:S.Z.fromSideEffect(ht(e,i,a,(e=>e.url),(t=>e.actions.next({kind:R.Kind.itemMounted,itemType:"linkItem",item:t}))),c.pipe(C.U((({item:e,focusable:t})=>({item:e,focusable:t}))))),item:S.Z.fromSideEffect(At(e),c.pipe(C.U((({item:e,focusable:t})=>({item:e,focusable:t}))))),title:()=>d.pipe(C.U(n)),menu:S.Z.fromSideEffect(vt({pin:(t,n)=>e.actions.next({kind:R.Kind.pin,pinned:n,itemType:"linkItem",item:t}),copy:t=>e.actions.next({kind:R.Kind.copy,itemType:"linkItem",item:t}),dismiss:t=>e.actions.next({kind:R.Kind.dismiss,itemType:"linkItem",item:t}),like:o.Q1,dislike:o.Q1}),c.pipe(C.U((t=>({item:t.item,bottomRightCorner:t.menuActive?(0,o.zG)(t.itemRect,h.map(ot.Wm.topLeftPoint)):h.none,clipboardSupported:e.isClipboardSupported,feedbackSupported:!1,feedbackDialogActive:h.none}))))),feedback:()=>T.of(null)})}),(()=>t.pipe(C.U(at.UI(c.ei("url"))))),at.Bk)}var Gt=n(47397);const Ot=({title:e,children:t})=>f.createElement("div",{className:Gt.empty},f.createElement(U.F.div,{className:Gt.title},e),f.createElement(U.F.div,{className:Gt.body},t));var Pt=n(45587);const Kt={lineAndAvatar:Pt.lineAndAvatar,lineAndCheckbox:Pt.lineAndCheckbox,lineOnly:Pt.lineOnly},zt=({lineCount:e,type:t,className:n})=>f.createElement("div",{className:n},[...Array(e).keys()].map((e=>f.createElement("div",{...(0,ae.Sh)(Pt.itemLoading,Kt[t]),key:e},f.createElement("div",{className:Pt.rect}),f.createElement("div",{className:Pt.line})))));var Rt=n(25756);const Bt=S.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=le.P.useElWatcher(),a=f.useRef(new ye.xQ);return le.P.useSubscriptionTo(a.current.pipe(xe.M(n),C.U((([e,t])=>h.map(ce.UL.fromEl)(t))),N.oA,we.b((e=>t({kind:"openFeedback",buttonRect:e})())))),f.createElement(U.F.Fragment,null,e.pipe(C.U((({isSupported:e,CTA:t,body:n})=>e?f.createElement(f.Fragment,null,n,f.createElement(V.zx.Ghost,{className:Rt.emptyCTAButton,mount:i,onClick:()=>a.current.next(),name:"open-feedback-button"},t)):null))))}));function Ht(e,t,n,i={dialogSide:"top",alignment:"left"}){return S.Z.fromSideEffect((t=>{if("openFeedback"===t.kind)e.actions.next({kind:R.Kind.openFeedback,source:{kind:n},position:{sourceRect:t.buttonRect,...i}});else(0,D.vE)(t.kind)}),{isSupported:e.isSubmitFeedbackDialogSupported,...t})}const Dt=S.UI.Grid.make((({slots:e})=>f.createElement(U.F.Fragment,null,e.button,e.dialog))),Vt=S.UI.Knot.make(Dt,{button:Bt,dialog:ve});function Zt(e,t,n,i){return S.Z.composeKnot({button:Ht(e,t,n,i),dialog:_e(e,(e=>e.source.kind===n))})}const jt=S.UI.Node.make((({view:e,notify:t})=>f.createElement(Ot,{title:e("title")},e("body"),f.createElement(V.zx.Ghost,{className:Rt.emptyCTAButton,onClick:t("show-anyway"),name:"show-anyway-button"},e("CTA"))))),qt=S.UI.Grid.make((({view:e,slots:t})=>f.createElement(f.Fragment,null,f.createElement("div",{className:Rt.warningGroup},f.createElement(M.JO.NotificationWarning,{width:16,className:Rt.warningIcon}),f.createElement(U.F.Fragment,null,e("title"))),f.createElement(U.F.Fragment,null,t.content)))),Wt=S.UI.Union.make("viewState",{showContent:S.UI.Group.make({content:Ft}),hideFilteredMessageContent:jt,showFilteredMessageContent:S.UI.Knot.make(qt,{content:Ft})}),Jt=S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(Ot,{title:A.expandedPanel.threadView.links.empty.title},e.button))),Vt),Qt=S.UI.Union.make("_tag",{None:Jt,Some:S.UI.Group.make({value:Wt})}),$t=S.UI.Node.make((()=>f.createElement(zt,{type:"lineAndAvatar",lineCount:2}))),Yt=S.UI.Union.make("type",{InProgress:$t,Fatal:Jt,Error:Jt,Success:Qt});function Xt(e){const t=e.state.pipe(H.h(y),C.U((e=>e.links)),H.h(h.isSome),C.U((e=>e.value))),n=t.pipe(C.U(c.ei("data")),H.h(m.d6),C.U((e=>e.value))),i=()=>Zt(e,A.expandedPanel.threadView.links.empty,"emptyLinksViewButton",{dialogSide:"top",alignment:"right"});return S.Z.composeUnion({InProgress:()=>T.of(null),Error:i(),Fatal:i(),Success:S.Z.composeUnion({None:i(),Some:S.Z.composeKnot({value:S.Z.composeUnion({showContent:S.Z.composeKnot({content:Lt(e,n,(()=>h.none))}),hideFilteredMessageContent:S.Z.fromSideEffect((t=>e.actions.next({kind:R.Kind.showFilteredContent,column:"links"})),A.expandedPanel.threadView.links.filteredHidden),showFilteredMessageContent:S.Z.composeKnot({root:()=>T.of(A.expandedPanel.threadView.links.filteredShown),content:Lt(e,n,(()=>h.none))})},(()=>t.pipe(C.U((({viewState:e})=>({viewState:e}))))))})},(()=>(0,o.zG)(n,C.U(it.nI))))},(()=>t.pipe(C.U((e=>({type:e.data.type}))))))}var en,tn;!function(e){function t(e){return"itemPanelMenu"===e.kind}e.isCollapsedPanelButton=function(e){return"collapsedPanelButton"===e.kind},e.isExpandedPanelHeaderButton=function(e){return"expandedPanelHeaderButton"===e.kind},e.isReaderItemMenu=t,e.isReaderSummaryItemMenu=function(e){return t(e)&&"summaryItem"===e.itemType},e.isReaderQuestionItemMenu=function(e){return t(e)&&"followUpItem"===e.itemType}}(en||(en={})),function(e){function t(e){return en.isReaderItemMenu(e.source)}e.isReaderSummaryItemMenu=function(e){return t(e)&&en.isReaderSummaryItemMenu(e.source)},e.isReaderQuestionItemMenu=function(e){return t(e)&&en.isReaderQuestionItemMenu(e.source)}}(tn||(tn={}));var nn=n(35115);const an=S.UI.Knot.make(se(A.tellsUsMoreFeedbackDialog),{title:S.UI.Node.make((()=>f.createElement("h1",{className:nn.title},A.tellsUsMoreFeedbackDialog.title))),rating:S.UI.Node.empty,description:S.UI.Node.make((()=>f.createElement("p",{className:nn.description},A.tellsUsMoreFeedbackDialog.description)))}),on=S.UI.Knot.make(ue,{content:an}),sn=S.UI.Union.asOption(on);function rn(e,t){return S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:pe(e),content:S.Z.composeKnot({root:re(e,h.none),title:()=>T.of(null),rating:()=>T.of(null),description:()=>T.of(null)})})}),None:()=>T.of(null)},(()=>e.state.pipe(C.U((0,o.ls)(c.ei("feedbackDialog"),h.filter(t))))))}var ln=n(31944),dn=n(11071);const cn=S.UI.Node.make((({state:e,notify:t})=>f.createElement(U.F.Fragment,null,e.pipe(C.U((({item:e,focusable:n})=>f.createElement(ln.J,{checked:e.checked,labelId:`question-item-${e.itemId}`,className:dn.checkboxWrapper,checkboxClassName:dn.checkbox,labelClassName:dn.label,onChange:n=>t({checked:n,item:e})(),tabIndex:n?0:-1},f.createElement("div",{...(0,ae.Sh)(e.checked?dn.textChecked:void 0,dn.itemText)},e.text)))))))),mn=mt(),hn=kt(),un=S.UI.Knot.make(mn,{item:cn,title:S.UI.Union.asOption(S.UI.Node.make((({state:e})=>f.createElement(Ut,{title:e})))),menu:hn,feedback:sn}),pn=(S.UI.List.make(at.Bk,un),S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(yt,null,e.list))),S.UI.List.make(at.Bk,un))),gn=e=>t=>e.actions.next({kind:R.Kind.check,item:t.item,checked:t.checked}),bn=e=>t=>tn.isReaderQuestionItemMenu(t)&&t.source.item.itemId===e;function fn(e,t,n){const i=u.h.create(null),a=u.h.create(h.none),s=e.state.pipe(H.h((0,k.Kg)(x,y)),C.U((e=>e.activeMenuItemId)));return(0,st.d)(((r,l)=>{const d=t.pipe(C.U((0,o.ls)(at.hX((e=>e.itemId===r)),at.YM)),N.oA),c=ie.aj([e.state.view("feedbackDialog"),d,i,s,a]).pipe(C.U((([e,t,n,i,a])=>({item:t,itemRect:a,menuActive:It(r,i,e,bn),feedbackDialogActive:(0,o.zG)(e,h.filter(bn(r)),h.map((e=>e.source.action))),focusable:ut(r,l,n,e)}))),rt.x());return S.Z.composeKnot({root:S.Z.fromSideEffect(ht(e,i,a,(e=>e.itemId),(t=>e.actions.next({kind:R.Kind.itemMounted,itemType:"followUpItem",item:t}))),c.pipe(C.U((({item:e,focusable:t})=>({item:e,focusable:t}))))),item:S.Z.fromSideEffect(gn(e),c.pipe(C.U((({item:e,focusable:t})=>({item:e,focusable:t}))))),title:()=>d.pipe(C.U(n)),menu:S.Z.fromSideEffect(vt({pin:(t,n)=>e.actions.next({kind:R.Kind.pin,pinned:n,itemType:"followUpItem",item:t}),copy:t=>e.actions.next({kind:R.Kind.copy,itemType:"followUpItem",item:t}),dismiss:t=>e.actions.next({kind:R.Kind.dismiss,itemType:"followUpItem",item:t}),like:(t,n)=>e.actions.next({kind:R.Kind.like,itemType:"followUpItem",item:t,position:n}),dislike:(t,n)=>e.actions.next({kind:R.Kind.dislike,itemType:"followUpItem",item:t,position:n})}),c.pipe(C.U((t=>({item:t.item,bottomRightCorner:t.menuActive?(0,o.zG)(t.itemRect,h.map(ot.Wm.topLeftPoint)):h.none,clipboardSupported:e.isClipboardSupported,feedbackSupported:e.isSubmitFeedbackDialogSupported,feedbackDialogActive:t.feedbackDialogActive}))))),feedback:rn(e,bn(r))})}),(()=>t.pipe(C.U(at.UI(c.ei("itemId"))))),at.Bk)}const kn=S.UI.Union.make("viewState",{showContent:S.UI.Group.make({content:pn}),hideFilteredMessageContent:jt,showFilteredMessageContent:S.UI.Knot.make(qt,{content:pn})}),vn=S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(Ot,{title:A.expandedPanel.threadView.followUps.empty.title},e.button))),Vt),In=S.UI.Union.make("_tag",{None:vn,Some:S.UI.Group.make({value:kn})}),_n=S.UI.Node.make((()=>f.createElement(zt,{type:"lineAndCheckbox",lineCount:2}))),yn=S.UI.Union.make("type",{InProgress:_n,Error:vn,Fatal:vn,Success:In});function xn(e){const t=e.state.pipe(H.h(y),C.U((e=>e.questions)),H.h(h.isSome),C.U((e=>e.value))),n=t.pipe(C.U(c.ei("data")),H.h(m.d6),C.U((e=>e.value))),i=()=>Zt(e,A.expandedPanel.threadView.followUps.empty,"emptyFollowUpsViewButton");return S.Z.composeUnion({InProgress:()=>T.of(null),Error:i(),Fatal:i(),Success:S.Z.composeUnion({None:i(),Some:S.Z.composeKnot({value:S.Z.composeUnion({showContent:S.Z.composeKnot({content:fn(e,n,(()=>h.none))}),hideFilteredMessageContent:S.Z.fromSideEffect((t=>e.actions.next({kind:R.Kind.showFilteredContent,column:"followUps"})),A.expandedPanel.threadView.followUps.filteredHidden),showFilteredMessageContent:S.Z.composeKnot({root:()=>T.of(A.expandedPanel.threadView.followUps.filteredShown),content:fn(e,n,(()=>h.none))})},(()=>t.pipe(C.U((({viewState:e})=>({viewState:e}))))))})},(()=>(0,o.zG)(n,C.U(it.nI))))},(()=>t.pipe(C.U((e=>({type:e.data.type}))))))}var wn=n(83581);const En=mt(),Cn=kt(),Un=S.UI.Knot.make(En,{item:S.UI.Node.make((({state:e})=>f.createElement(U.F.div,{className:wn.itemText},e))),title:S.UI.Union.asOption(S.UI.Node.make((({state:e})=>f.createElement(Ut,{title:e})))),menu:Cn,feedback:sn}),Sn=S.UI.List.make(at.Bk,Un),Nn=S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(yt,null,e.list))),Sn),Tn=e=>t=>tn.isReaderSummaryItemMenu(t)&&t.source.item.itemId===e;function Mn(e,t,n){const i=u.h.create(null),a=u.h.create(h.none),s=e.state.pipe(H.h((0,k.Kg)(x,y)),C.U((e=>e.activeMenuItemId)));return(0,st.d)(((r,l)=>{const d=t.pipe(C.U((0,o.ls)(at.hX((e=>e.itemId===r)),at.YM)),N.oA),c=ie.aj([e.state.view("feedbackDialog"),d,i,s,a]).pipe(C.U((([e,t,n,i,a])=>({item:t,itemRect:a,menuActive:It(r,i,e,Tn),feedbackDialogActive:(0,o.zG)(e,h.filter(Tn(r)),h.map((e=>e.source.action))),focusable:ut(r,l,n,e)}))),rt.x());return S.Z.composeKnot({root:S.Z.fromSideEffect(ht(e,i,a,(e=>e.itemId),(t=>e.actions.next({kind:R.Kind.itemMounted,itemType:"summaryItem",item:t}))),c.pipe(C.U((({item:e,focusable:t})=>({item:e,focusable:t}))))),item:()=>d.pipe(C.U((e=>e.text))),title:()=>d.pipe(C.U(n)),menu:S.Z.fromSideEffect(vt({pin:(t,n)=>e.actions.next({kind:R.Kind.pin,pinned:n,itemType:"summaryItem",item:t}),copy:t=>e.actions.next({kind:R.Kind.copy,itemType:"summaryItem",item:t}),dismiss:t=>e.actions.next({kind:R.Kind.dismiss,itemType:"summaryItem",item:t}),like:(t,n)=>e.actions.next({kind:R.Kind.like,itemType:"summaryItem",item:t,position:n}),dislike:(t,n)=>e.actions.next({kind:R.Kind.dislike,itemType:"summaryItem",item:t,position:n})},{dialogSide:"top",alignment:"left"}),c.pipe(C.U((t=>({item:t.item,bottomRightCorner:t.menuActive?(0,o.zG)(t.itemRect,h.map(ot.Wm.topLeftPoint)):h.none,clipboardSupported:e.isClipboardSupported,feedbackSupported:e.isSubmitFeedbackDialogSupported,feedbackDialogActive:t.feedbackDialogActive}))))),feedback:rn(e,Tn(r))})}),(()=>t.pipe(C.U(at.UI(c.ei("itemId"))))),at.Bk)}const Fn=S.UI.Union.make("viewState",{showContent:S.UI.Group.make({content:Nn}),hideFilteredMessageContent:jt,showFilteredMessageContent:S.UI.Knot.make(qt,{content:Nn})}),An=S.UI.Composite.make(S.UI.Grid.make((({slots:e})=>f.createElement(Ot,{title:A.expandedPanel.threadView.summaries.empty.title},e.button))),Vt),Ln=S.UI.Union.make("_tag",{None:An,Some:S.UI.Group.make({value:Fn})}),Gn=S.UI.Node.make((()=>f.createElement(zt,{className:Rt.loader,type:"lineOnly",lineCount:2}))),On=S.UI.Union.make("type",{InProgress:Gn,Error:An,Fatal:An,Success:Ln});function Pn(e){const t=e.state.pipe(H.h(y),C.U((e=>e.summary)),H.h(h.isSome),C.U((e=>e.value))),n=t.pipe(C.U(c.ei("data")),H.h(m.d6),C.U((e=>e.value))),i=()=>Zt(e,A.expandedPanel.threadView.summaries.empty,"emptySummaryViewButton",{dialogSide:"top",alignment:"left"});return S.Z.composeUnion({InProgress:()=>T.of(null),Error:i(),Fatal:i(),Success:S.Z.composeUnion({None:i(),Some:S.Z.composeKnot({value:S.Z.composeUnion({showContent:S.Z.composeKnot({content:Mn(e,n,(()=>h.none))}),hideFilteredMessageContent:S.Z.fromSideEffect((t=>e.actions.next({kind:R.Kind.showFilteredContent,column:"summary"})),A.expandedPanel.threadView.summaries.filteredHidden),showFilteredMessageContent:S.Z.composeKnot({root:()=>T.of(A.expandedPanel.threadView.summaries.filteredShown),content:Mn(e,n,(()=>h.none))})},(()=>t.pipe(C.U((({viewState:e})=>({viewState:e}))))))})},(()=>(0,o.zG)(n,C.U(it.nI))))},(()=>t.pipe(C.U((e=>({type:e.data.type}))))))}const Kn=S.UI.Knot.make(Ye(et),{content:On,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.threadView.summaries.title)))}),zn=S.UI.Knot.make(Ye(tt),{content:yn,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.threadView.followUps.title)))}),Rn=S.UI.Knot.make(Ye(nt),{content:Yt,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.threadView.links.title)))}),Bn=S.UI.Union.asOption(Kn),Hn=S.UI.Union.asOption(zn),Dn=S.UI.Union.asOption(Rn),Vn=S.UI.Knot.make(Xe,{summary:Bn,questions:Hn,links:Dn});function Zn(e){const t=e.state.pipe(H.h(y)),n=t=>e.actions.next({kind:R.Kind.columnScroll}),i=T.of(null);return S.Z.composeKnot({summary:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:Pn(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.summary))))),questions:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:xn(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.questions))))),links:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:Xt(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.links)))))})}var jn=n(37896);function qn(e){if("parsedDate"===e.kind){const t=new Date(e.timestamp);return`${jn.Rb[t.getMonth()]} ${t.getDate()}`}return e.date}var Wn=n(79579);const Jn=S.UI.Union.make("_tag",{None:S.UI.Node.make((({notify:e})=>f.createElement(Ot,{title:A.expandedPanel.pinnedView.links.empty.title},A.expandedPanel.pinnedView.links.empty.body,f.createElement(V.zx.Ghost,{onClick:e("showMessages"),name:"pinned-mentions-empty-cta",className:Wn.emptyCTAButton},A.expandedPanel.pinnedView.links.empty.CTA)))),Some:S.UI.Group.make({value:Ft})});function Qn(e){const t=e.state.pipe(H.h(x),C.U((e=>e.links)),H.h(h.isSome),C.U((e=>e.value)));return S.Z.composeUnion({None:S.Z.fromSideEffect((t=>{if("showMessages"===t)e.actions.next({kind:R.Kind.openMessageView,source:z.emptyPinnedLinks});else(0,D.vE)(t)}),null),Some:S.Z.composeKnot({value:Lt(e,t,(e=>(0,o.zG)(e.messagePinnedFrom,h.map((e=>{var t;return`From ${null!==(t=e.author.name)&&void 0!==t?t:e.author.email}, ${qn(e.date)}`})))))})},(()=>(0,o.zG)(t,C.U(it.nI))))}const $n=S.UI.Union.make("_tag",{None:S.UI.Node.make((({notify:e})=>f.createElement(Ot,{title:A.expandedPanel.pinnedView.followUps.empty.title},A.expandedPanel.pinnedView.followUps.empty.body,f.createElement(V.zx.Ghost,{onClick:e("showMessages"),name:"pinned-follow-ups-empty-cta",className:Wn.emptyCTAButton},A.expandedPanel.pinnedView.followUps.empty.CTA)))),Some:S.UI.Group.make({value:pn})});function Yn(e){const t=e.state.pipe(H.h(x),C.U((e=>e.questions)),H.h(h.isSome),C.U((e=>e.value)));return S.Z.composeUnion({None:S.Z.fromSideEffect((t=>{if("showMessages"===t)e.actions.next({kind:R.Kind.openMessageView,source:z.emptyPinnedFollowUps});else(0,D.vE)(t)}),null),Some:S.Z.composeKnot({value:fn(e,t,(e=>{var t;return h.some(`From ${null!==(t=e.message.author.name)&&void 0!==t?t:e.message.author.email}, ${qn(e.message.date)}`)}))})},(()=>(0,o.zG)(t,C.U(it.nI))))}const Xn=S.UI.Union.make("_tag",{None:S.UI.Node.make((({notify:e})=>f.createElement(Ot,{title:A.expandedPanel.pinnedView.summaries.empty.title},A.expandedPanel.pinnedView.summaries.empty.body,f.createElement(V.zx.Ghost,{onClick:e("showMessages"),name:"pinned-summary-empty-cta",className:Wn.emptyCTAButton},A.expandedPanel.pinnedView.summaries.empty.CTA)))),Some:S.UI.Group.make({value:Nn})});function ei(e){const t=e.state.pipe(H.h(x),C.U((e=>e.summaryItems)),H.h(h.isSome),C.U((e=>e.value)));return S.Z.composeUnion({None:S.Z.fromSideEffect((t=>{if("showMessages"===t)e.actions.next({kind:R.Kind.openMessageView,source:z.emptyPinnedSummaries});else(0,D.vE)(t)}),null),Some:S.Z.composeKnot({value:Mn(e,t,(e=>{var t;return h.some(`From ${null!==(t=e.message.author.name)&&void 0!==t?t:e.message.author.email}, ${qn(e.message.date)}`)}))})},(()=>(0,o.zG)(t,C.U(it.nI))))}const ti=S.UI.Knot.make(Ye(et),{content:Xn,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.pinnedView.summaries.title)))}),ni=S.UI.Knot.make(Ye(tt),{content:$n,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.pinnedView.followUps.title)))}),ii=S.UI.Knot.make(Ye(nt),{content:Jn,title:S.UI.Node.make((()=>f.createElement("span",null,A.expandedPanel.pinnedView.links.title)))}),ai=S.UI.Union.asOption(ti),oi=S.UI.Union.asOption(ni),si=S.UI.Union.asOption(ii),ri=S.UI.Knot.make(Xe,{summary:ai,questions:oi,links:si});function li(e){const t=e.state.pipe(H.h(x)),n=t=>e.actions.next({kind:R.Kind.columnScroll}),i=T.of(null);return S.Z.composeKnot({summary:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:ei(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.summaryItems))))),questions:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:Yn(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.questions))))),links:S.Z.composeUnion({Some:S.Z.composeKnot({value:S.Z.composeKnot({root:S.Z.fromSideEffect(n,i),content:Qn(e),title:()=>i})}),None:()=>i},(()=>t.pipe(C.U((e=>e.links)))))})}const di=S.UI.Union.make("kind",{messageView:Vn,pinnedView:ri});function ci(e){return S.Z.composeUnion({messageView:Zn(e),pinnedView:li(e)},(()=>e.state.pipe(H.h((0,k.Kg)(x,y)),C.U((e=>({kind:e.kind}))))))}var mi=n(37903),hi=n(89739);const ui=S.UI.Node.make((({view:e})=>f.createElement("div",{className:hi.activeMailInfo},f.createElement(U.F.span,{className:hi.date},e("date").pipe(C.U(qn))),f.createElement(U.F.span,{className:hi.author},e("author").pipe(C.U((e=>{var t;return null!==(t=e.name)&&void 0!==t?t:e.email}))))))),pi=S.UI.Node.make((()=>f.createElement("div",{className:hi.activeMailInfo},"Loading..."))),gi=S.UI.Union.make("type",{InProgress:pi,Success:ui,Fatal:S.UI.Node.make((()=>f.createElement("div",{className:hi.activeMailInfo}))),Error:S.UI.Node.make((()=>f.createElement("div",{className:hi.activeMailInfo})))});function bi(e){return S.Z.composeUnion({InProgress:()=>T.of(null),Success:()=>e.state.pipe(H.h(y),C.U((e=>e.header)),H.h(m.d6),C.U((e=>e.value))),Fatal:()=>T.of(null),Error:()=>T.of(null)},(()=>e.state.pipe(H.h(y),C.U((e=>e.header)))))}var fi=n(14692);const ki=S.UI.Knot.make(S.UI.Grid.make((({slots:e,state:t,notify:n})=>f.createElement(U.F.div,{className:fi.navigationFrame},f.createElement(U.F.div,{className:fi.buttonGroup},t.pipe(C.U((e=>f.createElement(f.Fragment,null,f.createElement(V.zx.Ghost,{onClick:n(L.first),name:"navigate-first",disabled:!e.canGoBack,title:e.canGoBack?A.expandedPanel.jumpFirstIconTooltip:void 0,ariaLabel:e.canGoBack?A.expandedPanel.jumpFirstIconTooltip:void 0,tabIndex:e.focusable?0:-1},f.createElement(M.JO.Exit,{...(0,ae.Sh)(fi.iconJump,fi.iconGoFirst)})),f.createElement(V.zx.Ghost,{onClick:n(L.left),name:"navigate-left",disabled:!e.canGoBack,title:e.canGoBack?A.expandedPanel.goLeftIconTooltip:void 0,ariaLabel:e.canGoBack?A.expandedPanel.goLeftIconTooltip:void 0,tabIndex:e.focusable?0:-1},f.createElement(M.JO.Arrow,{direction:M.n4.left,className:fi.icon}))))))),e.mailInfo,f.createElement(U.F.div,{className:fi.buttonGroup},t.pipe(C.U((e=>f.createElement(f.Fragment,null,f.createElement(V.zx.Ghost,{onClick:n(L.right),name:"navigate-right",disabled:!e.canGoForward,title:e.canGoForward?A.expandedPanel.goRightIconTooltip:void 0,ariaLabel:e.canGoForward?A.expandedPanel.goRightIconTooltip:void 0,tabIndex:e.focusable?0:-1},f.createElement(M.JO.Arrow,{direction:M.n4.right,className:fi.icon})),f.createElement(V.zx.Ghost,{onClick:n(L.last),name:"navigate-last",disabled:!e.canGoForward,title:e.canGoForward?A.expandedPanel.jumpLastIconTooltip:void 0,ariaLabel:e.canGoForward?A.expandedPanel.jumpLastIconTooltip:void 0,tabIndex:e.focusable?0:-1},f.createElement(M.JO.Exit,{className:fi.iconJump})))))))))),{mailInfo:gi});function vi(e){return S.Z.composeKnot({root:S.Z.fromSideEffect((t=>(0,o.zG)(e.getNextActiveMessageIndex(t),bt.bw((n=>e.actions.next({kind:R.Kind.threadViewNavigate,action:t,nextIndex:n}))))),e.state.pipe(H.h(y)).pipe(C.U((e=>({...e.navigation,focusable:h.isNone(e.feedbackDialog)}))))),mailInfo:bi(e)})}var Ii=n(16204);const _i=S.UI.Node.make((({state:e,notify:t})=>f.createElement(U.F.Fragment,null,e.pipe(C.U((({activeView:e,focusable:n})=>f.createElement(V.zx.Group,{sticky:!0,className:Ii.buttonGroup},f.createElement(V.zx.White,{name:"thread-view",onClick:t("messageView"),active:"messageView"===e,className:Ii.button,tabIndex:n?0:-1},A.expandedPanel.viewButton.thread),f.createElement(V.zx.White,{name:"pinned-view",onClick:t("pinnedView"),active:"pinnedView"===e,className:Ii.button,tabIndex:n?0:-1},A.expandedPanel.viewButton.pins))))))));function yi(e){return S.Z.fromSideEffect((t=>{switch(t){case"pinnedView":e.actions.next({kind:R.Kind.openPinnedView});break;case"messageView":e.actions.next({kind:R.Kind.openMessageView,source:z.messagesButton});break;default:(0,D.vE)(t)}}),e.state.pipe(H.h((0,k.Kg)(y,x)),C.U((e=>({activeView:e.kind,focusable:h.isNone(e.feedbackDialog)})))))}const xi=S.UI.Grid.make((({slots:e})=>f.createElement(U.F.div,{className:mi.header},e.viewButtons,e.frame))),wi=S.UI.Union.asOption(ki),Ei=S.UI.Union.asOption(_i),Ci=S.UI.Knot.make(xi,{viewButtons:Ei,frame:wi});function Ui(e){return S.Z.composeKnot({viewButtons:S.Z.composeUnion({None:()=>T.of(null),Some:S.Z.composeKnot({value:yi(e)})},(()=>e.state.pipe(C.U((e=>(0,k.Kg)(y,x)(e)?h.some(e):h.none))))),frame:S.Z.composeUnion({None:()=>T.of(null),Some:S.Z.composeKnot({value:vi(e)})},(()=>e.state.pipe(C.U((e=>y(e)?h.some(e):h.none)))))})}const Si=S.UI.Knot.make(ze,{header:Ci,toolbar:Ve,content:di});function Ni(e){return S.Z.composeKnot({root:Re(e),header:Ui(e),toolbar:S.Z.composeKnot({feedback:Ne(e,!1,(e=>"expandedPanelHeaderButton"===e.source.kind)),togglePanel:He(e),toggleInlineHighlights:Fe(e)}),content:ci(e)})}var Ti=n(86885),Mi=n(40349);const Fi=S.UI.Node.make((({state:e,notify:t})=>f.createElement("div",{className:Mi.controls},f.createElement("div",{className:Mi.onboardingButtonGroup},f.createElement(V.zx.Primary,{name:"try-it-out-button",onClick:t("optIn"),className:Mi.optInButton},A.onboarding.optInButton),f.createElement(V.zx.Flat,{name:"no-thanks-button",onClick:t("optOut"),className:Mi.optOutButton},A.onboarding.optOutButton)),f.createElement(U.F.div,{className:Mi.navigation},e.pipe(C.U((e=>f.createElement(f.Fragment,null,f.createElement(V.zx.Flat,{name:"left-button",onClick:t(G.left),disabled:v[0]===e,className:Mi.leftButton,title:A.onboarding.prevIconTooltip,ariaLabel:A.onboarding.prevIconTooltip},f.createElement(M.JO.Arrow,{direction:M.n4.left,width:12})),f.createElement(V.zx.Flat,{name:"right-button",onClick:t(G.right),disabled:v[v.length-1]===e,className:Mi.rightButton,title:A.onboarding.nextIconTooltip,ariaLabel:A.onboarding.nextIconTooltip},f.createElement(M.JO.Arrow,{direction:M.n4.right,width:12,className:Mi.arrowRight})),f.createElement("div",{className:Mi.stepOfN},A.onboarding.stepOfN(v.indexOf(e)+1))))))))));var Ai=n(86564);const Li=S.UI.Node.make((()=>{const e=A.onboarding.disclaimer.text.split(A.onboarding.disclaimer.linkPlaceholder);return f.createElement("div",{className:Ai.disclaimer},e.map(((e,t,n)=>f.createElement(f.Fragment,null,e,t<n.length-1?f.createElement("a",{target:"_blank",rel:"noreferrer",href:A.onboarding.disclaimer.link.URL},A.onboarding.disclaimer.link.text):null))))}));var Gi=n(57391);const Oi=S.UI.Node.make((({state:e})=>f.createElement(f.Fragment,null,f.createElement("link",{rel:"preload",as:"image",href:A.onboarding.overview.videoSrc}),f.createElement("link",{rel:"preload",as:"image",href:A.onboarding.coreUserJourney.videoSrc}),f.createElement("link",{rel:"preload",as:"image",href:A.onboarding.pinning.videoSrc}),f.createElement(U.F.Fragment,null,e.pipe(C.U((e=>f.createElement("img",{src:A.onboarding[e].videoSrc,key:e,className:Gi.illustration}))))))));var Pi=n(51869),Ki=n(19230);const zi=({title:e,children:t})=>f.createElement(f.Fragment,null,f.createElement("div",{className:Ki.title},e),f.createElement("div",{className:Ki.body},t)),Ri=({features:e,browser:t})=>{const n=e=>f.createElement(f.Fragment,null,e,f.createElement(Le.v,{browser:t,title:f.createElement("a",{href:A.onboarding.betaTermsUrl,target:"_blank",rel:"noreferrer"},"BETA")}));return e.has("followUps")&&e.has("links")?f.createElement(zi,{title:n(A.onboarding.overview.phase2.title)},A.onboarding.overview.phase2.body):e.has("followUps")?f.createElement(zi,{title:n(A.onboarding.overview.phase1.title)},A.onboarding.overview.phase1.body):f.createElement(zi,{title:n(A.onboarding.overview.phase0.title)},A.onboarding.overview.phase0.body)},Bi=()=>f.createElement(zi,{title:A.onboarding.coreUserJourney.title},A.onboarding.coreUserJourney.body),Hi=()=>f.createElement(zi,{title:A.onboarding.pinning.title},A.onboarding.pinning.body),Di=S.UI.Node.make((({state:e})=>f.createElement(U.F.Fragment,null,e.pipe(C.U((e=>{switch(e.step){case b.overview:return f.createElement(Ri,{key:"step-overview",features:e.features,browser:e.browser});case b.coreUserJourney:return f.createElement(Bi,{key:"step-core-user-journey"});case b.pinning:return f.createElement(Hi,{key:"step-pinning"});default:(0,D.vE)(e.step)}})))))),Vi=({onShow:e,children:t})=>(le.P.useEffectOnDidMount(e),f.createElement("div",{className:Pi.onboarding},t)),Zi=S.UI.Grid.make((({slots:e,notify:t})=>f.createElement(Vi,{onShow:t("panelMounted")},f.createElement(U.F.div,null,e.illustrations),f.createElement(ne.K,{size:22.4,className:Pi.logo}),f.createElement("div",{className:Pi.content,"data-grammarly-part":"reader-onboarding-content"},f.createElement("div",{className:Pi.badge},A.onboarding.badge),f.createElement(U.F.div,{className:Pi.steps},e.steps),f.createElement(U.F.div,null,e.controls),f.createElement(U.F.div,null,e.disclaimer))))),ji=S.UI.Knot.make(Zi,{steps:Di,illustrations:Oi,controls:Fi,disclaimer:Li});function qi(e){return S.Z.fromSideEffect((t=>{const n=t.action;switch(n){case"optIn":e.actions.next({kind:R.Kind.optIn});break;case"optOut":e.actions.next({kind:R.Kind.optOut});break;case G.left:case G.right:e.actions.next({kind:R.Kind.onboardingViewNavigate,action:n});break;case"panelMounted":e.actions.next({kind:R.Kind.panelMounted,subject:O.onboardingPanel});break;default:(0,D.vE)(n)}}),e.state.pipe(H.h(w),C.U((t=>({steps:{step:v[t.step],features:t.features,browser:e.browser},illustrations:v[t.step],controls:v[t.step]})))))}var Wi=n(35300);const Ji=S.UI.Grid.make((({slots:e})=>f.createElement("div",{className:Wi.onboarding,"data-grammarly-part":"reader-onboarding"},f.createElement(U.F.Fragment,null,e.content),f.createElement(U.F.div,{className:Wi.toolbar},e.toolbar)))),Qi=S.UI.Knot.make(Ji,{content:ji,toolbar:Be});function $i(e){return S.Z.composeKnot({toolbar:He(e),content:qi(e)})}const Yi=S.UI.Union.make("kind",{collapsed:qe,expanded:Si,onboarding:Qi}),Xi=S.UI.Knot.make(S.UI.Grid.make((({slots:e})=>f.createElement(U.F.div,{className:Ti.panelWrapper,"data-grammarly-part":"reader-panel"},e.content,e.notification))),{content:Yi,notification:$});var ea,ta=n(86133),na=n(77821);!function(e){const t=f.createElement("svg",{viewBox:"0 0 40 48",fill:"none",className:na["highlightsOnboarding-icon"]},f.createElement("g",null,f.createElement("path",{d:"M28.6883 4.0469C29.4694 3.26586 30.7357 3.26586 31.5168 4.0469L38.7017 11.2318C39.4827 12.0129 39.4827 13.2792 38.7017 14.0602L20.2171 32.5447L10.2038 22.5314L28.6883 4.0469Z",fill:"#79A8F2",stroke:"#0E101A"}),f.createElement("path",{d:"M8.49338 24.2418C8.19961 24.5356 8.00462 24.9136 7.93548 25.3232L6.80716 32.0092L10.7387 35.9407L17.4252 34.813C17.8349 34.7439 18.213 34.5489 18.5068 34.2551L20.9242 31.8377L10.9108 21.8244L8.49338 24.2418Z",fill:"#4A6EE0",stroke:"#0E101A",strokeLinejoin:"round"}),f.createElement("path",{d:"M6.80713 32.009L10.7387 35.9406L8.59296 38.0863L1.08523 37.7309L6.80713 32.009Z",fill:"#79A8F2",stroke:"#0E101A",strokeLinejoin:"round"}),f.createElement("path",{d:"M39.3246 30.9133C39.3246 36.1382 35.0939 40.3268 29.9123 40.3268C24.6867 40.3268 20.5 36.1397 20.5 30.9133C20.5 25.687 24.6867 21.4999 29.9123 21.4999C35.1379 21.4999 39.3246 25.687 39.3246 30.9133Z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),f.createElement("path",{d:"M25.2656 31.6833L28.2955 34.6904L34.7437 28.3717",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),f.createElement("path",{d:"M8 3L9.35045 6.64955L13 8L9.35045 9.35045L8 13L6.64955 9.35045L3 8L6.64955 6.64955L8 3Z",fill:"white"}),f.createElement("path",{d:"M18.5 40L19.4453 42.5547L22 43.5L19.4453 44.4453L18.5 47L17.5547 44.4453L15 43.5L17.5547 42.5547L18.5 40Z",fill:"white"})));function n(e){return S.Z.fromSideEffect((({action:t})=>"next"===t?e.actions.next({kind:R.Kind.setInlineHighlightsOnboardingStep,step:"highlightsSwitch"}):"close"===t?e.actions.next({kind:R.Kind.seenInlineHighlightsOnboarding}):(0,D.vE)(t)),void 0)}function i(e){return S.Z.fromSideEffect((({action:t})=>"next"===t?e.actions.next({kind:R.Kind.setInlineHighlightsOnboardingStep,step:"panelSwitch"}):"close"===t?e.actions.next({kind:R.Kind.seenInlineHighlightsOnboarding}):(0,D.vE)(t)),void 0)}function a(e){return S.Z.fromSideEffect((t=>"inlineHighlightsOnboardingAction"===t.kind?e.actions.next({kind:R.Kind.seenInlineHighlightsOnboarding}):(0,D.vE)(t.kind)),void 0)}function o(e){return S.Z.composeUnion({highlight:n(e),highlightsSwitch:i(e),panelSwitch:a(e)},(()=>e.state.pipe(C.U((({step:e})=>e)),H.h(h.isSome),C.U(bt.MH))))}function s(e){return S.Z.composeKnot({root:()=>e.state.pipe(H.h((e=>h.isSome(e.step))),C.U((({seen:e,step:t})=>({seen:e,step:bt.MH(t)})))),content:o(e)})}e.HighlightStep=S.UI.Node.make((({notify:e})=>f.createElement("div",{className:na.highlightsOnboarding},t,f.createElement("div",null,f.createElement("h2",{className:na["highlightsOnboarding-header"]},A.inlineOnboarding.highlight.title),f.createElement("div",{className:na["highlightsOnboarding-content"]},A.inlineOnboarding.highlight.content),f.createElement("div",{className:na["highlightsOnboarding-buttons"]},f.createElement(V.zx.Primary,{onClick:e({kind:"inlineHighlightsOnboardingAction",action:"next"}),name:"inline-highlight-onboarding-next-button",ariaLabel:A.inlineOnboarding.highlight.next},A.inlineOnboarding.highlight.next),f.createElement(V.zx.Ghost,{onClick:e({kind:"inlineHighlightsOnboardingAction",action:"close"}),name:"inline-highlight-onboarding-close-button",ariaLabel:A.inlineOnboarding.highlight.close,className:na["highlightsOnboarding-button"]},A.inlineOnboarding.highlight.close)))))),e.HighlightsSwitchStep=S.UI.Node.make((({notify:e})=>f.createElement("div",{className:na.highlightsOnboarding},t,f.createElement("div",null,f.createElement("h2",{className:na["highlightsOnboarding-header"]},A.inlineOnboarding.highlightsSwitch.title),f.createElement("div",{className:na["highlightsOnboarding-content"]},A.inlineOnboarding.highlightsSwitch.content),f.createElement("div",{className:na["highlightsOnboarding-buttons"]},f.createElement(V.zx.Primary,{onClick:e({kind:"inlineHighlightsOnboardingAction",action:"next"}),name:"inline-highlight-onboarding-next-button",ariaLabel:A.inlineOnboarding.highlightsSwitch.next},A.inlineOnboarding.highlightsSwitch.next),f.createElement(V.zx.Ghost,{onClick:e({kind:"inlineHighlightsOnboardingAction",action:"close"}),name:"inline-highlight-onboarding-close-button",ariaLabel:A.inlineOnboarding.highlightsSwitch.close,className:na["highlightsOnboarding-button"]},A.inlineOnboarding.highlightsSwitch.close)))))),e.PanelSwitchStep=S.UI.Node.make((({notify:e})=>f.createElement("div",{className:na.highlightsOnboarding},t,f.createElement("div",null,f.createElement("h2",{className:na["highlightsOnboarding-header"]},A.inlineOnboarding.panelSwitch.title),f.createElement("div",{className:na["highlightsOnboarding-content"]},A.inlineOnboarding.panelSwitch.content),f.createElement("div",{className:na["highlightsOnboarding-buttons"]},f.createElement(V.zx.Primary,{onClick:e({kind:"inlineHighlightsOnboardingAction",action:"next"}),name:"inline-highlight-onboarding-next-button",ariaLabel:A.inlineOnboarding.panelSwitch.next},A.inlineOnboarding.panelSwitch.next)))))),e.OnboardingContent=S.UI.Union.make("kind",{highlight:e.HighlightStep,highlightsSwitch:e.HighlightsSwitchStep,panelSwitch:e.PanelSwitchStep}),e.createOnboardingContentFlow=o,e.OnboardingGrid=S.UI.Grid.make((({slots:e,state:t})=>f.createElement(U.F.Fragment,null,t.pipe(C.U((({seen:t,step:n})=>t?null:f.createElement(ta.J2,{mainContent:f.createElement(U.F.Fragment,null,e.content),isOutsideReferenceElement:!0,outsideReferenceElement:n.anchorElement,theme:"dark",placement:"top",includeMainContentPadding:!1,distanceFromReferenceElement:"highlight"===n.kind?12:void 0,style:{zIndex:1},show:!0}))))))),e.OnboardingSome=S.UI.Knot.make(e.OnboardingGrid,{content:e.OnboardingContent}),e.Onboarding=S.UI.Union.make("_tag",{Some:e.OnboardingSome,None:S.UI.Node.empty}),e.createFlow=function(e){return S.Z.composeUnion({Some:s(e),None:()=>T.of(null)},(()=>e.state.pipe(C.U((({step:e})=>e)))))}}(ea||(ea={}));var ia,aa=n(14601);!function(e){e.ViewModelImpl=class{constructor(e,t,n,i){this._readerCSState=e,this._gnar=t,this._sessionUuid=n,this._threadContext=i,this._subscriptions=new aa.w,this._state=u.h.create({step:h.none,seen:this._readerCSState.get().seenInlineHighlightsOnboarding||!1}),this.state=this._state.view(),this.actions=new ye.xQ,this._elements=new Map,this._step=new ye.xQ,this._subscriptions.add(this._handleMounts()),this._subscriptions.add(this._handleNextStepClick()),this._subscriptions.add(this._handleSeen()),this._subscriptions.add(this._handleStepChange()),this._step.next("highlight")}dispose(){this._subscriptions.unsubscribe(),this._elements.clear()}_handleMounts(){return this.actions.pipe(B.ofType(R.Kind.inlineHighlightOnboardingElementMounted)).subscribe((({step:e,node:t})=>this._elements.set(e,t)))}_handleStepChange(){return ie.aj([this._step,this.actions.pipe(B.ofType(R.Kind.inlineHighlightOnboardingElementMounted))]).pipe(C.U((([e])=>({kind:e,anchorElement:this._elements.get(e)}))),H.h((e=>!!e.anchorElement)),C.U(h.some),de.O(h.none)).subscribe((e=>{(0,o.zG)(e,bt.bw((e=>{const t=(0,o.zG)(this._threadContext.get().threadId,h.fromEither,h.toUndefined);switch(e.kind){case"highlight":this._gnar.readerMailInlineHighlightsOnboardingShown(this._sessionUuid,t);break;case"highlightsSwitch":case"panelSwitch":this._gnar.readerMailInlineHighlightsOnboardingNext(this._sessionUuid,t);break;default:(0,D.vE)(e)}}))),this._state.lens("step").set(e)}))}_handleNextStepClick(){return this.actions.pipe(B.ofType(R.Kind.setInlineHighlightsOnboardingStep)).subscribe((({step:e})=>this._step.next(e)))}_handleSeen(){return this.actions.pipe(B.ofType(R.Kind.seenInlineHighlightsOnboarding)).subscribe((()=>{const e=(0,o.zG)(this._threadContext.get().threadId,h.fromEither,h.toUndefined);this._gnar.readerMailInlineHighlightsOnboardingDismissed(this._sessionUuid,e),this._state.lens("seen").set(!0)}))}}}(ia||(ia={}));var oa,sa=n(45614),ra=n(69243),la=n(23923),da=n(88522),ca=n(95195);!function(e){const t=ra.jV([ra.G0([ra.dt({insert:ra.Z_}),ra.dt({insert:ra.IM(ra.Z_,ra._4)})]),ra.r$({attributes:ra.IM(ra.Z_,ra._4)})]),n=ra.jV([ra.dt({retain:ra.pk}),ra.r$({attributes:ra.IM(ra.Z_,ra._4)})]),i=ra.dt({delete:ra.pk});e.codec=ra.OT(ra.G0([t,i,n]))}(oa||(oa={}));const ma=ra.OT(ra.dt({ops:ra.IX(oa.codec)})),ha=new ra.Dy("Delta",(e=>"object"==typeof e&&null!==e&&"ops"in e),((e,t)=>(0,o.zG)(ma.validate(e,t),ca.UI((e=>new da.i(e.ops))))),(e=>ma.encode({ops:e.ops})));var ua=n(73975),pa=n(6738),ga=n(38348),ba=n(2788);const fa=ra.OT(ra.r$({tableTextCoverage:ra.pk,isWholeHTMLDocument:ra.O7}));var ka;function va(e){return{id:e.id,subject:e.subject,body:e.body,author:e.author,audience:e.audience,replyTo:e.replyTo,timestamp:"parsedDate"===e.date.kind?e.date.timestamp:void 0,localeDate:{date:"parsedDate"===e.date.kind?new Date(e.date.timestamp).toDateString():e.date.date,locale:"unparsedDate"===e.date.kind?e.date.locale:void 0},semanticInformation:e.semanticInformation,isFromMailingList:e.isFromMailingList}}!function(e){e.eqById=ua.Uz((e=>e.id))(ua.yv),e.codec=ra.OT(ra.jV([ra.dt({id:la.eo.codec,subject:ra.Z_,body:ha,plainText:ra.Z_,date:pa.y,author:ba.r,audience:ra.Bk(ba.r),replyTo:ra.Bk(ba.r),links:ra.Bk(ga.q.codec),isFromMailingList:ra.O7}),ra.r$({semanticInformation:fa})]))}(ka||(ka={}));ra.jV([ka.codec,ra.OT(ra.dt({index:ra.pk}))]);var Ia,_a,ya=n(90361),xa=n(85548),wa=n(13444),Ea=n(2768),Ca=n(24209),Ua=n(12126),Sa=n(77843),Na=n(20817),Ta=n(65219),Ma=n(91625),Fa=n(44760);!function(e){e.thankYou="thankYou"}(Ia||(Ia={})),function(e){e.create=function(e,t=6e3){return{kind:e,dismissTimestamp:Date.now()+t}}}(_a||(_a={}));var Aa=n(41627);function La(e){return(t,n)=>i=>(0,o.zG)(i,l.cq(e)(t,(0,o.ls)(h.some,n)),h.getOrElse((()=>(0,o.zG)(i,l.ZQ(e)(t,n(h.none))))))}const Ga=(e,t)=>La(Ta.h.Id.eq)(e,t),Oa=(e,t)=>La(Ma.p.Id.eq)(e,t),Pa=(e,t)=>La(xa.A.eq)(e,t);var Ka,za;!function(e){let t;e.empty=(e,t,n)=>({activeMenuItemId:h.none,activeMessageIndex:h.none,onboardingStep:(null==e?void 0:e.seenOnboarding)?h.none:h.some(0),panelState:n,feedbackDialog:h.none,notification:h.none,activeView:(null==e?void 0:e.seenOnboarding)?"messageView":"onboardingView",showFilteredContent:{summary:!1,followUps:!1,links:!1},annotations:(0,o.zG)(t,h.chain((t=>{var n,i;return h.fromNullable(null===(i=null===(n=null==e?void 0:e.threadState)||void 0===n?void 0:n[t])||void 0===i?void 0:i.annotations)})),h.fold((()=>new Map),sa.To(new Map,((e,t,n)=>(0,o.zG)(Ma.X.decode(n),ca.g_((()=>t),(n=>t.set(e,n)))))))),summaryItems:(0,o.zG)(t,h.chain((t=>{var n,i;return h.fromNullable(null===(i=null===(n=null==e?void 0:e.threadState)||void 0===n?void 0:n[t])||void 0===i?void 0:i.summaries)})),h.fold((()=>new Map),sa.To(new Map,((e,t,n)=>(0,o.zG)(Ta.k.decode(n),ca.g_((()=>t),(n=>t.set(e,n)))))))),links:(0,o.zG)(t,h.chain((t=>{var n,i;return h.fromNullable(null===(i=null===(n=null==e?void 0:e.threadState)||void 0===n?void 0:n[t])||void 0===i?void 0:i.links)})),h.fold((()=>new Map),sa.To(new Map,((e,t,n)=>(0,o.zG)(Fa.e9.decode(n),ca.g_((()=>t),(n=>t.set(e,n))))))))}),function(e){e.summaryItems=Na.Ri.create((e=>e.summaryItems),((e,t)=>({...t,summaryItems:e}))),e.annotations=Na.Ri.create((e=>e.annotations),((e,t)=>({...t,annotations:e}))),e.links=Na.Ri.create((e=>e.links),((e,t)=>({...t,links:e})))}(t=e.Lens||(e.Lens={}))}(Ka||(Ka={}));class Ra{constructor(e,t,n,i,a,s,r,d,c=s.has("feedbackDialog")){var b;this._mailThread=e,this._hasInlineAnnotations=t,this.browser=n,this._gnar=i,this._sessionUuid=a,this._features=s,this._readerCSState=r,this._highlightsEnabledInThread=d,this.isSubmitFeedbackDialogSupported=c,this._subscriptions=new aa.w,this.isClipboardSupported=(0,Aa.x)(),this.areInlineHighlightsSupported=this._features.has("inlineHighlights"),this._state=u.h.create(Ka.empty(this._readerCSState.get(),(0,o.zG)(this._mailThread.get().threadId,h.fromEither),(null===(b=this._readerCSState.get())||void 0===b?void 0:b.seenOnboarding)&&this.areInlineHighlightsSupported?"collapsed":"expanded")),this._panelInjected=!1,this._onboardingPanelShown=!1,this._userNavigatedInPanel=!1,this.actions=new ye.xQ,this.state=u.h.combine(this._mailThread,this._state,((e,{panelState:t,activeMessageIndex:n,activeView:i,annotations:a,summaryItems:s,links:r,onboardingStep:d,activeMenuItemId:c,feedbackDialog:u,notification:p,showFilteredContent:b})=>{const f=(0,o.zG)(n,h.getOrElse((()=>e.messageCount-1))),v=(0,o.zG)(h.fromNullable(e.messageIndexToIdMap.get(f)),h.chain((t=>h.fromNullable(e.expandedMessages.get(t)))));if("collapsed"===t)return{kind:"collapsed",loading:"onboardingView"!==i&&!Da(e),feedbackDialog:u,notification:p,nothingToRecap:"onboardingView"!==i&&(0,o.zG)(v,h.fold(o.jv,Va))};const I=(0,o.zG)(v,h.fold(o.jv,Za));return{feedbackDialog:u,notification:p,..."onboardingView"===i?{kind:"onboardingView",step:(0,o.zG)(d,h.getOrElse((()=>0))),features:this._features}:"pinnedView"===i?{kind:"pinnedView",summaryItems:(0,o.zG)(s,l.hX((e=>!e.dismissed&&e.pinned)),l.VO(Ta.h.ord),qa(this._features,"summaries")),questions:(0,o.zG)(a,l.hX((e=>!e.dismissed&&e.pinned)),l.VO(Ma.p.ord),qa(this._features,"followUps")),links:(0,o.zG)((0,o.zG)(r,l.hX((0,k.W9)((e=>!e.dismissed),Fa.kP)),l.VO(Fa.WO.ord)),qa(this._features,"links")),activeMenuItemId:c}:"messageView"===i?{kind:"messageView",header:(0,o.zG)(v,h.fold((()=>m.x5),(e=>(0,o.zG)(e.message,m.UI((e=>({author:e.author,date:e.date}))))))),navigation:{canGoBack:f>0,canGoForward:f<e.messageCount-1},message:(0,o.zG)(v,h.fold((()=>m.x5),(e=>(0,o.zG)(e.message,m.UI((e=>({id:e.id,date:e.date,wordCount:e.wordCount,isLastMessage:e.isLastMessage}))))))),summary:(0,o.zG)(Wa(v,s),qa(this._features,"summaries"),h.map((e=>({data:e,viewState:I?b.summary?g.showFilteredMessageContent:g.hideFilteredMessageContent:g.showContent})))),questions:(0,o.zG)(Ja(v,a),qa(this._features,"followUps"),h.map((e=>({data:e,viewState:I?b.followUps?g.showFilteredMessageContent:g.hideFilteredMessageContent:g.showContent})))),links:(0,o.zG)(Qa(v,r),qa(this._features,"links"),h.map((e=>({data:e,viewState:I?b.links?g.showFilteredMessageContent:g.hideFilteredMessageContent:g.showContent})))),activeMenuItemId:c}:(0,D.vE)(i)}})),this.inlineHighlightsEnabled=u.h.combine(this._readerCSState.view((({inlineHighlightsEnabled:e})=>(0,o.zG)(h.fromNullable(e),h.getOrElse((()=>!0))))),this._mailThread,this._highlightsEnabledInThread,((e,t,n)=>(0,o.zG)(h.fromNullable(t.messageIndexToIdMap.get(t.messageCount-1)),h.chain((e=>h.fromNullable(t.expandedMessages.get(e)))),h.chain(p),h.map((t=>(h.isNone(t)||n)&&e))))),this._maybeThreadId=(0,o.zG)(this._mailThread.get().threadId,h.fromEither,h.toUndefined),this._subscriptions.add(this._mailThread.view("messageCount").subscribe((e=>this._state.lens("activeMessageIndex").modify(h.map((t=>Math.max(0,Math.min(t,e-1)))))))),this._subscriptions.add(this._trackMessageShow()),this._subscriptions.add(this._autoDismissNotifications()),this._subscriptions.add(this._handleCollapseButtonClick()),this._subscriptions.add(this._handleExpandButtonClick()),this._subscriptions.add(this._handlePanelMounted()),this._subscriptions.add(this._handleThreadViewNavigate()),this._subscriptions.add(this._handleOpenPinnedView()),this._subscriptions.add(this._handleOpenMessageView()),this._subscriptions.add(this._handleOnboardingViewNavigate()),this._subscriptions.add(this._handleCheckQuestionItem()),this._subscriptions.add(this._handleColumnScroll()),this._subscriptions.add(this._handleItemBlur()),this._subscriptions.add(this._handleOpenItemMenu()),this._subscriptions.add(this._handleLinkItemClick()),this._subscriptions.add(this._handlePin()),this._subscriptions.add(this._handleDismiss()),this._subscriptions.add(this._handleCopy()),this._subscriptions.add(this._handleRating()),this._subscriptions.add(this._handleOptIn()),this._subscriptions.add(this._handleOptOut()),this._subscriptions.add(this._handleCloseNotification()),this._subscriptions.add(this._handleOpenFeedbackDialog()),this._subscriptions.add(this._handleSubmitFeedbackDialog()),this._subscriptions.add(this._handleSkipFeedbackDialog()),this._subscriptions.add(this._handleCloseFeedbackDialog()),this._subscriptions.add(this._handleInlineHighlightsToggle()),this._subscriptions.add(this._handleShowFilteredContent()),this._subscriptions.add(this._autoExpand())}_autoExpand(){return this._mailThread.pipe(wa.g(0),Ea.R(Ca.T(this.actions.pipe(B.ofType(R.Kind.collapse)),this.actions.pipe(B.ofType(R.Kind.expand)),this._hasInlineAnnotations.pipe(H.h(ya.fQ)))),C.U((e=>(0,o.zG)(h.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),h.chain((t=>h.fromNullable(e.expandedMessages.get(t)))),h.fold(o.jv,(({annotations:e,summary:t})=>!m.n2(e)&&(Ba(e)||Ha(t))))))),H.h(ya.fQ)).subscribe((()=>this._state.lens("panelState").set("expanded")))}_handlePanelMounted(){return this.actions.pipe(B.ofType(R.Kind.panelMounted)).subscribe((({subject:e})=>{e===O.readerPanel?this._panelInjected||"onboardingView"===this._state.get().activeView||(this._gnar.readerMailPanelShow(this._sessionUuid,this._maybeThreadId),this._panelInjected=!0):e===O.onboardingPanel?this._onboardingPanelShown||(this._gnar.readerMailOnboardingPanelShow(this._sessionUuid,this._maybeThreadId),this._onboardingPanelShown=!0):(0,D.vE)(e)}))}_handleExpandButtonClick(){return this.actions.pipe(B.ofType(R.Kind.expand)).subscribe((({source:e})=>{switch(this._state.modify((e=>({...e,panelState:"expanded",feedbackDialog:h.none,notification:h.none}))),e){case K.expandButton:this._gnar.readerMailPanelExpandButtonClick(this._state.get().activeView,this._sessionUuid,this._maybeThreadId);break;case K.recapButton:this._gnar.readerMailRecapExpandButtonClick(this._state.get().activeView,this._sessionUuid,this._maybeThreadId);break;case K.replyButton:this._gnar.readerMailEmailClientReplyButtonClick(this._state.get().activeView,this._sessionUuid,this._maybeThreadId);break;default:(0,D.vE)(e)}}))}_handleCollapseButtonClick(){return this.actions.pipe(B.ofType(R.Kind.collapse)).subscribe((({source:e})=>{switch(this._state.modify((e=>({...e,panelState:"collapsed",feedbackDialog:h.none,notification:h.none}))),e){case P.collapseButton:this._gnar.readerMailPanelCollapseButtonClick(this._state.get().activeView,this._sessionUuid,this._maybeThreadId);break;case P.recapButton:this._gnar.readerMailRecapCollapseButtonClick(this._sessionUuid,this._maybeThreadId);break;default:(0,D.vE)(e)}}))}_handleOptIn(){return this.actions.pipe(B.ofType(R.Kind.optIn)).subscribe((()=>{this._state.modify((e=>({...e,activeView:"messageView",onboardingStep:h.none}))),this._gnar.readerMailOnboardingPanelOptInButtonClick(this._sessionUuid,this._maybeThreadId)}))}_handleOptOut(){return this.actions.pipe(B.ofType(R.Kind.optOut)).subscribe((()=>{this._state.modify((e=>({...e,panelState:"collapsed",onboardingStep:h.none,feedbackDialog:h.none,notification:h.none}))),this._gnar.readerMailOnboardingPanelOptOutButtonClick(this._sessionUuid,this._maybeThreadId)}))}_handleOnboardingViewNavigate(){return this.actions.pipe(B.ofType(R.Kind.onboardingViewNavigate)).subscribe((({action:e})=>{const t=(0,o.zG)(this._state.get().onboardingStep,h.getOrElse((()=>0)),(t=>{switch(e){case G.left:return Math.max(t-1,0);case G.right:return Math.min(t+1,2);default:(0,D.vE)(e)}}));this._state.lens("onboardingStep").set(h.some(t)),this._gnar.readerMailOnboardingPanelNavigationButtonClick(this._sessionUuid,v[t],this._maybeThreadId)}))}getNextActiveMessageIndex(e){return function(e,t,n){if(e===L.left&&t>0)return h.some(t-1);if(e===L.right&&t<n-1)return h.some(t+1);if(e===L.first&&t>0)return h.some(0);if(e===L.last&&t<n-1)return h.some(n-1);return h.none}(e,(0,o.zG)(this._state.get().activeMessageIndex,h.getOrElse((()=>this._mailThread.get().messageCount-1))),this._mailThread.get().messageCount)}_handleThreadViewNavigate(){return this.actions.pipe(B.ofType(R.Kind.threadViewNavigate)).subscribe((({action:e,nextIndex:t})=>{this._userNavigatedInPanel=!0,this._state.lens("activeMessageIndex").set(h.some(t)),this._gnar.readerMailPanelNavigationButtonClick(e,this._sessionUuid,this._maybeThreadId)}))}_handleOpenPinnedView(){return this.actions.pipe(B.ofType(R.Kind.openPinnedView)).subscribe((()=>{this._state.lens("activeView").set("pinnedView"),this._gnar.readerMailPanelPinnedButtonClick(this._sessionUuid,this._maybeThreadId)}))}_handleOpenMessageView(){return this.actions.pipe(B.ofType(R.Kind.openMessageView)).subscribe((({source:e})=>{switch(this._state.lens("activeView").set("messageView"),e){case z.messagesButton:this._gnar.readerMailPanelMessagesButtonClick(this._sessionUuid,this._maybeThreadId);break;case z.emptyPinnedSummaries:case z.emptyPinnedFollowUps:case z.emptyPinnedLinks:this._gnar.readerMailPanelReturnToMessagesButtonClick(this._sessionUuid,e,this._maybeThreadId);break;default:(0,D.vE)(e)}}))}_handleCheckQuestionItem(){return this.actions.pipe(B.ofType(R.Kind.check)).subscribe((({item:e,checked:t})=>{this._state.lens(Ka.Lens.annotations).modify(Oa(e.itemId,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,checked:t}))))),this._gnar.readerMailPanelQuestionItemCheck(e.message.id,this._state.get().activeView,this._sessionUuid,t,this._maybeThreadId)}))}_handlePin(){return this.actions.pipe(B.ofType(R.Kind.pin)).subscribe((({item:e,itemType:t,pinned:n})=>{switch(t){case"summaryItem":this._state.lens(Ka.Lens.summaryItems).modify(Ga(e.itemId,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,pinned:n}))))),this._gnar.readerMailPanelSummaryItemPin(e.message.id,this._sessionUuid,n,this._maybeThreadId);break;case"followUpItem":this._state.lens(Ka.Lens.annotations).modify(Oa(e.itemId,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,pinned:n}))))),this._gnar.readerMailPanelQuestionItemPin(e.message.id,this._sessionUuid,n,this._maybeThreadId);break;case"linkItem":this._state.lens(Ka.Lens.links).modify(Pa(e.url,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,pinned:n,messagePinnedFrom:n?h.some(e.message):h.none}))))),this._gnar.readerMailPanelLinkItemPin(e.message.id,this._sessionUuid,n,this._maybeThreadId);break;default:(0,D.vE)(e)}this._setActiveItemId(null)}))}_handleCopy(){return this.actions.pipe(B.ofType(R.Kind.copy)).subscribe((({item:e,itemType:t})=>{switch(t){case"summaryItem":this._subscriptions.add(Ua.D((0,Aa.v)(e.text)).subscribe()),this._gnar.readerMailPanelSummaryItemCopy(e.message.id,this._sessionUuid,this._maybeThreadId);break;case"followUpItem":this._subscriptions.add(Ua.D((0,Aa.v)(e.text)).subscribe()),this._gnar.readerMailPanelQuestionItemCopy(e.message.id,this._sessionUuid,this._maybeThreadId);break;case"linkItem":this._subscriptions.add(Ua.D((0,Aa.v)(e.name)).subscribe()),this._gnar.readerMailPanelLinkItemCopy(e.message.id,this._sessionUuid,this._maybeThreadId);break;default:(0,D.vE)(e)}this._setActiveItemId(null)}))}_handleDismiss(){return this.actions.pipe(B.ofType(R.Kind.dismiss)).subscribe((({item:e,itemType:t})=>{switch(t){case"summaryItem":this._state.lens(Ka.Lens.summaryItems).modify(Ga(e.itemId,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,dismissed:!0}))))),this._gnar.readerMailPanelSummaryItemDismiss(e.message.id,this._sessionUuid,this._maybeThreadId);break;case"followUpItem":this._state.lens(Ka.Lens.annotations).modify(Oa(e.itemId,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,dismissed:!0}))))),this._gnar.readerMailPanelQuestionItemDismiss(e.message.id,this._sessionUuid,this._maybeThreadId);break;case"linkItem":this._state.lens(Ka.Lens.links).modify(Pa(e.url,(0,o.ls)(h.getOrElse((()=>e)),(e=>({...e,dismissed:!0}))))),this._gnar.readerMailPanelLinkItemDismiss(e.message.id,this._sessionUuid,this._maybeThreadId);break;default:(0,D.vE)(e)}this._setActiveItemId(null)}))}_handleRating(){return this.actions.pipe(H.h((0,k.Kg)(R.is(R.Kind.like),R.is(R.Kind.dislike)))).subscribe((({kind:e,item:t,itemType:n,position:i})=>{switch(n){case"summaryItem":this._state.lens(Ka.Lens.summaryItems).modify(Ga(t.itemId,(0,o.ls)(h.getOrElse((()=>t)),(t=>({...t,rating:ja(e)}))))),this.actions.next({kind:R.Kind.openFeedback,source:{kind:"itemPanelMenu",itemType:"summaryItem",item:t,action:e},position:i});break;case"followUpItem":this._state.lens(Ka.Lens.annotations).modify(Oa(t.itemId,(0,o.ls)(h.getOrElse((()=>t)),(t=>({...t,rating:ja(e)}))))),this.actions.next({kind:R.Kind.openFeedback,source:{kind:"itemPanelMenu",itemType:"followUpItem",item:t,action:e},position:i});break;default:(0,D.vE)(t)}}))}_setActiveItemId(e){this._state.lens("activeMenuItemId").set(h.fromNullable(e))}_handleOpenItemMenu(){return this.actions.pipe(B.ofType(R.Kind.openItemMenu)).subscribe((({itemId:e})=>this._setActiveItemId(e)))}_handleColumnScroll(){return this.actions.pipe(B.ofType(R.Kind.columnScroll)).subscribe((()=>this._setActiveItemId(null)))}_handleItemBlur(){return this.actions.pipe(B.ofType(R.Kind.itemBlur)).subscribe((()=>this._setActiveItemId(null)))}_handleOpenFeedbackDialog(){return this.actions.pipe(B.ofType(R.Kind.openFeedback)).subscribe((({source:e,position:t})=>this._state.lens("feedbackDialog").set(h.some({source:e,position:t}))))}_handleCloseFeedbackDialog(){return this.actions.pipe(B.ofType(R.Kind.closeFeedback)).subscribe((()=>this._state.modify((e=>({...e,feedbackDialog:h.none,activeMenuItemId:h.none})))))}_handleSkipFeedbackDialog(){return this.actions.pipe(B.ofType(R.Kind.skipFeedback)).subscribe((()=>this._state.modify((e=>({...e,feedbackDialog:h.none,activeMenuItemId:h.none})))))}_handleSubmitFeedbackDialog(){return this.actions.pipe(B.ofType(R.Kind.submitFeedback)).subscribe((()=>this._state.modify((e=>({...e,feedbackDialog:h.none,activeMenuItemId:h.none,notification:h.some(_a.create(Ia.thankYou))})))))}_handleCloseNotification(){return this.actions.pipe(B.ofType(R.Kind.closeNotification)).subscribe((()=>this._state.lens("notification").set(h.none)))}_handleLinkItemClick(){return this.actions.pipe(B.ofType(R.Kind.linkClick)).subscribe((({item:e})=>{this._gnar.readerMailPanelLinkItemClick(e.message.id,this._sessionUuid,this._maybeThreadId)}))}_handleInlineHighlightsToggle(){return this.actions.pipe(B.ofType(R.Kind.toggleInlineHighlights)).subscribe((({enabled:e})=>{e?this._gnar.readerMailInlineHighlightsDisable(this._sessionUuid,this._maybeThreadId):this._gnar.readerMailInlineHighlightsEnable(this._sessionUuid,this._maybeThreadId)}))}_handleShowFilteredContent(){return this.actions.pipe(B.ofType(R.Kind.showFilteredContent)).subscribe((e=>this._state.lens("showFilteredContent",e.column).set(!0)))}dispose(){this._subscriptions.unsubscribe()}_autoDismissNotifications(){return Sa.F(1e3).pipe(xe.M(this._state),H.h((([e,t])=>(0,o.zG)(t.notification,h.fold(o.jv,(e=>Date.now()>=e.dismissTimestamp)))))).subscribe((()=>this._state.lens("notification").modify(h.filter((e=>Date.now()<e.dismissTimestamp)))))}_trackMessageShow(){return this.state.pipe(H.h(E),rt.x(((e,t)=>ka.eqById.equals(e.message.value,t.message.value)))).subscribe((e=>{const t=(0,o.zG)(e.summary,h.map(c.ei("data")),h.filter(m.d6),h.fold((()=>0),(e=>e.value.length))),n=(0,o.zG)(e.questions,h.map(c.ei("data")),h.filter(m.d6),h.fold((()=>0),(e=>e.value.length))),i=(0,o.zG)(e.links,h.map(c.ei("data")),h.filter(m.d6),h.fold((()=>0),(e=>e.value.length)));this._gnar.readerMailPanelMessageShow(Array.from(this._features),e.message.value.isLastMessage,i,e.message.value.id,n,this._sessionUuid,this._userNavigatedInPanel?"navigation":"firstLoad",t,e.message.value.wordCount,"parsedDate"===e.message.value.date.kind?e.message.value.date.timestamp:void 0,this._maybeThreadId)}))}}function Ba(e){return m.d6(e)&&(0,o.zG)(e.value,h.exists((e=>e.annotations.length>0&&h.isNone(e.filteringInfo))))}function Ha(e){return m.d6(e)&&(0,o.zG)(e.value,h.exists((e=>e.summary.length>0&&h.isNone(e.filteringInfo))))}function Da(e){return(0,o.zG)(h.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),h.chain((t=>h.fromNullable(e.expandedMessages.get(t)))),h.fold(o.jv,(({annotations:e,summary:t})=>Ba(e)||Ha(t)||!m.n2(e)&&!m.n2(t))))}function Va(e){const t=!m.n2(e.annotations)&&(0,o.zG)((0,d.zk)(e.annotations),h.flatten,h.map(c.ei("annotations")),h.fold(o.W8,(e=>0===e.length))),n=!m.n2(e.summary)&&(0,o.zG)((0,d.zk)(e.summary),h.flatten,h.map(c.ei("summary")),h.fold(o.W8,(e=>0===e.length)));return t&&n}function Za(e){return(0,o.zG)(p(e),h.flatten,h.isSome)}function ja(e){return"like"===e?gt.DE.liked:"dislike"===e?gt.DE.disliked:(0,D.vE)(e)}function qa(e,t){return e.has(t)?h.some:(0,o.a9)(h.none)}function Wa(e,t){return(0,o.zG)(e,h.fold((()=>m.x5),(e=>(0,o.zG)(a.Y(m.$w)({summary:e.summary,message:e.message}),m.UI((({summary:e,message:n})=>(0,o.zG)(e,h.fold((()=>[]),(0,o.ls)(c.ei("summary"),at.UI((e=>{var i,a;const o=Ta.h.Id.create(e.id),s=t.get(o);return{message:{id:n.id,author:n.author,date:n.date,index:n.index},itemId:o,text:e.text,pinned:null!==(i=null==s?void 0:s.pinned)&&void 0!==i&&i,dismissed:null!==(a=null==s?void 0:s.dismissed)&&void 0!==a&&a,rating:null==s?void 0:s.rating}})),at.hX((e=>!e.dismissed)))))))))))}function Ja(e,t){return(0,o.zG)(e,h.fold((()=>m.x5),(e=>(0,o.zG)(a.Y(m.$w)({annotations:e.annotations,message:e.message}),m.UI((({annotations:e,message:n})=>(0,o.zG)(e,h.fold((()=>[]),(0,o.ls)(c.ei("annotations"),at.UI((e=>{var i,a,o;const s=Ma.p.Id.create(e.id),r=t.get(s);return{message:{id:n.id,author:n.author,date:n.date,index:n.index},itemId:s,text:e.text,type:e.type,pinned:null!==(i=null==r?void 0:r.pinned)&&void 0!==i&&i,checked:null!==(a=null==r?void 0:r.checked)&&void 0!==a&&a,dismissed:null!==(o=null==r?void 0:r.dismissed)&&void 0!==o&&o,rating:null==r?void 0:r.rating}})),at.hX((e=>!e.dismissed)),at.hX((e=>"question"===e.type||"action_item"===e.type)))))))))))}function Qa(e,t){return(0,o.zG)(e,h.fold((()=>m.x5),(e=>(0,o.zG)(e.message,m.tS((e=>m.Vp(e.links.map((n=>{var i,a,o;const s=t.get(n.url);return{message:{id:e.id,author:e.author,date:e.date,index:e.index},messagePinnedFrom:null!==(i=null==s?void 0:s.messagePinnedFrom)&&void 0!==i?i:h.none,name:n.name,url:n.url,type:n.type,mimeType:ga.q.isAttachment(n)?n.mimeType:void 0,pinned:null!==(a=null==s?void 0:s.pinned)&&void 0!==a&&a,dismissed:null!==(o=null==s?void 0:s.dismissed)&&void 0!==o&&o,rating:null==s?void 0:s.rating}})).filter((e=>!e.dismissed)))))))))}!function(e){e.Mock=class{constructor(e,t=!0,n=!0){this._state=e,this.isSubmitFeedbackDialogSupported=t,this.areInlineHighlightsSupported=n,this._subscriptions=new aa.w,this.inlineHighlightsEnabled=u.h.create(h.none),this.actions=new ye.xQ,this.browser="chrome",this.isClipboardSupported=!0,this.state=this._state.view(),this._subscriptions.add(this.actions.pipe(H.h((0,k.Kg)(R.is(R.Kind.submitFeedback),R.is(R.Kind.skipFeedback),R.is(R.Kind.closeFeedback)))).subscribe((()=>this._updateFeedback(h.none)))),this._subscriptions.add(this.actions.pipe(B.ofType(R.Kind.openFeedback)).subscribe((({source:e,position:t})=>this._updateFeedback(h.some({source:e,position:t}))))),this._subscriptions.add(this.actions.pipe(H.h((0,k.Kg)(R.is(R.Kind.columnScroll),R.is(R.Kind.itemBlur)))).subscribe((()=>this._setActiveItemId(null)))),this._subscriptions.add(this.actions.pipe(B.ofType(R.Kind.openItemMenu)).subscribe((({itemId:e})=>this._setActiveItemId(e)))),this._subscriptions.add(this.actions.pipe(H.h((0,k.Kg)(R.is(R.Kind.like),R.is(R.Kind.dislike)))).subscribe((({kind:e,item:t,itemType:n,position:i})=>{switch(n){case"summaryItem":this.actions.next({kind:R.Kind.openFeedback,source:{kind:"itemPanelMenu",itemType:"summaryItem",item:t,action:e},position:i});break;case"followUpItem":this.actions.next({kind:R.Kind.openFeedback,source:{kind:"itemPanelMenu",itemType:"followUpItem",item:t,action:e},position:i});break;default:(0,D.vE)(t)}})))}getNextActiveMessageIndex(e){return h.none}dispose(){this._subscriptions.unsubscribe()}_setActiveItemId(e){this._state.modify((t=>y(t)||x(t)?{...t,activeMenuItemId:h.fromNullable(e)}:t))}_updateFeedback(e){this._state.modify((t=>"collapsed"!==t.kind&&"onboardingView"!==t.kind?{...t,activeMenuItemId:h.isNone(e)?h.none:t.activeMenuItemId,feedbackDialog:e}:"collapsed"===t.kind?{...t,feedbackDialog:e}:t))}}}(za||(za={}));var $a=n(63551),Ya=n(19019),Xa=n(84603),eo=n(15555),to=n(29567),no=n(74850),io=n(19751),ao=n(66310),oo=n(40151),so=n(17343),ro=n(16118),lo=n(71032),co=n(85321),mo=n(71249),ho=n(55421),uo=n(37881);class po{constructor(e,t,n){this._layout=e,this._highlights=t,this._getHoveredStateBehavior=n,this._highlightHoverStateBehavior=e=>this._getHoveredStateBehavior(e),this._getHighlightsContainer=e=>f.createElement(U.F.div,{style:this._layout.textNode.scrollSize.behavior.pipe((0,C.U)((e=>({height:e.height,width:e.width}))))},e),this.highlights=()=>this._getHighlightsContainer(f.createElement(uo.$v,{key:"aqua-highlights",highlightHeightOffset:0,highlights:this._highlights.geometry.view((e=>Array.from(e.values()))),getHoverState:this._highlightHoverStateBehavior}))}}var go=n(13116),bo=n(94158),fo=n(61202);class ko extends fo.j{constructor(e,t,n,i){super(e,t,(e=>new bo._(e)),(()=>null),n),this._firstHighLightOnboardingSub=null,this._firstHighLightOnboardingSub=(null==i?void 0:i.state.get().seen)?null:this.highlightsCollection.geometry.pipe(H.h((e=>e.size>0)),dt.q(1),we.b((e=>{(0,o.zG)(Array.from(e.values()),mo.YM,h.map(c.ei("rects")),h.chain(mo.YM),bt.bw((e=>null==i?void 0:i.actions.next({kind:R.Kind.inlineHighlightOnboardingElementMounted,step:"highlight",node:{getBoundingClientRect:()=>{const t=(0,go.Z)(e,this._layout.textNode.rect.getCurrent().client,this._layout.textNode.scroll.getCurrent());return DOMRect.fromRect({x:t.left,y:t.top,width:0,height:t.height})}}}))))}))).subscribe()}dispose(){var e;null===(e=this._firstHighLightOnboardingSub)||void 0===e||e.unsubscribe(),super.dispose()}}var vo,Io=n(52965),_o=n(85089),yo=n(78674),xo=n(89068),wo=n(91224);function Eo(e){return e instanceof HTMLDivElement&&!!e.querySelector(Io.k2)}function Co(e){const t=null===e.querySelector(Io.Py);return Array.from(e.querySelectorAll(t?Io.KL:Io.Py)).filter(Eo).length}function Uo(e){const t=e.querySelector(Io.bK)||e.querySelector(Io.Gc),n=t?(0,Ya.XT)(t).length:0;if(!t||0===n)return T.of(ca.t$("No messages"));if(Co(e)===n)return T.of(ca.F2(vo.noExpansionNeeded));const i=e.querySelector(Io.p4)||e.querySelector(Io.Vz);return null==i||i.click(),(0,o.zG)((a=t,_o.rl(a,{subtree:!0,childList:!1,attributes:!0,attributeFilter:["role","aria-expanded"]}).pipe(de.O(null))),yo.b(10),H.h((()=>Co(e)===n)),xo.V(3e3),dt.q(1),so.h(ca.F2(vo.expanded)),wo.K((e=>T.of(ca.t$(e.message)))));var a}!function(e){e.expanded="expanded",e.noExpansionNeeded="noExpansionNeeded"}(vo||(vo={}));var So=n(43995),No=n(86419),To=n(99596),Mo=n(46610),Fo=n(17160);class Ao{constructor(e,t,n,i,a,o=s.O,r,l=no.Y.create("gmail.reader.feedback")){this._actions=e,this._threadRemoteData=t,this._threadContext=n,this._sessionUuid=i,this._featuresAndExperiments=a,this._getEnv=o,this._telemetry=r,this._logger=l,this._subscriptions=new aa.w,this._rpcClient=(0,ya.Vo)((()=>new No.u(this._getEnv().bgRpc.api))),this._subscriptions.add(this._handleUIEvents()),this._subscriptions.add(this._handleSubmitFeedbackEvents())}_handleSubmitFeedbackEvents(){return this._actions.pipe(B.ofType(R.Kind.submitFeedback),H.h((()=>this._featuresAndExperiments.features.has("feedbackDialog"))),co.zg((0,o.ls)(R.matchSubmitFeedback({itemMenu:Lo,collapsedPanelButton:Go,expandedPanelHeaderButton:Go,emptyViewButton:Go}),(e=>a.Y(ca.wE)({threadId:this._threadContext.get().threadId,reader:(0,o.zG)(this._threadContext.get().loggedUser,ca.UI(ba.R)),feedback:ca.F2(e)})),ca.UI((({threadId:e,reader:t,feedback:n})=>({threadId:e,features:Array.from(this._featuresAndExperiments.features),readerExperiment:this._featuresAndExperiments.experimentNames[0],sessionUuid:this._sessionUuid,reader:t,feedback:n}))),ca.g_((e=>T.of(m.kH(e))),(e=>Mo.o((()=>this._rpcClient.get().sendReaderSurvey(e)),[So.B1(3),So.jR(5e3)],(e=>e instanceof To.Lu||e instanceof To.Bb&&e.code>=500))))))).subscribe(m.g_({onInProgress:o.Q1,onSuccess:o.Q1,onError:o.Q1,onFatal:e=>{this._logger.warn("Survey error",e),this._telemetry.readerGmail.warning("feedback","Survey error",e)}}))}_handleUIEvents(){return this._actions.pipe(H.h((0,k.Kg)((0,k.W9)((0,k.Kg)(R.is(R.Kind.copy),R.is(R.Kind.pin),R.is(R.Kind.dismiss),R.is(R.Kind.itemMounted)),(0,k.Kg)(R.itemTypeIs("summaryItem"),R.itemTypeIs("followUpItem"))),R.is(R.Kind.like),R.is(R.Kind.dislike),R.is(R.Kind.check))),H.h((()=>this._featuresAndExperiments.features.has("feedbackEvents"))),C.U((e=>{return(0,o.zG)((t=this._threadContext.get(),n=this._threadRemoteData,i=e.item.message.id,a=e.kind===R.Kind.check?"followUpItem":e.itemType,(0,o.zG)(h.fromNullable(t.expandedMessages.get(i)),h.chain(d.zk),h.map((e=>({emailText:e.textMap.getPlainText(),emailSubject:ca.fS((()=>""))(t.subject),emailIsFromMailingList:(e.context.metadata.listUnsubscribe||[]).length>0,emailIsWholeHTMLDocument:/^text\/html\b/.test(e.context.metadata.contentType||""),emailTableTextCoverage:e.context.metadata.tableTextCoverage,...(0,o.zG)(Oo(n,i,a),h.fold((()=>({})),(e=>({emailReaderFilteringVersion:e.filteringVersion,emailReaderFilteringReasons:e.filteringReasons}))))}))))),h.map((t=>({type:e.kind===R.Kind.itemMounted?"show":e.kind!==R.Kind.pin||e.pinned?e.kind!==R.Kind.check||e.checked?e.kind:"uncheck":"unpin",subject:e.kind===R.Kind.check?"followUpItem":e.itemType,id:e.item.itemId,messageId:e.item.message.id,itemText:e.item.text,...t}))));var t,n,i,a})),N.oA,Fo.e(100),H.h((e=>e.length>0)),co.zg((e=>(0,o.zG)(a.Y(ca.wE)({threadId:this._threadContext.get().threadId,reader:(0,o.zG)(this._threadContext.get().loggedUser,ca.UI(ba.R))}),ca.UI((({threadId:t,reader:n})=>({threadId:t,features:Array.from(this._featuresAndExperiments.features),readerExperiment:this._featuresAndExperiments.experimentNames[0],sessionUuid:this._sessionUuid,reader:n,events:e}))),ca.g_((e=>T.of(m.kH(e))),(e=>Mo.o((()=>this._rpcClient.get().sendReaderEvents(e)),[So.B1(3),So.jR(5e3)],(e=>e instanceof To.Lu||e instanceof To.Bb&&e.code>=500)))))))).subscribe(m.g_({onInProgress:o.Q1,onSuccess:o.Q1,onError:o.Q1,onFatal:e=>{this._logger.warn("Feedback error",e),this._telemetry.readerGmail.warning("feedback","Feedback error",e)}}))}dispose(){this._subscriptions.unsubscribe()}}function Lo(e){return{type:"tellUsMoreFeedback",feedbackText:e.text,messageId:e.source.item.message.id,subject:e.source.itemType,action:e.source.action,id:e.source.item.itemId,itemText:e.source.item.text}}function Go(e){return{type:"genericFeedback",placement:e.source.kind,feedbackText:e.text,score:(0,o.zG)(e.scoreResult,h.map((e=>e.score)),h.toUndefined),scoreLabel:(0,o.zG)(e.scoreResult,h.map((e=>e.label)),h.toUndefined)}}function Oo(e,t,n){return"followUpItem"===n?(0,o.zG)(e.annotations.get().get(t),m.g_({onInProgress:(0,o.a9)(h.none),onSuccess:h.chain((e=>e.filteringInfo)),onFatal:(0,o.a9)(h.none),onError:(0,o.a9)(h.none)})):"summaryItem"===n?(0,o.zG)(e.summaries.get().get(t),m.g_({onInProgress:(0,o.a9)(h.none),onSuccess:h.chain((e=>e.filteringInfo)),onFatal:(0,o.a9)(h.none),onError:(0,o.a9)(h.none)})):void(0,D.vE)(n)}var Po=n(44586),Ko=n(41263),zo=n(96002),Ro=n(18505),Bo=n(2780),Ho=n(16782);const Do=`${Io.k2} > div + div`;class Vo{constructor(e,t,n,i,a=no.Y.create("gmail.reader.panelInjection")){this._getEnv=n,this._logger=a,this._mounted=new Ho.t(1),this.elementRef=f.createRef(),this.mounted=this._mounted.asObservable(),this._injectionSub=e.pipe(ao.w((e=>new Po.y((()=>(0,o.zG)(h.fromNullable(e.querySelector(Do)),h.filter((e=>e instanceof HTMLElement)),h.fold((()=>o.Q1),(e=>{const n=Ro.VB.get({monitorAs:"reader-panel"}).inject(Bo.EM.fromDocument(e.ownerDocument,"grammarly-extension"),Bo.zs.appendChild(e),(()=>f.createElement(Ko.L,{chunkName:"readerGmailThreadIntegration"},f.createElement(zo.p,{env:this._getEnv()},f.createElement("div",{style:{marginTop:"2rem"},ref:this.elementRef},f.createElement(t,null),i?f.createElement(i,null):null)))));return this._mounted.next(),this._logger.debug("Panel injected"),()=>{n.dispose(),this._logger.debug("Panel disposed")}})))))))).subscribe()}dispose(){this._injectionSub.unsubscribe()}}var Zo=n(97757),jo=n(67434),qo=n(44126);class Wo{constructor(e,t,n,i){this._threadContext=e,this._optedIn=t,this._features=n,this._navigationEvents=i,this.summariesToFetch=this._features.has("summaries")?this._navigationEvents.pipe((0,Zo.Gx)(this._optedIn),yo.b(100),lo.b((({nextActiveIndex:e,navigationAction:t})=>{const n=this._threadContext.get().messageCount,i=e=>e>=0&&e<n;switch(t){case L.left:return Ua.D([e-1,e].filter(i));case L.right:return Ua.D([e,e+1].filter(i));case L.first:return Ua.D([0,1].filter(i));case L.last:return Ua.D([n-2,n-1].filter(i));default:(0,D.vE)(t)}})),co.zg((e=>this._threadContext.view((t=>t.messageIndexToIdMap.get(e))).pipe(H.h(ya.fQ),dt.q(1)))),jo.R(((e,t)=>new Set(e).add(t)),new Set),(0,d.Yp)(la.eo.eq)):oo.E,this.annotationsToFetch=this._features.has("followUps")||this._features.has("inlineHighlights")?this._threadContext.view((e=>new Set(e.messageIndexToIdMap.values()))).pipe(jo.R(((e,t)=>new Set(Array.from(e).concat(Array.from(t)))),new Set),(0,d.Yp)(ua.yv),(0,Zo.Gx)(this._optedIn)):oo.E}}class Jo{constructor(e,t,n,i,a,r=s.O,l,d=no.Y.create("gmail.reader.remoteData")){this._threadContext=e,this._optedIn=t,this._features=n,this._navigationEvents=i,this._useCaching=a,this._getEnv=r,this._telemetry=l,this._logger=d,this._subscriptions=new aa.w,this._rpcClient=(0,ya.Vo)((()=>new No.u(this._getEnv().bgRpc.api))),this._summariesReadyToFetch=new ye.xQ,this._annotationsReadyToFetch=new ye.xQ,this._summaries=u.h.create(new Map),this._annotations=u.h.create(new Map),this._requester=new Wo(this._threadContext,this._optedIn,this._features,this._navigationEvents),this.summaries=this._summaries.view(),this.annotations=this._annotations.view(),this._subscriptions.add(this._requester.annotationsToFetch.pipe(we.b((e=>this._logger.debug(`requesting annotations for [${String(Array.from(e))}]`))),(0,qo.c)(this._threadContext,200)).subscribe((e=>this._annotationsReadyToFetch.next(e)))),this._subscriptions.add(this._requester.summariesToFetch.pipe(we.b((e=>this._logger.debug(`requesting summaries for [${String(Array.from(e))}]`))),(0,qo.c)(this._threadContext,200)).subscribe((e=>this._summariesReadyToFetch.next(e)))),this._subscriptions.add(this._summariesReadyToFetch.pipe(co.zg((e=>this._getSummaries(e).pipe(C.U((t=>({requestedIds:e,response:t}))))))).subscribe((({requestedIds:e,response:t})=>{this._summaries.modify((n=>Array.from(e).reduce(((e,i)=>e.set(i,(0,o.zG)(m.n2(t)?(0,o.zG)(h.fromNullable(n.get(i)),h.getOrElse((()=>m.x5))):t,m.UI((e=>h.fromNullable(e[i])))))),new Map(n))))}))),this._subscriptions.add(this._annotationsReadyToFetch.pipe(co.zg((e=>this._getAnnotations(e).pipe(C.U((t=>({requestedIds:e,response:t}))))))).subscribe((({requestedIds:e,response:t})=>{this._annotations.modify((n=>Array.from(e).reduce(((e,i)=>e.set(i,(0,o.zG)(m.n2(t)?(0,o.zG)(h.fromNullable(n.get(i)),h.getOrElse((()=>m.x5))):t,m.UI((e=>h.fromNullable(e[i])))))),new Map(n))))})))}dispose(){this._subscriptions.unsubscribe()}_getThreadInfoForBackend(){return(0,o.zG)(this._threadContext.get(),(e=>a.Y(ca.wE)({id:e.threadId,subject:e.subject,messageCount:ca.F2(e.messageCount),messages:ca.F2(Array.from(e.expandedMessages.values()).filter(m.d6).map((e=>e.value))),loggedUser:e.loggedUser})),ca.UI((e=>({...e,messages:e.messages.reduce(((t,n)=>{var i;return t[n.id]={id:n.id,index:n.index,subject:e.subject,body:n.textMap.getRichText(),plainText:n.textMap.getPlainText(),date:n.context.date,author:n.context.author,audience:n.context.audience,replyTo:(null===(i=n.context.metadata.replyTo)||void 0===i?void 0:i.map((e=>({email:e}))))||[],semanticInformation:(0,o.zG)(n.context.metadata,(e=>e?{tableTextCoverage:e.tableTextCoverage,isWholeHTMLDocument:/^text\/html\b/.test(e.contentType||"")}:void 0)),links:n.context.links,isFromMailingList:(n.context.metadata.listUnsubscribe||[]).length>0},t}),{})}))))}_getSummaries(e){return(0,o.zG)(this._getThreadInfoForBackend(),ca.g_((e=>T.of(m.kH(e))),(t=>Mo.o((()=>(this._logger.debug(`Fetching summaries for [${String(Array.from(e))}]`),this._rpcClient.get().getReaderSummaries({thread:{id:t.id,subject:t.subject,messages:(0,o.zG)(t.messages,sa.u4({},((e,t)=>(e[t.index]=va(t),e)))),num_messages:t.messageCount},reader:(0,ba.R)(t.loggedUser),requestedMessageIds:Array.from(e),useCache:this._useCaching.get()}).then((e=>((0,o.zG)(e,ca.Pd((e=>{this._telemetry.readerGmail.warning("summariesResponse",e.message,e),this._logger.warn("Summaries error",e.message)}),(e=>{this._logger.debug("Received summaries",e)}))),e))))),[So.B1(3),So.jR(5e3)],(e=>e instanceof To.Lu||e instanceof To.Bb&&e.code>=500)))))}_getAnnotations(e){return(0,o.zG)(this._getThreadInfoForBackend(),ca.g_((e=>T.of(m.kH(e))),(t=>Mo.o((()=>(this._logger.debug(`Fetching annotations for [${String(Array.from(e))}]`),this._rpcClient.get().getReaderAnnotations({thread:{id:t.id,subject:t.subject,messages:(0,o.zG)(t.messages,sa.u4({},((e,t)=>(e[t.index]=va(t),e)))),num_messages:t.messageCount},reader:(0,ba.R)(t.loggedUser),requestedMessageIds:Array.from(e),useCache:this._useCaching.get()}).then((e=>((0,o.zG)(e,ca.Pd((e=>{this._telemetry.readerGmail.warning("annotationsResponse",e.message,e),this._logger.warn("Annotations error",e.message)}),(e=>{this._logger.debug("Received annotations",e)}))),e))).then(ca.UI((0,o.ls)(sa.Su(((e,n)=>{var i;const a=null===(i=t.messages[e])||void 0===i?void 0:i.plainText;return{...n,annotations:void 0!==a?n.annotations.map((e=>({...e,text:a.slice(e.span.s,e.span.e)}))):[]}}))))))),[So.B1(3),So.jR(5e3)],(e=>e instanceof To.Lu||e instanceof To.Bb&&e.code>=500)))))}}function Qo(e,t,n,c,m,p,g,b,f,v=s.O,I=no.Y.create("gmail.reader.threadIntegration")){const y=ya.iy.create(),x=(0,ya.Vo)((()=>v().bgRpc.api)),E=new ye.xQ,U=new ye.xQ,M=new aa.w,F=p.pipe(ao.w((e=>e.seenOnboarding?T.of(!!e.enabled):p.pipe(H.h((e=>!!e.seenOnboarding)),C.U((e=>!!e.enabled))))),dt.q(1)),A=new Jo(t,F,n.features,Ca.T(E,U),c,v,f),G=u.h.create(null),O=u.h.create(!1),P=function(e,t,n,i){return ie.aj([e.annotations,t,n.view((e=>(0,o.zG)(t.get().threadId,h.fromEither,h.chain((t=>{var n,i;return(0,o.zG)(h.fromNullable(null===(i=null===(n=e.threadState)||void 0===n?void 0:n[t])||void 0===i?void 0:i.annotations),h.map((0,o.ls)(sa.UI((0,o.ls)((e=>Ma.X.decode(e)),h.fromEither)),sa.oA,sa.u4(new Set,((e,t)=>t.dismissed?e.add(t.itemId):e)))))})),h.getOrElse((()=>new Set))))),i]).pipe(C.U((([e,t,n,i])=>(0,o.zG)(e,l.Su(((e,s)=>(0,o.zG)(a.Y(h.option)({annotations:(0,o.zG)(s,d.zk,h.flatten,h.map((e=>(0,o.zG)(e.annotations,at.hX((t=>!n.has(Ma.p.Id.create(t.id))&&(h.isNone(e.filteringInfo)||i)&&"main_point"===t.type))))),h.chain(it.nI)),message:(0,o.zG)(h.fromNullable(t.expandedMessages.get(e)),h.chain(d.zk))}),h.map((({annotations:e,message:t})=>({docId:t.id,textMap:t.textMap,textNode:t.bodyNode,annotations:e})))))),l.DZ(o.yR)))))}(A,t,p,O),z=ie.aj([P,p.view("inlineHighlightsEnabled")]).pipe(C.U((([e,t])=>t?Array.from(e.values()).flatMap((e=>e.annotations)):[])),C.U((e=>e.length>0))),B=(V=n.features).has("summaries")||V.has("followUps")||V.has("links")?new Ra(i.create(t,A.summaries,A.annotations),z,m.config.bundleInfo.browser,b,y,n.features,p,O):null;var V;const Z=B?new ia.ViewModelImpl(p,b,y,t):null;M.add(p.view((({inlineHighlightsEnabled:t})=>{G.modify((i=>(null==i||i.dispose(),!1!==t&&Z&&n.features.has("inlineHighlights")?new $a.u(P,e,((e,t)=>new ko(e,t,((e,t,n,i)=>new po(e,t,i)),Z)),((e,t)=>({highlightId:e,annotation:t,highlightColor:eo.hE.Preset.create(eo.al.blue),highlightDisplayFormat:eo.jk.background,highlightLiveliness:eo.iY.static}))):null)))})).subscribe());const j=e=>t=>{const n=`${e} promise rejection: ${String(t)}`;I.error(n),f.readerGmail.warning("promiseRejection",n,t)};B&&Z&&M.add(function(e,t,n,i){const a=new aa.w;return a.add(t.pipe(H.h(R.is(R.Kind.seenInlineHighlightsOnboarding))).subscribe((()=>{n.seenReaderInlineHighlightsOnboarding().catch(i("CSActions.seenReaderInlineHighlightsOnboarding"))}))),a.add(e.pipe(H.h(R.is(R.Kind.inlineHighlightOnboardingElementMounted))).subscribe((({step:e,node:n})=>t.next({kind:R.Kind.inlineHighlightOnboardingElementMounted,step:e,node:n})))),a}(B.actions,Z.actions,g,j)),B&&M.add(function(e,t,n,i,a,s){const r=new aa.w,l=e=>(0,o.zG)(n.get().threadId,h.fromEither,bt.bw(e));return r.add(e.pipe(H.h((0,k.Kg)(R.is(R.Kind.optIn),R.is(R.Kind.optOut)))).subscribe((({kind:e})=>{t.seenReaderGmailOnboarding(e).catch(s("CSActions.seenReaderGmailOnboarding"))}))),r.add(e.pipe(H.h(R.is(R.Kind.threadViewNavigate))).subscribe((({action:e,nextIndex:t})=>a.next({nextActiveIndex:t,navigationAction:e})))),r.add(e.pipe(H.h((0,k.Kg)(R.is(R.Kind.check),(0,k.W9)((0,k.Kg)(R.is(R.Kind.pin),R.is(R.Kind.dismiss),R.is(R.Kind.like),R.is(R.Kind.dislike)),R.itemTypeIs("followUpItem")))),C.U((e=>e.kind===R.Kind.check?{...e.item,checked:e.checked}:$o(e)))).subscribe((e=>l((n=>{t.readerGmailUpdateAnnotationItem({threadId:n,item:e}).catch(s("CSActions.readerGmailUpdateAnnotationItem"))}))))),r.add(e.pipe(H.h((0,k.W9)((0,k.Kg)(R.is(R.Kind.pin),R.is(R.Kind.dismiss),R.is(R.Kind.like),R.is(R.Kind.dislike)),R.itemTypeIs("summaryItem"))),C.U($o)).subscribe((e=>l((n=>{t.readerGmailUpdateSummaryItem({threadId:n,item:e}).catch(s("CSActions.readerGmailUpdateSummaryItem"))}))))),r.add(e.pipe(H.h((0,k.W9)((0,k.Kg)(R.is(R.Kind.pin),R.is(R.Kind.dismiss)),R.itemTypeIs("linkItem"))),C.U($o)).subscribe((e=>l((n=>{t.readerGmailUpdateLinkItem({threadId:n,item:e}).catch(s("CSActions.readerGmailUpdateLinkItem"))}))))),r.add(e.pipe(H.h(R.is(R.Kind.toggleInlineHighlights))).subscribe((({enabled:e})=>{i.set(e),t.toggleReaderInlineHighlights(e).catch(s("CSActions.toggleReaderInlineHighlights"))}))),r}(B.actions.asObservable(),g,t,O,E,j));const q=new Ao((null==B?void 0:B.actions)||oo.E,A,t,y,n,v,f),W=B?new Vo(t.view((e=>e.messageCount)).pipe(C.U((()=>(0,o.zG)((0,Ya.XT)(e),(e=>h.fromNullable(e[e.length-1]))))),N.oA,rt.x()),(()=>{return S.UI.mount(Xi,(e=B,S.Z.composeKnot({content:S.Z.composeUnion({collapsed:We(e),expanded:Ni(e),onboarding:$i(e)},(()=>e.state.pipe(C.U((e=>({kind:w(e)?"onboarding":_(e)?"expanded":"collapsed"})))))),notification:Y(e)})));var e}),v,Z?()=>S.UI.mount(ea.Onboarding,ea.createFlow(Z)):void 0):null,J=E.pipe(ao.w((()=>Uo(m.doc))),we.b(ca.Pd((e=>I.warn("Error while expanding messages",e)),(e=>{switch(e){case vo.expanded:return I.trace("Messages expanded");case vo.noExpansionNeeded:return I.trace("Thread already expanded");default:(0,D.vE)(e)}}))),io.shareReplay({bufferSize:1,refCount:!0}));M.add(t.pipe(C.U((e=>(0,o.zG)(h.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),h.chain((t=>h.fromNullable(e.expandedMessages.get(t)))),h.chain(d.zk),h.map((t=>({lastMessage:t,ctx:e})))))),N.oA,dt.q(1),ao.w((({lastMessage:e,ctx:t})=>Ua.D((0,to.j)(e.context.author.email,e.context.audience.map((e=>e.email)),(e=>x.get().isGenericEmailDomain(e)))).pipe(C.U((n=>({lastMessage:e,ctx:t,isExternalComm:n})))))),we.b((({lastMessage:e,ctx:t,isExternalComm:n})=>{b.readerMailSessionStart(e.id,e.context.audience.length,(0,d.Y2)(e.textMap.getPlainText()),t.messageCount,y,(0,o.zG)(h.fromEither(n),h.flatten,h.toUndefined),(0,o.zG)(t.threadId,h.fromEither,h.toUndefined))}))).subscribe());const Q=(0,r.W$)(e);return Q&&M.add(Ca.T(E.pipe(C.U((e=>{var t;return(null===(t=null==W?void 0:W.elementRef)||void 0===t?void 0:t.current)?W.elementRef.current.getBoundingClientRect().top:null}))),J.pipe(so.h(null))).pipe(ro.G()).subscribe((([e,t])=>{var n;if((null===(n=null==W?void 0:W.elementRef)||void 0===n?void 0:n.current)&&null===t&&null!==e){const t=W.elementRef.current.getBoundingClientRect().top;Q.scrollTop=Q.scrollTop+t-e}}))),M.add(J.subscribe()),W&&M.add(W.mounted.pipe(C.U((e=>({nextActiveIndex:1/0,navigationAction:L.last})))).subscribe((e=>U.next(e)))),"prod"!==m.config.bundleInfo.env&&(0,d.h$)(m.doc,{threadContext:t,threadRemoteData:A,panelViewModel:B}),M.add((0,ho._)(e).pipe(C.U((({forms:e,added:t})=>Array.from(e.values()).filter((({messageId:e})=>t.has(e))))),lo.b((e=>T.of(...e))),xe.M(t),we.b((([{initTime:e},t])=>{b.readerMailReplyStart(t.messageCount,y,Date.now()-e,(0,o.zG)(t.threadId,h.fromEither,h.toUndefined)),null==B||B.actions.next({kind:R.Kind.expand,source:K.replyButton})})),co.zg((([e])=>Je.R(e.buttonEl,"click").pipe(xe.M(T.of(e),Xa.x.getRecipientsContextEventObservable(e.formEl,null),t),H.h((([e,t,n])=>n.length>0)),co.zg((([e,t,n,i])=>(0,o.zG)(a.Y(h.option)({message:(0,o.zG)(h.fromNullable(i.expandedMessages.get(t.messageId)),h.chain(d.zk)),loggedUser:h.fromEither(i.loggedUser)}),h.fold((()=>oo.E),(({message:e,loggedUser:a})=>Ua.D((0,to.j)(a.email,(0,o.zG)(n,mo.UI((e=>to.G.create(e.email))),mo.oA),(e=>x.get().isGenericEmailDomain(e)))).pipe(C.U((a=>({message:e,isExternalComm:a,threadContext:i,recipients:n,data:t}))))))))),we.b((({data:e,recipients:t,threadContext:n,message:i,isExternalComm:a})=>{b.readerMailReplySent(n.messageCount,i.textMap.getPlainText().length,i.context.audience.length,t.length,y,Date.now()-e.startTime,(0,o.zG)(h.fromEither(a),h.flatten,h.toUndefined),(0,o.zG)(n.threadId,h.fromEither,h.toUndefined))})))))).subscribe()),I.debug(`Thread integration created for thread #${ca.fS((()=>"unknown"))(t.get().threadId)}`),()=>{var e;b.readerMailSessionEnd(y,(0,o.zG)(t.get().threadId,h.fromEither,h.toUndefined)),M.unsubscribe(),q.dispose(),null==W||W.dispose(),null==B||B.dispose(),null===(e=G.get())||void 0===e||e.dispose(),A.dispose(),null==Z||Z.dispose(),I.debug("Thread integration disposed")}}function $o(e){switch(e.kind){case R.Kind.pin:switch(e.itemType){case"linkItem":case"summaryItem":case"followUpItem":return{...e.item,pinned:e.pinned};default:(0,D.vE)(e.itemType)}break;case R.Kind.dismiss:return{...e.item,dismissed:!0};case R.Kind.like:case R.Kind.dislike:return{...e.item,rating:ja(e.kind)};default:(0,D.vE)(e)}}},96002:(e,t,n)=>{n.d(t,{p:()=>g});var i=n(27378),a=n(86620),o=n(92132),s=n(87965),r=n(48189),l=n(50663),d=n(49468),c=n(33678),m=n(15073),h=n(42103),u=n(64078),p=n(76974);const g=({env:e,children:t,className:n})=>i.createElement(d.o,{className:n},i.createElement(s.p,null,i.createElement(c.a.Context.Provider,{value:new a.C(e)},i.createElement(o.Q,{remSize:p.of(16),setter:e=>m.u.setRootCssVar(document.documentElement,e)},i.createElement(h.G.DefaultProvider,null,t,i.createElement(r.p,{regular:!0,bold:!0}),i.createElement(l.G,null),i.createElement(u.X,null))))))},14700:(e,t,n)=>{n.d(t,{d:()=>h});var i=n(57050),a=n(19429),o=n(28043),s=n(66310),r=n(85985),l=n(77176),d=n(76974),c=n(2844);const m={URI:"Observable",map:(e,t)=>e.pipe(l.U(t)),ap:(e,t)=>c.aj([e,t]).pipe(l.U((([e,t])=>e(t)))),of:e=>d.of(e)};function h(e,t,n){return a.VF((a=>(0,i.zG)(t(a),o.x(),s.w((t=>n.traverseWithIndex(m)(t,((t,n)=>e(n,t)(a.pipe(r.h((e=>e.key===t)),l.U((e=>e.action)))))))),o.x())))}},41627:(e,t,n)=>{n.d(t,{v:()=>o,x:()=>s});var i=n(44586),a=n(95195);function o(e,t=self){return new i.y((n=>{var i,o;(null===(o=null===(i=t.navigator)||void 0===i?void 0:i.clipboard)||void 0===o?void 0:o.writeText)?t.navigator.clipboard.writeText(e).then((()=>n.next(a.F2(void 0)))).catch((e=>n.next(a.t$(new Error(String(e)))))):n.next(a.t$(new Error("The Clipboard API is not available.")))}))}function s(e=self){var t,n;return!!(null===(n=null===(t=e.navigator)||void 0===t?void 0:t.clipboard)||void 0===n?void 0:n.writeText)}},86620:(e,t,n)=>{n.d(t,{C:()=>d,U:()=>i});var i,a=n(27378),o=n(29511),s=n(33678),r=n(88056),l=n(95574);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...s.a.Flag},e.Context=a.createContext(r.Y.invariantContent("Environment"))}(i||(i={}));class d{constructor(e=(0,o.O)()){this._flags=new Set,this.actions={openUrl:e=>l.vM((()=>{document.location.href=e.toString()})),openPopup:e=>l.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e.config.systemInfo.os.isMac&&this._flags.add(i.Flag.isAppleSystem),this._flags.add(i.Flag.supportsSVGDominantBaseline),this._flags.add(i.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},92132:(e,t,n)=>{n.d(t,{Q:()=>l});var i=n(27378),a=n(15073),o=n(60797),s=n(95300),r=n(5114);const l=({children:e,remSize:t,setter:n})=>(d+=1,i.useEffect((()=>{const e=t.subscribe((e=>{c.next(r.some(e)),n(r.some(e))}));return()=>{e.unsubscribe(),d-=1,0===d&&(c.next(r.none),n(r.none))}}),[t]),i.createElement(a.u.Context.Provider,{value:c.pipe(o.oA)},e));let d=0;const c=new s.X(r.none)},61202:(e,t,n)=>{n.d(t,{j:()=>T});var i=n(34311),a=n(2844),o=n(77176);class s{constructor(e){this._annotationsStateService=e}getHoveredStateBehavior(e){return a.aj([this._annotationsStateService.hoveredAnnotation,this._annotationsStateService.activeAnnotation]).pipe(o.U((([t,n])=>t&&t.highlightIds.includes(e)||n&&n.highlightIds.includes(e)?i.pc.hovered:i.pc.none)))}}var r=n(74850),l=n(19751),d=n(66310),c=n(24209),m=n(40151),h=n(2834),u=n(23063),p=n(93508),g=n(76974),b=n(47849);class f extends b.LH{constructor(e,t=r.Y.create(f.name)){super(e,t),this.hoveredAnnotation=this._rawHoveredAnnotation.pipe(d.w((e=>e?c.T(this._offByUpdatedGeometry(e),this._options.offByTextPositionChange||m.E).pipe(h.b((()=>this._log.trace("Active state was overriden by text or geometry change"))),u.q(1),p.O(e)):g.of(null))),l.skipBy(b.Cn.getEqById()),l.shareReplay({bufferSize:1,refCount:!0})),this.activeAnnotation=this.hoveredAnnotation}}var k=n(93356),v=n(76331),I=n(57050),_=n(40327),y=n(10166),x=n(62337),w=n(71249),E=n(4432);class C{constructor(e=!0){this._collateLines=e}create(e,t){return{getRects:()=>{var n;const i=[];let a,o=e.start,s=!1;do{const r=t.getFragmentAtOrBeforeOffset(o);if(r&&a!==o){a=o;if(null===(n=r.node.textContent)||void 0===n?void 0:n.replace(/\s/g,"")){const n=E.M.createRange(t,o,Math.min(r.endOffset,e.end));n&&i.push(...Array.from(n.getClientRects()))}o=r.endOffset===o?r.endOffset+1:r.endOffset}else s=!0}while(o<e.end&&!s);return(0,_.pipe)(i,y.e,this._collateLines?y.y:I.yR,w.UI(x.Pf.create))}}}getClientRects(e){return e.getRects()}getIsInvalid(e){return!1}getIsConsistent(e,t,n){return!0}dispose(e){}}var U=n(98403),S=n(14601),N=n(38983);class T{constructor(e,t,n,a,o,l=(e=>new f(e)),d=!0){this._textNode=e,this._textMap=t,this._createLayout=n,this._collateLines=d,this._subscriptions=new S.w,this._geometryProvider=new C(this._collateLines),this._layout=this._createLayout(this._textNode),this.highlightsCollection=new v.C(this._geometryProvider,this._layout.createGeometryLayout(),(()=>this._textMap),(0,k.u)(),(0,i.WF)(this._layout.textNode));const c=a(this._layout);this._subscriptions.add((()=>null==c?void 0:c.dispose()));let m=null;if(c){const e=N.h.create(null),t=l({textNode:this._textNode,textNodeLayout:this._layout.textNode,mouseData:this._layout.mouse,highlightGeometry:this.highlightsCollection,cardHovered:c.cardHovered,cardDismissed:c.cardDismissed,getCurrentCardAnnotationState:()=>e.get(),offByTextPositionChange:(0,b.ss)(this._layout.textNode,r.Y.create(f.name))});this._subscriptions.add(t.activeAnnotation.subscribe(U.wW(e))),this._subscriptions.add(e.subscribe((e=>{c.hide(),e&&c.show(e,this._layout.mouse.get())}))),m=new s(t)}const h=o(this._layout,this.highlightsCollection,(null==c?void 0:c.view)||g.of(null),(e=>(null==m?void 0:m.getHoveredStateBehavior(e))||g.of(i.pc.none))),u=this._layout.render(h,{});this._subscriptions.add((()=>u.dispose()))}dispose(){this._layout.dispose(),this.highlightsCollection.dispose(),this._subscriptions.unsubscribe()}}},63551:(e,t,n)=>{n.d(t,{u:()=>y});var i,a=n(57050),o=n(19723),s=n(34311),r=n(48424),l=n(74850),d=n(14601),c=n(32952),m=n(24209),h=n(93508),u=n(16118),p=n(77176),g=n(85321),b=n(73975),f=n(71249),k=n(43675),v=n(92843),I=n(5114),_=n(83078);!function(e){e.eq=b.Uz((e=>({annotations:e.annotations,docId:e.docId,textNode:e.textNode})))(b.MW({docId:b.yv,annotations:f.Eh(o.q.eq),textNode:b.w4}))}(i||(i={}));class y{constructor(e,t,n,b,y=l.Y.create("gmail.annotationsManager")){this._messagesRoot=t,this._logger=y,this._subscriptions=new d.w,this._currentAnnotations=new Map,this._state=new Map,this._textNodeToDocId=new WeakMap,this._annotationIdsForDocId=new Map,this._annotationToHighlightId=new Map,this._hiddenDocs=new WeakMap,this._hideActionSubject=new c.xQ,this._intersectionObserver=this._initIntersectionObserver();const x=m.T(e.pipe(h.O(new Map),u.G(),p.U((([e,t])=>(0,a.zG)(k.yi(i.eq)(e,t),v.v.reduce([],((e,{docId:t})=>e.concat({kind:"remove",docId:t})),((e,t,n)=>r.E.eq.equals(t.textNode,n.textNode)?e.concat({kind:"update",prevAnnotations:t.annotations,...n}):e.concat({kind:"remove",docId:t.docId},{kind:"add",...n})),((e,t)=>e.concat({kind:"add",...t})))))),g.zg(a.yR)),this._hideActionSubject);this._subscriptions.add(x.subscribe((e=>{const t=this._state.get(e.docId);if(t&&"remove"===e.kind)(0,a.zG)(I.fromNullable(this._annotationIdsForDocId.get(e.docId)),_.bw((e=>{for(const t of e.values())this._currentAnnotations.delete(t),this._annotationToHighlightId.delete(t)}))),this._annotationIdsForDocId.delete(e.docId),this._textNodeToDocId.delete(t.message.textNode.node),this._state.delete(e.docId),t.disposables.forEach((e=>e.dispose())),this._logger.trace(`Annotations for ${e.docId} cleared`);else if("add"===e.kind||"update"===e.kind&&!t){const t=n(e.textNode.node,e.textMap,(e=>I.fromNullable(this._currentAnnotations.get(e))));this._intersectionObserver.observe(e.textNode.node),this._state.set(e.docId,{message:e,wiring:t,disposables:[t,{dispose:()=>this._intersectionObserver.unobserve(e.textNode.node)}]}),this._textNodeToDocId.set(e.textNode.node,e.docId);const i=(0,a.zG)(I.fromNullable(this._annotationIdsForDocId.get(e.docId)),I.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));e.annotations.forEach((e=>{const n=s.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,n),this._logger.trace("Adding annotation highlight",n),this._currentAnnotations.set(e.id,e),i.add(e.id),t.highlightsCollection.addHighlight(n,{start:e.span.s,end:e.span.e},b(n,e))}))}else if(t&&"update"===e.kind){const{left:n,right:i}=(0,a.zG)(k.yi(o.q.eq)(new Map(e.prevAnnotations.map((e=>[e.id,e]))),new Map(e.annotations.map((e=>[e.id,e])))),v.v.reduce({left:[],right:[]},((e,t)=>({...e,left:e.left.concat(t)})),((e,t,n)=>({left:e.left.concat(t),right:e.right.concat(n)})),((e,t)=>({...e,right:e.right.concat(t)})))),r=(0,a.zG)(I.fromNullable(this._annotationIdsForDocId.get(e.docId)),I.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));n.forEach((e=>{r.delete(e.id),this._currentAnnotations.delete(e.id)}));const l=(0,a.zG)(n,f.DZ((e=>I.fromNullable(this._annotationToHighlightId.get(e.id)))));t.wiring.highlightsCollection.removeHighlights(l),i.forEach((e=>{const n=s.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,n),this._logger.trace("Adding annotation highlight",n),this._currentAnnotations.set(e.id,e),r.add(e.id),t.wiring.highlightsCollection.addHighlight(n,{start:e.span.s,end:e.span.e},b(n,e))}))}})))}_initIntersectionObserver(){return new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(0,a.zG)(I.fromNullable(this._hiddenDocs.get(e.target)),_.bw((t=>{this._hiddenDocs.delete(e.target),this._hideActionSubject.next({kind:"add",...t})}))):(0,a.zG)(I.fromNullable(this._textNodeToDocId.get(e.target)),I.chain((e=>I.fromNullable(this._state.get(e)))),_.bw((({message:t})=>{const{docId:n,textNode:i}=t;this._logger.debug(`Message ${n} hidden, clearing annotations`),this._hideActionSubject.next({kind:"remove",docId:n}),this._hiddenDocs.set(e.target,t),this._intersectionObserver.observe(i.node)})))}))}),{root:this._messagesRoot})}dispose(){this._subscriptions.unsubscribe();for(const{disposables:e}of this._state.values())e.forEach((e=>e.dispose()));this._currentAnnotations.clear(),this._state.clear(),this._annotationIdsForDocId.clear(),this._intersectionObserver.disconnect()}}},80895:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(27378),a=n(12187),o=n(12935);const s=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:n,boldTitle:s=!1,className:r,...l})=>i.createElement("div",{"data-grammarly-part":t,...(0,a.Sh)(o.badge,r,"primary"===e?o.badgePrimary:null,"success"===e?o.badgeSuccess:null,"gold"===e?o.badgeGold:null,"error"===e?o.badgeError:null,l.rounded?o.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:o.badgeRoundedSmall,l.rounded&&"medium"===l.size?o.badgeRoundedMedium:null,l.rounded&&"large"===l.size?o.badgeRoundedLarge:null)},i.createElement("div",{...(0,a.Sh)(o.badgeTitle,s?o.badgeTitleBold:null)},n))},86705:(e,t,n)=>{n.d(t,{v:()=>o});var i=n(27378),a=n(80895);const o=({browser:e,className:t,title:n="BETA"})=>"safari"!==e?i.createElement(a.C,{title:n,className:t}):null},31944:(e,t,n)=>{n.d(t,{J:()=>r});var i=n(57050),a=n(27378),o=n(12187),s=n(22536);const r=({onChange:e,labelId:t,className:n,checkboxClassName:r,labelClassName:l,checked:d,children:c,disabled:m,useDS:h,dataGrammarlyPart:u="ui-kit-checkbox",tabIndex:p=0})=>{const[g,b]=a.useState(null!=d&&d);a.useEffect((()=>{b(Boolean(d))}),[d]);const f=t=>{t.preventDefault(),t.stopPropagation(),b(!g),null==e||e(!g)};return a.createElement("div",{"data-grammarly-part":u,...(0,o.Sh)(s.checkboxContainer,n)},a.createElement("div",{...(0,o.Sh)(s.checkbox,r,g?s.checkboxChecked:null,h?s.checkboxDS:null),role:"checkbox","aria-checked":g,tabIndex:p,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&f(e)},onClick:m?i.Q1:f},g?a.createElement("div",{className:s.checkboxCheckmark}):null),a.createElement("label",{id:t,onClick:f,className:l},c))}},57053:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(27378),a=n(12187),o=n(39070);const s=({maxRating:e=5,ratingLabels:t=["Not at all valuable","Slightly valuable","Somewhat valuable","Very valuable","Extremely valuable"],onChange:n,value:s,ariaLabel:r="Rating",className:l,ratingStarsClassName:d,ratingLegendClassName:c,ratingLabelsClassName:m})=>{const[h,u]=i.useState(s),[p,g]=i.useState(void 0);i.useEffect((()=>{u(s)}),[s]),i.useEffect((()=>{void 0!==h&&n(h)}),[h]);const b=[...Array(e).keys()].map((e=>e+1)),f=void 0!==p?p:h;return i.createElement("div",{"data-grammarly-part":"ui-kit-rating",role:"radiogroup","aria-label":r,...(0,a.Sh)(o.rating,l)},i.createElement("div",{...(0,a.Sh)(o.ratingStars,d),onMouseLeave:()=>g(void 0)},b.map((e=>{const t=void 0!==f&&f>=e;return i.createElement("input",{key:`rating-${e}`,id:`rating-${e}`,type:"radio",name:"rating",checked:h===e,onChange:e=>u(parseInt(e.target.value,10)),value:e,onMouseEnter:e=>{const t=e.target;g(parseInt(t.value,10))},...(0,a.Sh)(o.ratingStar,t?o.ratingStarFilled:null)})}))),i.createElement("div",{...(0,a.Sh)(o.ratingLabels,m)},b.map((e=>i.createElement("label",{key:`rating-label-${e}`,htmlFor:`rating-${e}`,...(0,a.Sh)(f===e?o.ratingLabelVisible:o.ratingLabelNotVisible)},t[e-1])))),void 0!==f?null:i.createElement("div",{...(0,a.Sh)(o.ratingLegend,c)},i.createElement("div",null,t[0]),i.createElement("div",null,t[b.length-1])))}},83771:e=>{e.exports={layout:"_1hKpE",column:"_1rBJw",scrollView:"_1wR-W",sectionTitle:"-RBKX"}},47397:e=>{e.exports={empty:"_1XVf-",title:"_2AfjV",body:"_21gih"}},93253:e=>{e.exports={item:"_27MUw",content:"e2xP-",moreButton:"_2is65",pinned:"_1L-Hp",ellipsis:"_2TIW4"}},67465:e=>{e.exports={menu:"_1f4lm",pinned:"_1uRyx",button:"_12QVt",separator:"Q9ySg",inactiveIcon:"_2taPz"}},50243:e=>{e.exports={list:"u22ST"}},38459:e=>{e.exports={linkAndIcon:"_2mO4u",link:"_3djIE",linkWrapper:"kGyxh",icon:"_26TDA"}},45587:e=>{e.exports={itemLoading:"KdASy",lineOnly:"_3gA50",line:"_3btGG",lineLoading:"_3W_2s",rect:"_2Ln0z",rectLoading:"_1pxCc",lineAndCheckbox:"_3ZgMs",lineAndAvatar:"_1j1Dr"}},69566:e=>{e.exports={title:"rOb7m"}},11071:e=>{e.exports={textChecked:"_1Sg3F",checkboxWrapper:"_45wj5",label:"_1ybvy",checkbox:"T4rHe",itemText:"pqhgN"}},83581:e=>{e.exports={itemText:"_3h7i6"}},25756:e=>{e.exports={loader:"rfHCU",emptyCTAButton:"ZMDnY",warningGroup:"_1eJrv",warningIcon:"_3c_5k"}},79579:e=>{e.exports={emptyCTAButton:"_3kUpB"}},78870:e=>{e.exports={dialog:"_2-QQ0",header:"_1EWW5",headerGroup:"_1JdLn",buttons:"_3p63M",textbox:"_1CLrn",requiredTextBox:"_2T8Ox",requiredLabel:"_3HHRw"}},61033:e=>{e.exports={panelOverlay:"_1qTMO",dialog:"yOM_O"}},56229:e=>{e.exports={title:"_2k48T",rating:"_3V8Jf",ratingContainer:"_3T2eO",ratingStars:"_1WWyq",ratingLegend:"_9LsLz",ratingLabels:"_1j0UE",requiredLabel:"yOJki"}},35115:e=>{e.exports={title:"_57M23",description:"_2sj__"}},89739:e=>{e.exports={activeMailInfo:"_31J8M",date:"fHbk9",author:"BD2pG"}},37903:e=>{e.exports={header:"_1mfP5"}},14692:e=>{e.exports={navigationFrame:"v_SsT",buttonGroup:"_3n1p4",iconJump:"_22-y3",iconGoFirst:"_2OzZD",icon:"_3hVGV"}},16204:e=>{e.exports={buttonGroup:"_2tWWr",button:"_1jXO0"}},76168:e=>{e.exports={notification:"_1xXpR"}},40349:e=>{e.exports={controls:"_2Hipc",onboardingButtonGroup:"_-9OmU",optInButton:"_5OTjn",optOutButton:"_30tah",navigation:"_1jU2d",leftButton:"P6wpw",rightButton:"_3CBvI",arrowRight:"D-jgQ",stepOfN:"_1HJSf"}},86564:e=>{e.exports={disclaimer:"Y6xYb"}},57391:e=>{e.exports={illustration:"fcee3"}},51869:e=>{e.exports={onboarding:"_2ODbM",logo:"Lr1qJ",content:"_3-26v",badge:"_3POlX",steps:"_31CBV"}},77821:e=>{e.exports={highlightsOnboarding:"_1kj0B","highlightsOnboarding-button":"_1BN-s","highlightsOnboarding-icon":"_1ZhuO","highlightsOnboarding-header":"_17c8S","highlightsOnboarding-content":"_3bcKa","highlightsOnboarding-buttons":"_3kg0R"}},19230:e=>{e.exports={title:"gf4R_",body:"_2Vehu"}},23556:e=>{e.exports={header:"_3kzGL",nothingToRecap:"_3Y1Tm",spinner:"_3eEte"}},86885:e=>{e.exports={panelWrapper:"dVcQ2"}},35300:e=>{e.exports={onboarding:"_1hppt",toolbar:"_38d_I"}},64908:e=>{e.exports={panelGrid:"_1oojw",header:"_15T_5",toolbar:"_3jOrT"}},58120:e=>{e.exports={recapButton:"_318vF",logo:"Tn0sZ",recap:"_3L1sH"}},12935:e=>{e.exports={badge:"Mora3",badgePrimary:"_1446Q",badgeSuccess:"_2FQ9t",badgeGold:"_3t7g2",badgeError:"_154CZ",badgeRounded:"_2atD_",badgeRoundedSmall:"OxUT1",badgeRoundedMedium:"_1Rehq",badgeRoundedLarge:"_1Mmea",badgeTitle:"_1imRR",badgeTitleBold:"KO4Gs"}},22536:e=>{e.exports={checkboxContainer:"_3bj_g",checkbox:"xrB8R",checkboxDS:"_2UTyE",checkboxChecked:"Uhddy",checkboxCheckmark:"_1qI2g",spin:"_3S_a3"}},39070:e=>{e.exports={rating:"_2oJv0",ratingStars:"_3FAXT",ratingStar:"_1p53S",ratingStarFilled:"_1E3qz",ratingLabels:"jzPuo",ratingLabelVisible:"_3yF9v",ratingLabelNotVisible:"_2zNv4",ratingLegend:"_1XbY_",spin:"fu5_3"}},39335:(e,t,n)=>{var i={superfasthash:n(11028),murmurhash3:n(13786)};e.exports={createHash:function(e){e=e.replace(/![a-zA-z0-9]/g,"").toLowerCase();try{return i[e]}catch(e){throw new Error(e)}}}},13786:(e,t,n)=>{var i=n(81314);function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function s(e){return e=a(e^=e>>>16,2246822507),e=a(e^=e>>>13,3266489909),e^=e>>>16}function r(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function d(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function c(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function m(e,t){return[e[0]^t[0],e[1]^t[1]]}function h(e){return e=m(e,[0,e[0]>>>1]),e=m(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=m(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}var u=function(e,t){e=""+e||"";var n=i.toU8IntArray(e);t=t||0;for(var a=(e={charCodeAt:function(e){return n[e]},length:n.length}).length%16,o=e.length-a,s=[0,t],u=[0,t],p=[0,0],g=[0,0],b=[2277735313,289559509],f=[1291169091,658871167],k=0;k<o;k+=16)p=[255&e.charCodeAt(k+4)|(255&e.charCodeAt(k+5))<<8|(255&e.charCodeAt(k+6))<<16|(255&e.charCodeAt(k+7))<<24,255&e.charCodeAt(k)|(255&e.charCodeAt(k+1))<<8|(255&e.charCodeAt(k+2))<<16|(255&e.charCodeAt(k+3))<<24],g=[255&e.charCodeAt(k+12)|(255&e.charCodeAt(k+13))<<8|(255&e.charCodeAt(k+14))<<16|(255&e.charCodeAt(k+15))<<24,255&e.charCodeAt(k+8)|(255&e.charCodeAt(k+9))<<8|(255&e.charCodeAt(k+10))<<16|(255&e.charCodeAt(k+11))<<24],p=d(p=l(p,b),31),s=r(s=d(s=m(s,p=l(p,f)),27),u),s=r(l(s,[0,5]),[0,1390208809]),g=d(g=l(g,f),33),u=r(u=d(u=m(u,g=l(g,b)),31),s),u=r(l(u,[0,5]),[0,944331445]);switch(p=[0,0],g=[0,0],a){case 15:g=m(g,c([0,e.charCodeAt(k+14)],48));case 14:g=m(g,c([0,e.charCodeAt(k+13)],40));case 13:g=m(g,c([0,e.charCodeAt(k+12)],32));case 12:g=m(g,c([0,e.charCodeAt(k+11)],24));case 11:g=m(g,c([0,e.charCodeAt(k+10)],16));case 10:g=m(g,c([0,e.charCodeAt(k+9)],8));case 9:g=l(g=m(g,[0,e.charCodeAt(k+8)]),f),u=m(u,g=l(g=d(g,33),b));case 8:p=m(p,c([0,e.charCodeAt(k+7)],56));case 7:p=m(p,c([0,e.charCodeAt(k+6)],48));case 6:p=m(p,c([0,e.charCodeAt(k+5)],40));case 5:p=m(p,c([0,e.charCodeAt(k+4)],32));case 4:p=m(p,c([0,e.charCodeAt(k+3)],24));case 3:p=m(p,c([0,e.charCodeAt(k+2)],16));case 2:p=m(p,c([0,e.charCodeAt(k+1)],8));case 1:p=l(p=m(p,[0,e.charCodeAt(k)]),b),s=m(s,p=l(p=d(p,31),f))}return s=r(s=m(s,[0,e.length]),u=m(u,[0,e.length])),u=r(u,s),s=r(s=h(s),u=h(u)),u=r(u,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)};e.exports={x86Hash32:function(e,t){e=""+e||"";var n=i.toU8IntArray(e);t=t||0;for(var r=(e={charCodeAt:function(e){return n[e]},length:n.length}).length%4,l=e.length-r,d=t,c=0,m=3432918353,h=461845907,u=0;u<l;u+=4)c=a(c=255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24,m),c=a(c=o(c,15),h),d=a(d=o(d^=c,13),5)+3864292196;switch(c=0,r){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:c=a(c^=255&e.charCodeAt(u),m),d^=c=a(c=o(c,15),h)}return((d=s(d^=e.length))>>>0).toString(16)},x86Hash128:function(e,t){e=""+e||"";var n=i.toU8IntArray(e);t=t||0;for(var r=(e={charCodeAt:function(e){return n[e]},length:n.length}).length%16,l=e.length-r,d=t,c=t,m=t,h=t,u=0,p=0,g=0,b=0,f=597399067,k=2869860233,v=951274213,I=2716044179,_=0;_<l;_+=16)u=255&e.charCodeAt(_)|(255&e.charCodeAt(_+1))<<8|(255&e.charCodeAt(_+2))<<16|(255&e.charCodeAt(_+3))<<24,p=255&e.charCodeAt(_+4)|(255&e.charCodeAt(_+5))<<8|(255&e.charCodeAt(_+6))<<16|(255&e.charCodeAt(_+7))<<24,g=255&e.charCodeAt(_+8)|(255&e.charCodeAt(_+9))<<8|(255&e.charCodeAt(_+10))<<16|(255&e.charCodeAt(_+11))<<24,b=255&e.charCodeAt(_+12)|(255&e.charCodeAt(_+13))<<8|(255&e.charCodeAt(_+14))<<16|(255&e.charCodeAt(_+15))<<24,u=o(u=a(u,f),15),d=o(d^=u=a(u,k),19),d=a(d+=c,5)+1444728091,p=o(p=a(p,k),16),c=o(c^=p=a(p,v),17),c=a(c+=m,5)+197830471,g=o(g=a(g,v),17),m=o(m^=g=a(g,I),15),m=a(m+=h,5)+2530024501,b=o(b=a(b,I),18),h=o(h^=b=a(b,f),13),h=a(h+=d,5)+850148119;switch(u=0,p=0,g=0,b=0,r){case 15:b^=e.charCodeAt(_+14)<<16;case 14:b^=e.charCodeAt(_+13)<<8;case 13:b=a(b^=e.charCodeAt(_+12),I),h^=b=a(b=o(b,18),f);case 12:g^=e.charCodeAt(_+11)<<24;case 11:g^=e.charCodeAt(_+10)<<16;case 10:g^=e.charCodeAt(_+9)<<8;case 9:g=a(g^=e.charCodeAt(_+8),v),m^=g=a(g=o(g,17),I);case 8:p^=e.charCodeAt(_+7)<<24;case 7:p^=e.charCodeAt(_+6)<<16;case 6:p^=e.charCodeAt(_+5)<<8;case 5:p=a(p^=e.charCodeAt(_+4),k),c^=p=a(p=o(p,16),v);case 4:u^=e.charCodeAt(_+3)<<24;case 3:u^=e.charCodeAt(_+2)<<16;case 2:u^=e.charCodeAt(_+1)<<8;case 1:u=a(u^=e.charCodeAt(_),f),d^=u=a(u=o(u,15),k)}return d^=e.length,d+=c^=e.length,d+=m^=e.length,c+=d+=h^=e.length,m+=d,h+=d,d=s(d),d+=c=s(c),d+=m=s(m),c+=d+=h=s(h),m+=d,h+=d,("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(m>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},x64Hash64:function(e,t){return u(e,t).slice(8)},x64Hash128:u,hash:function(e,t){return u(e,t)}}},11028:(e,t,n)=>{var i=n(81314);function a(e,t){return e[t]<<8|e[t+1]}e.exports={hash:function(e){var t,n=i.toU8IntArray(e+""),o=0;if(!e)return o.toString(16);var s=n.length,r=0;t=3&s,s>>>=2;for(var l=0;l<s;l++)o=(o+=a(n,r))<<16^(a(n,r+2)<<11^o),r+=4,o+=o>>11;switch(t){case 3:o+=a(n,r),o^=o<<16,o^=n[r+2]<<18,o+=o>>11;break;case 2:o+=a(n,r),o^=o<<11,o+=o>>17;break;case 1:o+=n[r],o^=o<<10,o+=o>>1}return o^=o<<3,o+=o>>5,o^=o<<4,o+=o>>17,o^=o<<25,o+=o>>6,i.intToUnsignedHex(o)}}},81314:e=>{e.exports={toU8IntArray:function(e){for(var t=[],n=[],i=0;i<e.length;i++){var a,o=e.charCodeAt(i);for(n.length=0;(a=255&o)||o;)n.push(a),o>>>=8;t=t.concat(n.reverse())}return t},intToUnsignedHex:function(e){for(var t,n=[];(t=65535&e)||e;)t=t.toString(16),t="0000".slice(t.length)+t,n.push(t),e>>>=16;return n.reverse().join("")}}}}]);